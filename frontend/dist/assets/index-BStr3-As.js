(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Od(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function up(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Id={exports:{}},da={},Ld={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ds=Symbol.for("react.element"),dp=Symbol.for("react.portal"),mp=Symbol.for("react.fragment"),hp=Symbol.for("react.strict_mode"),fp=Symbol.for("react.profiler"),pp=Symbol.for("react.provider"),gp=Symbol.for("react.context"),xp=Symbol.for("react.forward_ref"),vp=Symbol.for("react.suspense"),yp=Symbol.for("react.memo"),bp=Symbol.for("react.lazy"),qc=Symbol.iterator;function wp(e){return e===null||typeof e!="object"?null:(e=qc&&e[qc]||e["@@iterator"],typeof e=="function"?e:null)}var Md={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Dd=Object.assign,zd={};function In(e,t,r){this.props=e,this.context=t,this.refs=zd,this.updater=r||Md}In.prototype.isReactComponent={};In.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};In.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function $d(){}$d.prototype=In.prototype;function Il(e,t,r){this.props=e,this.context=t,this.refs=zd,this.updater=r||Md}var Ll=Il.prototype=new $d;Ll.constructor=Il;Dd(Ll,In.prototype);Ll.isPureReactComponent=!0;var Wc=Array.isArray,Fd=Object.prototype.hasOwnProperty,Ml={current:null},Ud={key:!0,ref:!0,__self:!0,__source:!0};function Bd(e,t,r){var n,i={},a=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(a=""+t.key),t)Fd.call(t,n)&&!Ud.hasOwnProperty(n)&&(i[n]=t[n]);var c=arguments.length-2;if(c===1)i.children=r;else if(1<c){for(var l=Array(c),u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(n in c=e.defaultProps,c)i[n]===void 0&&(i[n]=c[n]);return{$$typeof:Ds,type:e,key:a,ref:o,props:i,_owner:Ml.current}}function jp(e,t){return{$$typeof:Ds,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Dl(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ds}function _p(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var Vc=/\/+/g;function $a(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_p(""+e.key):t.toString(36)}function wi(e,t,r,n,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Ds:case dp:o=!0}}if(o)return o=e,i=i(o),e=n===""?"."+$a(o,0):n,Wc(i)?(r="",e!=null&&(r=e.replace(Vc,"$&/")+"/"),wi(i,t,r,"",function(u){return u})):i!=null&&(Dl(i)&&(i=jp(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Vc,"$&/")+"/")+e)),t.push(i)),1;if(o=0,n=n===""?".":n+":",Wc(e))for(var c=0;c<e.length;c++){a=e[c];var l=n+$a(a,c);o+=wi(a,t,r,l,i)}else if(l=wp(e),typeof l=="function")for(e=l.call(e),c=0;!(a=e.next()).done;)a=a.value,l=n+$a(a,c++),o+=wi(a,t,r,l,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Ys(e,t,r){if(e==null)return e;var n=[],i=0;return wi(e,n,"","",function(a){return t.call(r,a,i++)}),n}function Np(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var Ke={current:null},ji={transition:null},kp={ReactCurrentDispatcher:Ke,ReactCurrentBatchConfig:ji,ReactCurrentOwner:Ml};function qd(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ys,forEach:function(e,t,r){Ys(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Ys(e,function(){t++}),t},toArray:function(e){return Ys(e,function(t){return t})||[]},only:function(e){if(!Dl(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};ne.Component=In;ne.Fragment=mp;ne.Profiler=fp;ne.PureComponent=Il;ne.StrictMode=hp;ne.Suspense=vp;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kp;ne.act=qd;ne.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=Dd({},e.props),i=e.key,a=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,o=Ml.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(l in t)Fd.call(t,l)&&!Ud.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&c!==void 0?c[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){c=Array(l);for(var u=0;u<l;u++)c[u]=arguments[u+2];n.children=c}return{$$typeof:Ds,type:e.type,key:i,ref:a,props:n,_owner:o}};ne.createContext=function(e){return e={$$typeof:gp,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:pp,_context:e},e.Consumer=e};ne.createElement=Bd;ne.createFactory=function(e){var t=Bd.bind(null,e);return t.type=e,t};ne.createRef=function(){return{current:null}};ne.forwardRef=function(e){return{$$typeof:xp,render:e}};ne.isValidElement=Dl;ne.lazy=function(e){return{$$typeof:bp,_payload:{_status:-1,_result:e},_init:Np}};ne.memo=function(e,t){return{$$typeof:yp,type:e,compare:t===void 0?null:t}};ne.startTransition=function(e){var t=ji.transition;ji.transition={};try{e()}finally{ji.transition=t}};ne.unstable_act=qd;ne.useCallback=function(e,t){return Ke.current.useCallback(e,t)};ne.useContext=function(e){return Ke.current.useContext(e)};ne.useDebugValue=function(){};ne.useDeferredValue=function(e){return Ke.current.useDeferredValue(e)};ne.useEffect=function(e,t){return Ke.current.useEffect(e,t)};ne.useId=function(){return Ke.current.useId()};ne.useImperativeHandle=function(e,t,r){return Ke.current.useImperativeHandle(e,t,r)};ne.useInsertionEffect=function(e,t){return Ke.current.useInsertionEffect(e,t)};ne.useLayoutEffect=function(e,t){return Ke.current.useLayoutEffect(e,t)};ne.useMemo=function(e,t){return Ke.current.useMemo(e,t)};ne.useReducer=function(e,t,r){return Ke.current.useReducer(e,t,r)};ne.useRef=function(e){return Ke.current.useRef(e)};ne.useState=function(e){return Ke.current.useState(e)};ne.useSyncExternalStore=function(e,t,r){return Ke.current.useSyncExternalStore(e,t,r)};ne.useTransition=function(){return Ke.current.useTransition()};ne.version="18.3.1";Ld.exports=ne;var y=Ld.exports;const ue=Od(y);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sp=y,Cp=Symbol.for("react.element"),Ep=Symbol.for("react.fragment"),Pp=Object.prototype.hasOwnProperty,Tp=Sp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ap={key:!0,ref:!0,__self:!0,__source:!0};function Wd(e,t,r){var n,i={},a=null,o=null;r!==void 0&&(a=""+r),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)Pp.call(t,n)&&!Ap.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:Cp,type:e,key:a,ref:o,props:i,_owner:Tp.current}}da.Fragment=Ep;da.jsx=Wd;da.jsxs=Wd;Id.exports=da;var s=Id.exports,Vd={exports:{}},ot={},Hd={exports:{}},Gd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(T,P){var L=T.length;T.push(P);e:for(;0<L;){var G=L-1>>>1,R=T[G];if(0<i(R,P))T[G]=P,T[L]=R,L=G;else break e}}function r(T){return T.length===0?null:T[0]}function n(T){if(T.length===0)return null;var P=T[0],L=T.pop();if(L!==P){T[0]=L;e:for(var G=0,R=T.length,H=R>>>1;G<H;){var U=2*(G+1)-1,Y=T[U],F=U+1,le=T[F];if(0>i(Y,L))F<R&&0>i(le,Y)?(T[G]=le,T[F]=L,G=F):(T[G]=Y,T[U]=L,G=U);else if(F<R&&0>i(le,L))T[G]=le,T[F]=L,G=F;else break e}}return P}function i(T,P){var L=T.sortIndex-P.sortIndex;return L!==0?L:T.id-P.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,c=o.now();e.unstable_now=function(){return o.now()-c}}var l=[],u=[],d=1,m=null,h=3,b=!1,j=!1,v=!1,w=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function f(T){for(var P=r(u);P!==null;){if(P.callback===null)n(u);else if(P.startTime<=T)n(u),P.sortIndex=P.expirationTime,t(l,P);else break;P=r(u)}}function x(T){if(v=!1,f(T),!j)if(r(l)!==null)j=!0,Ne(_);else{var P=r(u);P!==null&&W(x,P.startTime-T)}}function _(T,P){j=!1,v&&(v=!1,g(N),N=-1),b=!0;var L=h;try{for(f(P),m=r(l);m!==null&&(!(m.expirationTime>P)||T&&!$());){var G=m.callback;if(typeof G=="function"){m.callback=null,h=m.priorityLevel;var R=G(m.expirationTime<=P);P=e.unstable_now(),typeof R=="function"?m.callback=R:m===r(l)&&n(l),f(P)}else n(l);m=r(l)}if(m!==null)var H=!0;else{var U=r(u);U!==null&&W(x,U.startTime-P),H=!1}return H}finally{m=null,h=L,b=!1}}var C=!1,k=null,N=-1,S=5,A=-1;function $(){return!(e.unstable_now()-A<S)}function I(){if(k!==null){var T=e.unstable_now();A=T;var P=!0;try{P=k(!0,T)}finally{P?q():(C=!1,k=null)}}else C=!1}var q;if(typeof p=="function")q=function(){p(I)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,se=ee.port2;ee.port1.onmessage=I,q=function(){se.postMessage(null)}}else q=function(){w(I,0)};function Ne(T){k=T,C||(C=!0,q())}function W(T,P){N=w(function(){T(e.unstable_now())},P)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(T){T.callback=null},e.unstable_continueExecution=function(){j||b||(j=!0,Ne(_))},e.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<T?Math.floor(1e3/T):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(l)},e.unstable_next=function(T){switch(h){case 1:case 2:case 3:var P=3;break;default:P=h}var L=h;h=P;try{return T()}finally{h=L}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(T,P){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var L=h;h=T;try{return P()}finally{h=L}},e.unstable_scheduleCallback=function(T,P,L){var G=e.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?G+L:G):L=G,T){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=L+R,T={id:d++,callback:P,priorityLevel:T,startTime:L,expirationTime:R,sortIndex:-1},L>G?(T.sortIndex=L,t(u,T),r(l)===null&&T===r(u)&&(v?(g(N),N=-1):v=!0,W(x,L-G))):(T.sortIndex=R,t(l,T),j||b||(j=!0,Ne(_))),T},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(T){var P=h;return function(){var L=h;h=P;try{return T.apply(this,arguments)}finally{h=L}}}})(Gd);Hd.exports=Gd;var Rp=Hd.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Op=y,at=Rp;function M(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kd=new Set,gs={};function Vr(e,t){_n(e,t),_n(e+"Capture",t)}function _n(e,t){for(gs[e]=t,e=0;e<t.length;e++)Kd.add(t[e])}var Gt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ko=Object.prototype.hasOwnProperty,Ip=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hc={},Gc={};function Lp(e){return ko.call(Gc,e)?!0:ko.call(Hc,e)?!1:Ip.test(e)?Gc[e]=!0:(Hc[e]=!0,!1)}function Mp(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Dp(e,t,r,n){if(t===null||typeof t>"u"||Mp(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function Qe(e,t,r,n,i,a,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var ze={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ze[e]=new Qe(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ze[t]=new Qe(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ze[e]=new Qe(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ze[e]=new Qe(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ze[e]=new Qe(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ze[e]=new Qe(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ze[e]=new Qe(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ze[e]=new Qe(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ze[e]=new Qe(e,5,!1,e.toLowerCase(),null,!1,!1)});var zl=/[\-:]([a-z])/g;function $l(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(zl,$l);ze[t]=new Qe(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(zl,$l);ze[t]=new Qe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(zl,$l);ze[t]=new Qe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ze[e]=new Qe(e,1,!1,e.toLowerCase(),null,!1,!1)});ze.xlinkHref=new Qe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ze[e]=new Qe(e,1,!1,e.toLowerCase(),null,!0,!0)});function Fl(e,t,r,n){var i=ze.hasOwnProperty(t)?ze[t]:null;(i!==null?i.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Dp(t,r,i,n)&&(r=null),n||i===null?Lp(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):i.mustUseProperty?e[i.propertyName]=r===null?i.type===3?!1:"":r:(t=i.attributeName,n=i.attributeNamespace,r===null?e.removeAttribute(t):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var Zt=Op.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Xs=Symbol.for("react.element"),sn=Symbol.for("react.portal"),an=Symbol.for("react.fragment"),Ul=Symbol.for("react.strict_mode"),So=Symbol.for("react.profiler"),Qd=Symbol.for("react.provider"),Jd=Symbol.for("react.context"),Bl=Symbol.for("react.forward_ref"),Co=Symbol.for("react.suspense"),Eo=Symbol.for("react.suspense_list"),ql=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),Yd=Symbol.for("react.offscreen"),Kc=Symbol.iterator;function Un(e){return e===null||typeof e!="object"?null:(e=Kc&&e[Kc]||e["@@iterator"],typeof e=="function"?e:null)}var _e=Object.assign,Fa;function Zn(e){if(Fa===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Fa=t&&t[1]||""}return`
`+Fa+e}var Ua=!1;function Ba(e,t){if(!e||Ua)return"";Ua=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,c=a.length-1;1<=o&&0<=c&&i[o]!==a[c];)c--;for(;1<=o&&0<=c;o--,c--)if(i[o]!==a[c]){if(o!==1||c!==1)do if(o--,c--,0>c||i[o]!==a[c]){var l=`
`+i[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=c);break}}}finally{Ua=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Zn(e):""}function zp(e){switch(e.tag){case 5:return Zn(e.type);case 16:return Zn("Lazy");case 13:return Zn("Suspense");case 19:return Zn("SuspenseList");case 0:case 2:case 15:return e=Ba(e.type,!1),e;case 11:return e=Ba(e.type.render,!1),e;case 1:return e=Ba(e.type,!0),e;default:return""}}function Po(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case an:return"Fragment";case sn:return"Portal";case So:return"Profiler";case Ul:return"StrictMode";case Co:return"Suspense";case Eo:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Jd:return(e.displayName||"Context")+".Consumer";case Qd:return(e._context.displayName||"Context")+".Provider";case Bl:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case ql:return t=e.displayName||null,t!==null?t:Po(e.type)||"Memo";case sr:t=e._payload,e=e._init;try{return Po(e(t))}catch{}}return null}function $p(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Po(t);case 8:return t===Ul?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function wr(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Xd(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Fp(e){var t=Xd(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,a=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Zs(e){e._valueTracker||(e._valueTracker=Fp(e))}function Zd(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Xd(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Di(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function To(e,t){var r=t.checked;return _e({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Qc(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=wr(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function em(e,t){t=t.checked,t!=null&&Fl(e,"checked",t,!1)}function Ao(e,t){em(e,t);var r=wr(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Ro(e,t.type,r):t.hasOwnProperty("defaultValue")&&Ro(e,t.type,wr(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jc(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Ro(e,t,r){(t!=="number"||Di(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var es=Array.isArray;function xn(e,t,r,n){if(e=e.options,t){t={};for(var i=0;i<r.length;i++)t["$"+r[i]]=!0;for(r=0;r<e.length;r++)i=t.hasOwnProperty("$"+e[r].value),e[r].selected!==i&&(e[r].selected=i),i&&n&&(e[r].defaultSelected=!0)}else{for(r=""+wr(r),t=null,i=0;i<e.length;i++){if(e[i].value===r){e[i].selected=!0,n&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function Oo(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(M(91));return _e({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Yc(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(M(92));if(es(r)){if(1<r.length)throw Error(M(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:wr(r)}}function tm(e,t){var r=wr(t.value),n=wr(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Xc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function rm(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Io(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?rm(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var ei,nm=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,i){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(ei=ei||document.createElement("div"),ei.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ei.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function xs(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ss={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Up=["Webkit","ms","Moz","O"];Object.keys(ss).forEach(function(e){Up.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ss[t]=ss[e]})});function sm(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||ss.hasOwnProperty(e)&&ss[e]?(""+t).trim():t+"px"}function im(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=sm(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,i):e[r]=i}}var Bp=_e({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lo(e,t){if(t){if(Bp[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(M(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(M(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(M(61))}if(t.style!=null&&typeof t.style!="object")throw Error(M(62))}}function Mo(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Do=null;function Wl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zo=null,vn=null,yn=null;function Zc(e){if(e=Fs(e)){if(typeof zo!="function")throw Error(M(280));var t=e.stateNode;t&&(t=ga(t),zo(e.stateNode,e.type,t))}}function am(e){vn?yn?yn.push(e):yn=[e]:vn=e}function om(){if(vn){var e=vn,t=yn;if(yn=vn=null,Zc(e),t)for(e=0;e<t.length;e++)Zc(t[e])}}function lm(e,t){return e(t)}function cm(){}var qa=!1;function um(e,t,r){if(qa)return e(t,r);qa=!0;try{return lm(e,t,r)}finally{qa=!1,(vn!==null||yn!==null)&&(cm(),om())}}function vs(e,t){var r=e.stateNode;if(r===null)return null;var n=ga(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(M(231,t,typeof r));return r}var $o=!1;if(Gt)try{var Bn={};Object.defineProperty(Bn,"passive",{get:function(){$o=!0}}),window.addEventListener("test",Bn,Bn),window.removeEventListener("test",Bn,Bn)}catch{$o=!1}function qp(e,t,r,n,i,a,o,c,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var is=!1,zi=null,$i=!1,Fo=null,Wp={onError:function(e){is=!0,zi=e}};function Vp(e,t,r,n,i,a,o,c,l){is=!1,zi=null,qp.apply(Wp,arguments)}function Hp(e,t,r,n,i,a,o,c,l){if(Vp.apply(this,arguments),is){if(is){var u=zi;is=!1,zi=null}else throw Error(M(198));$i||($i=!0,Fo=u)}}function Hr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function dm(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function eu(e){if(Hr(e)!==e)throw Error(M(188))}function Gp(e){var t=e.alternate;if(!t){if(t=Hr(e),t===null)throw Error(M(188));return t!==e?null:e}for(var r=e,n=t;;){var i=r.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===r)return eu(i),e;if(a===n)return eu(i),t;a=a.sibling}throw Error(M(188))}if(r.return!==n.return)r=i,n=a;else{for(var o=!1,c=i.child;c;){if(c===r){o=!0,r=i,n=a;break}if(c===n){o=!0,n=i,r=a;break}c=c.sibling}if(!o){for(c=a.child;c;){if(c===r){o=!0,r=a,n=i;break}if(c===n){o=!0,n=a,r=i;break}c=c.sibling}if(!o)throw Error(M(189))}}if(r.alternate!==n)throw Error(M(190))}if(r.tag!==3)throw Error(M(188));return r.stateNode.current===r?e:t}function mm(e){return e=Gp(e),e!==null?hm(e):null}function hm(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=hm(e);if(t!==null)return t;e=e.sibling}return null}var fm=at.unstable_scheduleCallback,tu=at.unstable_cancelCallback,Kp=at.unstable_shouldYield,Qp=at.unstable_requestPaint,Se=at.unstable_now,Jp=at.unstable_getCurrentPriorityLevel,Vl=at.unstable_ImmediatePriority,pm=at.unstable_UserBlockingPriority,Fi=at.unstable_NormalPriority,Yp=at.unstable_LowPriority,gm=at.unstable_IdlePriority,ma=null,Lt=null;function Xp(e){if(Lt&&typeof Lt.onCommitFiberRoot=="function")try{Lt.onCommitFiberRoot(ma,e,void 0,(e.current.flags&128)===128)}catch{}}var kt=Math.clz32?Math.clz32:tg,Zp=Math.log,eg=Math.LN2;function tg(e){return e>>>=0,e===0?32:31-(Zp(e)/eg|0)|0}var ti=64,ri=4194304;function ts(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ui(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,i=e.suspendedLanes,a=e.pingedLanes,o=r&268435455;if(o!==0){var c=o&~i;c!==0?n=ts(c):(a&=o,a!==0&&(n=ts(a)))}else o=r&~i,o!==0?n=ts(o):a!==0&&(n=ts(a));if(n===0)return 0;if(t!==0&&t!==n&&!(t&i)&&(i=n&-n,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-kt(t),i=1<<r,n|=e[r],t&=~i;return n}function rg(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ng(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-kt(a),c=1<<o,l=i[o];l===-1?(!(c&r)||c&n)&&(i[o]=rg(c,t)):l<=t&&(e.expiredLanes|=c),a&=~c}}function Uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xm(){var e=ti;return ti<<=1,!(ti&4194240)&&(ti=64),e}function Wa(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function zs(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kt(t),e[t]=r}function sg(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var i=31-kt(r),a=1<<i;t[i]=0,n[i]=-1,e[i]=-1,r&=~a}}function Hl(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-kt(r),i=1<<n;i&t|e[n]&t&&(e[n]|=t),r&=~i}}var oe=0;function vm(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var ym,Gl,bm,wm,jm,Bo=!1,ni=[],dr=null,mr=null,hr=null,ys=new Map,bs=new Map,ar=[],ig="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ru(e,t){switch(e){case"focusin":case"focusout":dr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":ys.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bs.delete(t.pointerId)}}function qn(e,t,r,n,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},t!==null&&(t=Fs(t),t!==null&&Gl(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function ag(e,t,r,n,i){switch(t){case"focusin":return dr=qn(dr,e,t,r,n,i),!0;case"dragenter":return mr=qn(mr,e,t,r,n,i),!0;case"mouseover":return hr=qn(hr,e,t,r,n,i),!0;case"pointerover":var a=i.pointerId;return ys.set(a,qn(ys.get(a)||null,e,t,r,n,i)),!0;case"gotpointercapture":return a=i.pointerId,bs.set(a,qn(bs.get(a)||null,e,t,r,n,i)),!0}return!1}function _m(e){var t=Ir(e.target);if(t!==null){var r=Hr(t);if(r!==null){if(t=r.tag,t===13){if(t=dm(r),t!==null){e.blockedOn=t,jm(e.priority,function(){bm(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function _i(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=qo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Do=n,r.target.dispatchEvent(n),Do=null}else return t=Fs(r),t!==null&&Gl(t),e.blockedOn=r,!1;t.shift()}return!0}function nu(e,t,r){_i(e)&&r.delete(t)}function og(){Bo=!1,dr!==null&&_i(dr)&&(dr=null),mr!==null&&_i(mr)&&(mr=null),hr!==null&&_i(hr)&&(hr=null),ys.forEach(nu),bs.forEach(nu)}function Wn(e,t){e.blockedOn===t&&(e.blockedOn=null,Bo||(Bo=!0,at.unstable_scheduleCallback(at.unstable_NormalPriority,og)))}function ws(e){function t(i){return Wn(i,e)}if(0<ni.length){Wn(ni[0],e);for(var r=1;r<ni.length;r++){var n=ni[r];n.blockedOn===e&&(n.blockedOn=null)}}for(dr!==null&&Wn(dr,e),mr!==null&&Wn(mr,e),hr!==null&&Wn(hr,e),ys.forEach(t),bs.forEach(t),r=0;r<ar.length;r++)n=ar[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<ar.length&&(r=ar[0],r.blockedOn===null);)_m(r),r.blockedOn===null&&ar.shift()}var bn=Zt.ReactCurrentBatchConfig,Bi=!0;function lg(e,t,r,n){var i=oe,a=bn.transition;bn.transition=null;try{oe=1,Kl(e,t,r,n)}finally{oe=i,bn.transition=a}}function cg(e,t,r,n){var i=oe,a=bn.transition;bn.transition=null;try{oe=4,Kl(e,t,r,n)}finally{oe=i,bn.transition=a}}function Kl(e,t,r,n){if(Bi){var i=qo(e,t,r,n);if(i===null)eo(e,t,n,qi,r),ru(e,n);else if(ag(i,e,t,r,n))n.stopPropagation();else if(ru(e,n),t&4&&-1<ig.indexOf(e)){for(;i!==null;){var a=Fs(i);if(a!==null&&ym(a),a=qo(e,t,r,n),a===null&&eo(e,t,n,qi,r),a===i)break;i=a}i!==null&&n.stopPropagation()}else eo(e,t,n,null,r)}}var qi=null;function qo(e,t,r,n){if(qi=null,e=Wl(n),e=Ir(e),e!==null)if(t=Hr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=dm(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return qi=e,null}function Nm(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Jp()){case Vl:return 1;case pm:return 4;case Fi:case Yp:return 16;case gm:return 536870912;default:return 16}default:return 16}}var cr=null,Ql=null,Ni=null;function km(){if(Ni)return Ni;var e,t=Ql,r=t.length,n,i="value"in cr?cr.value:cr.textContent,a=i.length;for(e=0;e<r&&t[e]===i[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===i[a-n];n++);return Ni=i.slice(e,1<n?1-n:void 0)}function ki(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function si(){return!0}function su(){return!1}function lt(e){function t(r,n,i,a,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var c in e)e.hasOwnProperty(c)&&(r=e[c],this[c]=r?r(a):a[c]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?si:su,this.isPropagationStopped=su,this}return _e(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=si)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=si)},persist:function(){},isPersistent:si}),t}var Ln={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Jl=lt(Ln),$s=_e({},Ln,{view:0,detail:0}),ug=lt($s),Va,Ha,Vn,ha=_e({},$s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Vn&&(Vn&&e.type==="mousemove"?(Va=e.screenX-Vn.screenX,Ha=e.screenY-Vn.screenY):Ha=Va=0,Vn=e),Va)},movementY:function(e){return"movementY"in e?e.movementY:Ha}}),iu=lt(ha),dg=_e({},ha,{dataTransfer:0}),mg=lt(dg),hg=_e({},$s,{relatedTarget:0}),Ga=lt(hg),fg=_e({},Ln,{animationName:0,elapsedTime:0,pseudoElement:0}),pg=lt(fg),gg=_e({},Ln,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xg=lt(gg),vg=_e({},Ln,{data:0}),au=lt(vg),yg={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},bg={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wg={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jg(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=wg[e])?!!t[e]:!1}function Yl(){return jg}var _g=_e({},$s,{key:function(e){if(e.key){var t=yg[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ki(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?bg[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(e){return e.type==="keypress"?ki(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ki(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Ng=lt(_g),kg=_e({},ha,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ou=lt(kg),Sg=_e({},$s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),Cg=lt(Sg),Eg=_e({},Ln,{propertyName:0,elapsedTime:0,pseudoElement:0}),Pg=lt(Eg),Tg=_e({},ha,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ag=lt(Tg),Rg=[9,13,27,32],Xl=Gt&&"CompositionEvent"in window,as=null;Gt&&"documentMode"in document&&(as=document.documentMode);var Og=Gt&&"TextEvent"in window&&!as,Sm=Gt&&(!Xl||as&&8<as&&11>=as),lu=" ",cu=!1;function Cm(e,t){switch(e){case"keyup":return Rg.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Em(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var on=!1;function Ig(e,t){switch(e){case"compositionend":return Em(t);case"keypress":return t.which!==32?null:(cu=!0,lu);case"textInput":return e=t.data,e===lu&&cu?null:e;default:return null}}function Lg(e,t){if(on)return e==="compositionend"||!Xl&&Cm(e,t)?(e=km(),Ni=Ql=cr=null,on=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Sm&&t.locale!=="ko"?null:t.data;default:return null}}var Mg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mg[e.type]:t==="textarea"}function Pm(e,t,r,n){am(n),t=Wi(t,"onChange"),0<t.length&&(r=new Jl("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var os=null,js=null;function Dg(e){Fm(e,0)}function fa(e){var t=un(e);if(Zd(t))return e}function zg(e,t){if(e==="change")return t}var Tm=!1;if(Gt){var Ka;if(Gt){var Qa="oninput"in document;if(!Qa){var du=document.createElement("div");du.setAttribute("oninput","return;"),Qa=typeof du.oninput=="function"}Ka=Qa}else Ka=!1;Tm=Ka&&(!document.documentMode||9<document.documentMode)}function mu(){os&&(os.detachEvent("onpropertychange",Am),js=os=null)}function Am(e){if(e.propertyName==="value"&&fa(js)){var t=[];Pm(t,js,e,Wl(e)),um(Dg,t)}}function $g(e,t,r){e==="focusin"?(mu(),os=t,js=r,os.attachEvent("onpropertychange",Am)):e==="focusout"&&mu()}function Fg(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return fa(js)}function Ug(e,t){if(e==="click")return fa(t)}function Bg(e,t){if(e==="input"||e==="change")return fa(t)}function qg(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Et=typeof Object.is=="function"?Object.is:qg;function _s(e,t){if(Et(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!ko.call(t,i)||!Et(e[i],t[i]))return!1}return!0}function hu(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function fu(e,t){var r=hu(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=hu(r)}}function Rm(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rm(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Om(){for(var e=window,t=Di();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Di(e.document)}return t}function Zl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Wg(e){var t=Om(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Rm(r.ownerDocument.documentElement,r)){if(n!==null&&Zl(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=r.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!e.extend&&a>n&&(i=n,n=a,a=i),i=fu(r,a);var o=fu(r,n);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Vg=Gt&&"documentMode"in document&&11>=document.documentMode,ln=null,Wo=null,ls=null,Vo=!1;function pu(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Vo||ln==null||ln!==Di(n)||(n=ln,"selectionStart"in n&&Zl(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ls&&_s(ls,n)||(ls=n,n=Wi(Wo,"onSelect"),0<n.length&&(t=new Jl("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ln)))}function ii(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var cn={animationend:ii("Animation","AnimationEnd"),animationiteration:ii("Animation","AnimationIteration"),animationstart:ii("Animation","AnimationStart"),transitionend:ii("Transition","TransitionEnd")},Ja={},Im={};Gt&&(Im=document.createElement("div").style,"AnimationEvent"in window||(delete cn.animationend.animation,delete cn.animationiteration.animation,delete cn.animationstart.animation),"TransitionEvent"in window||delete cn.transitionend.transition);function pa(e){if(Ja[e])return Ja[e];if(!cn[e])return e;var t=cn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Im)return Ja[e]=t[r];return e}var Lm=pa("animationend"),Mm=pa("animationiteration"),Dm=pa("animationstart"),zm=pa("transitionend"),$m=new Map,gu="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){$m.set(e,t),Vr(t,[e])}for(var Ya=0;Ya<gu.length;Ya++){var Xa=gu[Ya],Hg=Xa.toLowerCase(),Gg=Xa[0].toUpperCase()+Xa.slice(1);Nr(Hg,"on"+Gg)}Nr(Lm,"onAnimationEnd");Nr(Mm,"onAnimationIteration");Nr(Dm,"onAnimationStart");Nr("dblclick","onDoubleClick");Nr("focusin","onFocus");Nr("focusout","onBlur");Nr(zm,"onTransitionEnd");_n("onMouseEnter",["mouseout","mouseover"]);_n("onMouseLeave",["mouseout","mouseover"]);_n("onPointerEnter",["pointerout","pointerover"]);_n("onPointerLeave",["pointerout","pointerover"]);Vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Vr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Kg=new Set("cancel close invalid load scroll toggle".split(" ").concat(rs));function xu(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,Hp(n,t,void 0,e),e.currentTarget=null}function Fm(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],i=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var o=n.length-1;0<=o;o--){var c=n[o],l=c.instance,u=c.currentTarget;if(c=c.listener,l!==a&&i.isPropagationStopped())break e;xu(i,c,u),a=l}else for(o=0;o<n.length;o++){if(c=n[o],l=c.instance,u=c.currentTarget,c=c.listener,l!==a&&i.isPropagationStopped())break e;xu(i,c,u),a=l}}}if($i)throw e=Fo,$i=!1,Fo=null,e}function pe(e,t){var r=t[Jo];r===void 0&&(r=t[Jo]=new Set);var n=e+"__bubble";r.has(n)||(Um(t,e,2,!1),r.add(n))}function Za(e,t,r){var n=0;t&&(n|=4),Um(r,e,n,t)}var ai="_reactListening"+Math.random().toString(36).slice(2);function Ns(e){if(!e[ai]){e[ai]=!0,Kd.forEach(function(r){r!=="selectionchange"&&(Kg.has(r)||Za(r,!1,e),Za(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ai]||(t[ai]=!0,Za("selectionchange",!1,t))}}function Um(e,t,r,n){switch(Nm(t)){case 1:var i=lg;break;case 4:i=cg;break;default:i=Kl}r=i.bind(null,t,r,e),i=void 0,!$o||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),n?i!==void 0?e.addEventListener(t,r,{capture:!0,passive:i}):e.addEventListener(t,r,!0):i!==void 0?e.addEventListener(t,r,{passive:i}):e.addEventListener(t,r,!1)}function eo(e,t,r,n,i){var a=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var c=n.stateNode.containerInfo;if(c===i||c.nodeType===8&&c.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;c!==null;){if(o=Ir(c),o===null)return;if(l=o.tag,l===5||l===6){n=a=o;continue e}c=c.parentNode}}n=n.return}um(function(){var u=a,d=Wl(r),m=[];e:{var h=$m.get(e);if(h!==void 0){var b=Jl,j=e;switch(e){case"keypress":if(ki(r)===0)break e;case"keydown":case"keyup":b=Ng;break;case"focusin":j="focus",b=Ga;break;case"focusout":j="blur",b=Ga;break;case"beforeblur":case"afterblur":b=Ga;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":b=iu;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":b=mg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":b=Cg;break;case Lm:case Mm:case Dm:b=pg;break;case zm:b=Pg;break;case"scroll":b=ug;break;case"wheel":b=Ag;break;case"copy":case"cut":case"paste":b=xg;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":b=ou}var v=(t&4)!==0,w=!v&&e==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var p=u,f;p!==null;){f=p;var x=f.stateNode;if(f.tag===5&&x!==null&&(f=x,g!==null&&(x=vs(p,g),x!=null&&v.push(ks(p,x,f)))),w)break;p=p.return}0<v.length&&(h=new b(h,j,null,r,d),m.push({event:h,listeners:v}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",b=e==="mouseout"||e==="pointerout",h&&r!==Do&&(j=r.relatedTarget||r.fromElement)&&(Ir(j)||j[Kt]))break e;if((b||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,b?(j=r.relatedTarget||r.toElement,b=u,j=j?Ir(j):null,j!==null&&(w=Hr(j),j!==w||j.tag!==5&&j.tag!==6)&&(j=null)):(b=null,j=u),b!==j)){if(v=iu,x="onMouseLeave",g="onMouseEnter",p="mouse",(e==="pointerout"||e==="pointerover")&&(v=ou,x="onPointerLeave",g="onPointerEnter",p="pointer"),w=b==null?h:un(b),f=j==null?h:un(j),h=new v(x,p+"leave",b,r,d),h.target=w,h.relatedTarget=f,x=null,Ir(d)===u&&(v=new v(g,p+"enter",j,r,d),v.target=f,v.relatedTarget=w,x=v),w=x,b&&j)t:{for(v=b,g=j,p=0,f=v;f;f=Jr(f))p++;for(f=0,x=g;x;x=Jr(x))f++;for(;0<p-f;)v=Jr(v),p--;for(;0<f-p;)g=Jr(g),f--;for(;p--;){if(v===g||g!==null&&v===g.alternate)break t;v=Jr(v),g=Jr(g)}v=null}else v=null;b!==null&&vu(m,h,b,v,!1),j!==null&&w!==null&&vu(m,w,j,v,!0)}}e:{if(h=u?un(u):window,b=h.nodeName&&h.nodeName.toLowerCase(),b==="select"||b==="input"&&h.type==="file")var _=zg;else if(uu(h))if(Tm)_=Bg;else{_=Fg;var C=$g}else(b=h.nodeName)&&b.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=Ug);if(_&&(_=_(e,u))){Pm(m,_,r,d);break e}C&&C(e,h,u),e==="focusout"&&(C=h._wrapperState)&&C.controlled&&h.type==="number"&&Ro(h,"number",h.value)}switch(C=u?un(u):window,e){case"focusin":(uu(C)||C.contentEditable==="true")&&(ln=C,Wo=u,ls=null);break;case"focusout":ls=Wo=ln=null;break;case"mousedown":Vo=!0;break;case"contextmenu":case"mouseup":case"dragend":Vo=!1,pu(m,r,d);break;case"selectionchange":if(Vg)break;case"keydown":case"keyup":pu(m,r,d)}var k;if(Xl)e:{switch(e){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else on?Cm(e,r)&&(N="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(N="onCompositionStart");N&&(Sm&&r.locale!=="ko"&&(on||N!=="onCompositionStart"?N==="onCompositionEnd"&&on&&(k=km()):(cr=d,Ql="value"in cr?cr.value:cr.textContent,on=!0)),C=Wi(u,N),0<C.length&&(N=new au(N,e,null,r,d),m.push({event:N,listeners:C}),k?N.data=k:(k=Em(r),k!==null&&(N.data=k)))),(k=Og?Ig(e,r):Lg(e,r))&&(u=Wi(u,"onBeforeInput"),0<u.length&&(d=new au("onBeforeInput","beforeinput",null,r,d),m.push({event:d,listeners:u}),d.data=k))}Fm(m,t)})}function ks(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Wi(e,t){for(var r=t+"Capture",n=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=vs(e,r),a!=null&&n.unshift(ks(e,a,i)),a=vs(e,t),a!=null&&n.push(ks(e,a,i))),e=e.return}return n}function Jr(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function vu(e,t,r,n,i){for(var a=t._reactName,o=[];r!==null&&r!==n;){var c=r,l=c.alternate,u=c.stateNode;if(l!==null&&l===n)break;c.tag===5&&u!==null&&(c=u,i?(l=vs(r,a),l!=null&&o.unshift(ks(r,l,c))):i||(l=vs(r,a),l!=null&&o.push(ks(r,l,c)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var Qg=/\r\n?/g,Jg=/\u0000|\uFFFD/g;function yu(e){return(typeof e=="string"?e:""+e).replace(Qg,`
`).replace(Jg,"")}function oi(e,t,r){if(t=yu(t),yu(e)!==t&&r)throw Error(M(425))}function Vi(){}var Ho=null,Go=null;function Ko(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Qo=typeof setTimeout=="function"?setTimeout:void 0,Yg=typeof clearTimeout=="function"?clearTimeout:void 0,bu=typeof Promise=="function"?Promise:void 0,Xg=typeof queueMicrotask=="function"?queueMicrotask:typeof bu<"u"?function(e){return bu.resolve(null).then(e).catch(Zg)}:Qo;function Zg(e){setTimeout(function(){throw e})}function to(e,t){var r=t,n=0;do{var i=r.nextSibling;if(e.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){e.removeChild(i),ws(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);ws(t)}function fr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function wu(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Mn=Math.random().toString(36).slice(2),It="__reactFiber$"+Mn,Ss="__reactProps$"+Mn,Kt="__reactContainer$"+Mn,Jo="__reactEvents$"+Mn,ex="__reactListeners$"+Mn,tx="__reactHandles$"+Mn;function Ir(e){var t=e[It];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Kt]||r[It]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=wu(e);e!==null;){if(r=e[It])return r;e=wu(e)}return t}e=r,r=e.parentNode}return null}function Fs(e){return e=e[It]||e[Kt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function un(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(M(33))}function ga(e){return e[Ss]||null}var Yo=[],dn=-1;function kr(e){return{current:e}}function xe(e){0>dn||(e.current=Yo[dn],Yo[dn]=null,dn--)}function he(e,t){dn++,Yo[dn]=e.current,e.current=t}var jr={},qe=kr(jr),Ze=kr(!1),$r=jr;function Nn(e,t){var r=e.type.contextTypes;if(!r)return jr;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in r)i[a]=t[a];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function et(e){return e=e.childContextTypes,e!=null}function Hi(){xe(Ze),xe(qe)}function ju(e,t,r){if(qe.current!==jr)throw Error(M(168));he(qe,t),he(Ze,r)}function Bm(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in t))throw Error(M(108,$p(e)||"Unknown",i));return _e({},r,n)}function Gi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||jr,$r=qe.current,he(qe,e),he(Ze,Ze.current),!0}function _u(e,t,r){var n=e.stateNode;if(!n)throw Error(M(169));r?(e=Bm(e,t,$r),n.__reactInternalMemoizedMergedChildContext=e,xe(Ze),xe(qe),he(qe,e)):xe(Ze),he(Ze,r)}var Bt=null,xa=!1,ro=!1;function qm(e){Bt===null?Bt=[e]:Bt.push(e)}function rx(e){xa=!0,qm(e)}function Sr(){if(!ro&&Bt!==null){ro=!0;var e=0,t=oe;try{var r=Bt;for(oe=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Bt=null,xa=!1}catch(i){throw Bt!==null&&(Bt=Bt.slice(e+1)),fm(Vl,Sr),i}finally{oe=t,ro=!1}}return null}var mn=[],hn=0,Ki=null,Qi=0,ut=[],dt=0,Fr=null,qt=1,Wt="";function Tr(e,t){mn[hn++]=Qi,mn[hn++]=Ki,Ki=e,Qi=t}function Wm(e,t,r){ut[dt++]=qt,ut[dt++]=Wt,ut[dt++]=Fr,Fr=e;var n=qt;e=Wt;var i=32-kt(n)-1;n&=~(1<<i),r+=1;var a=32-kt(t)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,qt=1<<32-kt(t)+i|r<<i|n,Wt=a+e}else qt=1<<a|r<<i|n,Wt=e}function ec(e){e.return!==null&&(Tr(e,1),Wm(e,1,0))}function tc(e){for(;e===Ki;)Ki=mn[--hn],mn[hn]=null,Qi=mn[--hn],mn[hn]=null;for(;e===Fr;)Fr=ut[--dt],ut[dt]=null,Wt=ut[--dt],ut[dt]=null,qt=ut[--dt],ut[dt]=null}var it=null,st=null,ve=!1,Nt=null;function Vm(e,t){var r=mt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Nu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,it=e,st=fr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,it=e,st=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Fr!==null?{id:qt,overflow:Wt}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=mt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,it=e,st=null,!0):!1;default:return!1}}function Xo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Zo(e){if(ve){var t=st;if(t){var r=t;if(!Nu(e,t)){if(Xo(e))throw Error(M(418));t=fr(r.nextSibling);var n=it;t&&Nu(e,t)?Vm(n,r):(e.flags=e.flags&-4097|2,ve=!1,it=e)}}else{if(Xo(e))throw Error(M(418));e.flags=e.flags&-4097|2,ve=!1,it=e}}}function ku(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;it=e}function li(e){if(e!==it)return!1;if(!ve)return ku(e),ve=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ko(e.type,e.memoizedProps)),t&&(t=st)){if(Xo(e))throw Hm(),Error(M(418));for(;t;)Vm(e,t),t=fr(t.nextSibling)}if(ku(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(M(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){st=fr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}st=null}}else st=it?fr(e.stateNode.nextSibling):null;return!0}function Hm(){for(var e=st;e;)e=fr(e.nextSibling)}function kn(){st=it=null,ve=!1}function rc(e){Nt===null?Nt=[e]:Nt.push(e)}var nx=Zt.ReactCurrentBatchConfig;function Hn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(M(309));var n=r.stateNode}if(!n)throw Error(M(147,e));var i=n,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(o){var c=i.refs;o===null?delete c[a]:c[a]=o},t._stringRef=a,t)}if(typeof e!="string")throw Error(M(284));if(!r._owner)throw Error(M(290,e))}return e}function ci(e,t){throw e=Object.prototype.toString.call(t),Error(M(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Su(e){var t=e._init;return t(e._payload)}function Gm(e){function t(g,p){if(e){var f=g.deletions;f===null?(g.deletions=[p],g.flags|=16):f.push(p)}}function r(g,p){if(!e)return null;for(;p!==null;)t(g,p),p=p.sibling;return null}function n(g,p){for(g=new Map;p!==null;)p.key!==null?g.set(p.key,p):g.set(p.index,p),p=p.sibling;return g}function i(g,p){return g=vr(g,p),g.index=0,g.sibling=null,g}function a(g,p,f){return g.index=f,e?(f=g.alternate,f!==null?(f=f.index,f<p?(g.flags|=2,p):f):(g.flags|=2,p)):(g.flags|=1048576,p)}function o(g){return e&&g.alternate===null&&(g.flags|=2),g}function c(g,p,f,x){return p===null||p.tag!==6?(p=co(f,g.mode,x),p.return=g,p):(p=i(p,f),p.return=g,p)}function l(g,p,f,x){var _=f.type;return _===an?d(g,p,f.props.children,x,f.key):p!==null&&(p.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===sr&&Su(_)===p.type)?(x=i(p,f.props),x.ref=Hn(g,p,f),x.return=g,x):(x=Ri(f.type,f.key,f.props,null,g.mode,x),x.ref=Hn(g,p,f),x.return=g,x)}function u(g,p,f,x){return p===null||p.tag!==4||p.stateNode.containerInfo!==f.containerInfo||p.stateNode.implementation!==f.implementation?(p=uo(f,g.mode,x),p.return=g,p):(p=i(p,f.children||[]),p.return=g,p)}function d(g,p,f,x,_){return p===null||p.tag!==7?(p=zr(f,g.mode,x,_),p.return=g,p):(p=i(p,f),p.return=g,p)}function m(g,p,f){if(typeof p=="string"&&p!==""||typeof p=="number")return p=co(""+p,g.mode,f),p.return=g,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case Xs:return f=Ri(p.type,p.key,p.props,null,g.mode,f),f.ref=Hn(g,null,p),f.return=g,f;case sn:return p=uo(p,g.mode,f),p.return=g,p;case sr:var x=p._init;return m(g,x(p._payload),f)}if(es(p)||Un(p))return p=zr(p,g.mode,f,null),p.return=g,p;ci(g,p)}return null}function h(g,p,f,x){var _=p!==null?p.key:null;if(typeof f=="string"&&f!==""||typeof f=="number")return _!==null?null:c(g,p,""+f,x);if(typeof f=="object"&&f!==null){switch(f.$$typeof){case Xs:return f.key===_?l(g,p,f,x):null;case sn:return f.key===_?u(g,p,f,x):null;case sr:return _=f._init,h(g,p,_(f._payload),x)}if(es(f)||Un(f))return _!==null?null:d(g,p,f,x,null);ci(g,f)}return null}function b(g,p,f,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(f)||null,c(p,g,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Xs:return g=g.get(x.key===null?f:x.key)||null,l(p,g,x,_);case sn:return g=g.get(x.key===null?f:x.key)||null,u(p,g,x,_);case sr:var C=x._init;return b(g,p,f,C(x._payload),_)}if(es(x)||Un(x))return g=g.get(f)||null,d(p,g,x,_,null);ci(p,x)}return null}function j(g,p,f,x){for(var _=null,C=null,k=p,N=p=0,S=null;k!==null&&N<f.length;N++){k.index>N?(S=k,k=null):S=k.sibling;var A=h(g,k,f[N],x);if(A===null){k===null&&(k=S);break}e&&k&&A.alternate===null&&t(g,k),p=a(A,p,N),C===null?_=A:C.sibling=A,C=A,k=S}if(N===f.length)return r(g,k),ve&&Tr(g,N),_;if(k===null){for(;N<f.length;N++)k=m(g,f[N],x),k!==null&&(p=a(k,p,N),C===null?_=k:C.sibling=k,C=k);return ve&&Tr(g,N),_}for(k=n(g,k);N<f.length;N++)S=b(k,g,N,f[N],x),S!==null&&(e&&S.alternate!==null&&k.delete(S.key===null?N:S.key),p=a(S,p,N),C===null?_=S:C.sibling=S,C=S);return e&&k.forEach(function($){return t(g,$)}),ve&&Tr(g,N),_}function v(g,p,f,x){var _=Un(f);if(typeof _!="function")throw Error(M(150));if(f=_.call(f),f==null)throw Error(M(151));for(var C=_=null,k=p,N=p=0,S=null,A=f.next();k!==null&&!A.done;N++,A=f.next()){k.index>N?(S=k,k=null):S=k.sibling;var $=h(g,k,A.value,x);if($===null){k===null&&(k=S);break}e&&k&&$.alternate===null&&t(g,k),p=a($,p,N),C===null?_=$:C.sibling=$,C=$,k=S}if(A.done)return r(g,k),ve&&Tr(g,N),_;if(k===null){for(;!A.done;N++,A=f.next())A=m(g,A.value,x),A!==null&&(p=a(A,p,N),C===null?_=A:C.sibling=A,C=A);return ve&&Tr(g,N),_}for(k=n(g,k);!A.done;N++,A=f.next())A=b(k,g,N,A.value,x),A!==null&&(e&&A.alternate!==null&&k.delete(A.key===null?N:A.key),p=a(A,p,N),C===null?_=A:C.sibling=A,C=A);return e&&k.forEach(function(I){return t(g,I)}),ve&&Tr(g,N),_}function w(g,p,f,x){if(typeof f=="object"&&f!==null&&f.type===an&&f.key===null&&(f=f.props.children),typeof f=="object"&&f!==null){switch(f.$$typeof){case Xs:e:{for(var _=f.key,C=p;C!==null;){if(C.key===_){if(_=f.type,_===an){if(C.tag===7){r(g,C.sibling),p=i(C,f.props.children),p.return=g,g=p;break e}}else if(C.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===sr&&Su(_)===C.type){r(g,C.sibling),p=i(C,f.props),p.ref=Hn(g,C,f),p.return=g,g=p;break e}r(g,C);break}else t(g,C);C=C.sibling}f.type===an?(p=zr(f.props.children,g.mode,x,f.key),p.return=g,g=p):(x=Ri(f.type,f.key,f.props,null,g.mode,x),x.ref=Hn(g,p,f),x.return=g,g=x)}return o(g);case sn:e:{for(C=f.key;p!==null;){if(p.key===C)if(p.tag===4&&p.stateNode.containerInfo===f.containerInfo&&p.stateNode.implementation===f.implementation){r(g,p.sibling),p=i(p,f.children||[]),p.return=g,g=p;break e}else{r(g,p);break}else t(g,p);p=p.sibling}p=uo(f,g.mode,x),p.return=g,g=p}return o(g);case sr:return C=f._init,w(g,p,C(f._payload),x)}if(es(f))return j(g,p,f,x);if(Un(f))return v(g,p,f,x);ci(g,f)}return typeof f=="string"&&f!==""||typeof f=="number"?(f=""+f,p!==null&&p.tag===6?(r(g,p.sibling),p=i(p,f),p.return=g,g=p):(r(g,p),p=co(f,g.mode,x),p.return=g,g=p),o(g)):r(g,p)}return w}var Sn=Gm(!0),Km=Gm(!1),Ji=kr(null),Yi=null,fn=null,nc=null;function sc(){nc=fn=Yi=null}function ic(e){var t=Ji.current;xe(Ji),e._currentValue=t}function el(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function wn(e,t){Yi=e,nc=fn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Xe=!0),e.firstContext=null)}function gt(e){var t=e._currentValue;if(nc!==e)if(e={context:e,memoizedValue:t,next:null},fn===null){if(Yi===null)throw Error(M(308));fn=e,Yi.dependencies={lanes:0,firstContext:e}}else fn=fn.next=e;return t}var Lr=null;function ac(e){Lr===null?Lr=[e]:Lr.push(e)}function Qm(e,t,r,n){var i=t.interleaved;return i===null?(r.next=r,ac(t)):(r.next=i.next,i.next=r),t.interleaved=r,Qt(e,n)}function Qt(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var ir=!1;function oc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jm(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vt(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function pr(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,ie&2){var i=n.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),n.pending=t,Qt(e,r)}return i=n.interleaved,i===null?(t.next=t,ac(n)):(t.next=i.next,i.next=t),n.interleaved=t,Qt(e,r)}function Si(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Hl(e,r)}}function Cu(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,a=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};a===null?i=a=o:a=a.next=o,r=r.next}while(r!==null);a===null?i=a=t:a=a.next=t}else i=a=t;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Xi(e,t,r,n){var i=e.updateQueue;ir=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,c=i.shared.pending;if(c!==null){i.shared.pending=null;var l=c,u=l.next;l.next=null,o===null?a=u:o.next=u,o=l;var d=e.alternate;d!==null&&(d=d.updateQueue,c=d.lastBaseUpdate,c!==o&&(c===null?d.firstBaseUpdate=u:c.next=u,d.lastBaseUpdate=l))}if(a!==null){var m=i.baseState;o=0,d=u=l=null,c=a;do{var h=c.lane,b=c.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:b,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var j=e,v=c;switch(h=t,b=r,v.tag){case 1:if(j=v.payload,typeof j=="function"){m=j.call(b,m,h);break e}m=j;break e;case 3:j.flags=j.flags&-65537|128;case 0:if(j=v.payload,h=typeof j=="function"?j.call(b,m,h):j,h==null)break e;m=_e({},m,h);break e;case 2:ir=!0}}c.callback!==null&&c.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[c]:h.push(c))}else b={eventTime:b,lane:h,tag:c.tag,payload:c.payload,callback:c.callback,next:null},d===null?(u=d=b,l=m):d=d.next=b,o|=h;if(c=c.next,c===null){if(c=i.shared.pending,c===null)break;h=c,c=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(d===null&&(l=m),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=d,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);Br|=o,e.lanes=o,e.memoizedState=m}}function Eu(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(M(191,i));i.call(n)}}}var Us={},Mt=kr(Us),Cs=kr(Us),Es=kr(Us);function Mr(e){if(e===Us)throw Error(M(174));return e}function lc(e,t){switch(he(Es,t),he(Cs,e),he(Mt,Us),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Io(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Io(t,e)}xe(Mt),he(Mt,t)}function Cn(){xe(Mt),xe(Cs),xe(Es)}function Ym(e){Mr(Es.current);var t=Mr(Mt.current),r=Io(t,e.type);t!==r&&(he(Cs,e),he(Mt,r))}function cc(e){Cs.current===e&&(xe(Mt),xe(Cs))}var be=kr(0);function Zi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var no=[];function uc(){for(var e=0;e<no.length;e++)no[e]._workInProgressVersionPrimary=null;no.length=0}var Ci=Zt.ReactCurrentDispatcher,so=Zt.ReactCurrentBatchConfig,Ur=0,we=null,Re=null,Ie=null,ea=!1,cs=!1,Ps=0,sx=0;function $e(){throw Error(M(321))}function dc(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Et(e[r],t[r]))return!1;return!0}function mc(e,t,r,n,i,a){if(Ur=a,we=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ci.current=e===null||e.memoizedState===null?lx:cx,e=r(n,i),cs){a=0;do{if(cs=!1,Ps=0,25<=a)throw Error(M(301));a+=1,Ie=Re=null,t.updateQueue=null,Ci.current=ux,e=r(n,i)}while(cs)}if(Ci.current=ta,t=Re!==null&&Re.next!==null,Ur=0,Ie=Re=we=null,ea=!1,t)throw Error(M(300));return e}function hc(){var e=Ps!==0;return Ps=0,e}function Rt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ie===null?we.memoizedState=Ie=e:Ie=Ie.next=e,Ie}function xt(){if(Re===null){var e=we.alternate;e=e!==null?e.memoizedState:null}else e=Re.next;var t=Ie===null?we.memoizedState:Ie.next;if(t!==null)Ie=t,Re=e;else{if(e===null)throw Error(M(310));Re=e,e={memoizedState:Re.memoizedState,baseState:Re.baseState,baseQueue:Re.baseQueue,queue:Re.queue,next:null},Ie===null?we.memoizedState=Ie=e:Ie=Ie.next=e}return Ie}function Ts(e,t){return typeof t=="function"?t(e):t}function io(e){var t=xt(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var n=Re,i=n.baseQueue,a=r.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,r.pending=null}if(i!==null){a=i.next,n=n.baseState;var c=o=null,l=null,u=a;do{var d=u.lane;if((Ur&d)===d)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var m={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(c=l=m,o=n):l=l.next=m,we.lanes|=d,Br|=d}u=u.next}while(u!==null&&u!==a);l===null?o=n:l.next=c,Et(n,t.memoizedState)||(Xe=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,r.lastRenderedState=n}if(e=r.interleaved,e!==null){i=e;do a=i.lane,we.lanes|=a,Br|=a,i=i.next;while(i!==e)}else i===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function ao(e){var t=xt(),r=t.queue;if(r===null)throw Error(M(311));r.lastRenderedReducer=e;var n=r.dispatch,i=r.pending,a=t.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do a=e(a,o.action),o=o.next;while(o!==i);Et(a,t.memoizedState)||(Xe=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),r.lastRenderedState=a}return[a,n]}function Xm(){}function Zm(e,t){var r=we,n=xt(),i=t(),a=!Et(n.memoizedState,i);if(a&&(n.memoizedState=i,Xe=!0),n=n.queue,fc(rh.bind(null,r,n,e),[e]),n.getSnapshot!==t||a||Ie!==null&&Ie.memoizedState.tag&1){if(r.flags|=2048,As(9,th.bind(null,r,n,i,t),void 0,null),Le===null)throw Error(M(349));Ur&30||eh(r,t,i)}return i}function eh(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function th(e,t,r,n){t.value=r,t.getSnapshot=n,nh(t)&&sh(e)}function rh(e,t,r){return r(function(){nh(t)&&sh(e)})}function nh(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Et(e,r)}catch{return!0}}function sh(e){var t=Qt(e,1);t!==null&&St(t,e,1,-1)}function Pu(e){var t=Rt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:e},t.queue=e,e=e.dispatch=ox.bind(null,we,e),[t.memoizedState,e]}function As(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=we.updateQueue,t===null?(t={lastEffect:null,stores:null},we.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function ih(){return xt().memoizedState}function Ei(e,t,r,n){var i=Rt();we.flags|=e,i.memoizedState=As(1|t,r,void 0,n===void 0?null:n)}function va(e,t,r,n){var i=xt();n=n===void 0?null:n;var a=void 0;if(Re!==null){var o=Re.memoizedState;if(a=o.destroy,n!==null&&dc(n,o.deps)){i.memoizedState=As(t,r,a,n);return}}we.flags|=e,i.memoizedState=As(1|t,r,a,n)}function Tu(e,t){return Ei(8390656,8,e,t)}function fc(e,t){return va(2048,8,e,t)}function ah(e,t){return va(4,2,e,t)}function oh(e,t){return va(4,4,e,t)}function lh(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ch(e,t,r){return r=r!=null?r.concat([e]):null,va(4,4,lh.bind(null,t,e),r)}function pc(){}function uh(e,t){var r=xt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dc(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function dh(e,t){var r=xt();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&dc(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function mh(e,t,r){return Ur&21?(Et(r,t)||(r=xm(),we.lanes|=r,Br|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Xe=!0),e.memoizedState=r)}function ix(e,t){var r=oe;oe=r!==0&&4>r?r:4,e(!0);var n=so.transition;so.transition={};try{e(!1),t()}finally{oe=r,so.transition=n}}function hh(){return xt().memoizedState}function ax(e,t,r){var n=xr(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},fh(e))ph(t,r);else if(r=Qm(e,t,r,n),r!==null){var i=Ge();St(r,e,n,i),gh(r,t,n)}}function ox(e,t,r){var n=xr(e),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(fh(e))ph(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var o=t.lastRenderedState,c=a(o,r);if(i.hasEagerState=!0,i.eagerState=c,Et(c,o)){var l=t.interleaved;l===null?(i.next=i,ac(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}r=Qm(e,t,i,n),r!==null&&(i=Ge(),St(r,e,n,i),gh(r,t,n))}}function fh(e){var t=e.alternate;return e===we||t!==null&&t===we}function ph(e,t){cs=ea=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gh(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,Hl(e,r)}}var ta={readContext:gt,useCallback:$e,useContext:$e,useEffect:$e,useImperativeHandle:$e,useInsertionEffect:$e,useLayoutEffect:$e,useMemo:$e,useReducer:$e,useRef:$e,useState:$e,useDebugValue:$e,useDeferredValue:$e,useTransition:$e,useMutableSource:$e,useSyncExternalStore:$e,useId:$e,unstable_isNewReconciler:!1},lx={readContext:gt,useCallback:function(e,t){return Rt().memoizedState=[e,t===void 0?null:t],e},useContext:gt,useEffect:Tu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Ei(4194308,4,lh.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ei(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ei(4,2,e,t)},useMemo:function(e,t){var r=Rt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Rt();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=ax.bind(null,we,e),[n.memoizedState,e]},useRef:function(e){var t=Rt();return e={current:e},t.memoizedState=e},useState:Pu,useDebugValue:pc,useDeferredValue:function(e){return Rt().memoizedState=e},useTransition:function(){var e=Pu(!1),t=e[0];return e=ix.bind(null,e[1]),Rt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=we,i=Rt();if(ve){if(r===void 0)throw Error(M(407));r=r()}else{if(r=t(),Le===null)throw Error(M(349));Ur&30||eh(n,t,r)}i.memoizedState=r;var a={value:r,getSnapshot:t};return i.queue=a,Tu(rh.bind(null,n,a,e),[e]),n.flags|=2048,As(9,th.bind(null,n,a,r,t),void 0,null),r},useId:function(){var e=Rt(),t=Le.identifierPrefix;if(ve){var r=Wt,n=qt;r=(n&~(1<<32-kt(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ps++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=sx++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},cx={readContext:gt,useCallback:uh,useContext:gt,useEffect:fc,useImperativeHandle:ch,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:dh,useReducer:io,useRef:ih,useState:function(){return io(Ts)},useDebugValue:pc,useDeferredValue:function(e){var t=xt();return mh(t,Re.memoizedState,e)},useTransition:function(){var e=io(Ts)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:hh,unstable_isNewReconciler:!1},ux={readContext:gt,useCallback:uh,useContext:gt,useEffect:fc,useImperativeHandle:ch,useInsertionEffect:ah,useLayoutEffect:oh,useMemo:dh,useReducer:ao,useRef:ih,useState:function(){return ao(Ts)},useDebugValue:pc,useDeferredValue:function(e){var t=xt();return Re===null?t.memoizedState=e:mh(t,Re.memoizedState,e)},useTransition:function(){var e=ao(Ts)[0],t=xt().memoizedState;return[e,t]},useMutableSource:Xm,useSyncExternalStore:Zm,useId:hh,unstable_isNewReconciler:!1};function wt(e,t){if(e&&e.defaultProps){t=_e({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function tl(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:_e({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var ya={isMounted:function(e){return(e=e._reactInternals)?Hr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Ge(),i=xr(e),a=Vt(n,i);a.payload=t,r!=null&&(a.callback=r),t=pr(e,a,i),t!==null&&(St(t,e,i,n),Si(t,e,i))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Ge(),i=xr(e),a=Vt(n,i);a.tag=1,a.payload=t,r!=null&&(a.callback=r),t=pr(e,a,i),t!==null&&(St(t,e,i,n),Si(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Ge(),n=xr(e),i=Vt(r,n);i.tag=2,t!=null&&(i.callback=t),t=pr(e,i,n),t!==null&&(St(t,e,n,r),Si(t,e,n))}};function Au(e,t,r,n,i,a,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,a,o):t.prototype&&t.prototype.isPureReactComponent?!_s(r,n)||!_s(i,a):!0}function xh(e,t,r){var n=!1,i=jr,a=t.contextType;return typeof a=="object"&&a!==null?a=gt(a):(i=et(t)?$r:qe.current,n=t.contextTypes,a=(n=n!=null)?Nn(e,i):jr),t=new t(r,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=ya,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ru(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&ya.enqueueReplaceState(t,t.state,null)}function rl(e,t,r,n){var i=e.stateNode;i.props=r,i.state=e.memoizedState,i.refs={},oc(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=gt(a):(a=et(t)?$r:qe.current,i.context=Nn(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(tl(e,t,a,r),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&ya.enqueueReplaceState(i,i.state,null),Xi(e,r,i,n),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function En(e,t){try{var r="",n=t;do r+=zp(n),n=n.return;while(n);var i=r}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function oo(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nl(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var dx=typeof WeakMap=="function"?WeakMap:Map;function vh(e,t,r){r=Vt(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){na||(na=!0,hl=n),nl(e,t)},r}function yh(e,t,r){r=Vt(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var i=t.value;r.payload=function(){return n(i)},r.callback=function(){nl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(r.callback=function(){nl(e,t),typeof n!="function"&&(gr===null?gr=new Set([this]):gr.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function Ou(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new dx;var i=new Set;n.set(t,i)}else i=n.get(t),i===void 0&&(i=new Set,n.set(t,i));i.has(r)||(i.add(r),e=kx.bind(null,e,t,r),t.then(e,e))}function Iu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Lu(e,t,r,n,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=Vt(-1,1),t.tag=2,pr(r,t,1))),r.lanes|=1),e)}var mx=Zt.ReactCurrentOwner,Xe=!1;function He(e,t,r,n){t.child=e===null?Km(t,null,r,n):Sn(t,e.child,r,n)}function Mu(e,t,r,n,i){r=r.render;var a=t.ref;return wn(t,i),n=mc(e,t,r,n,a,i),r=hc(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(ve&&r&&ec(t),t.flags|=1,He(e,t,n,i),t.child)}function Du(e,t,r,n,i){if(e===null){var a=r.type;return typeof a=="function"&&!_c(a)&&a.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=a,bh(e,t,a,n,i)):(e=Ri(r.type,null,n,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var o=a.memoizedProps;if(r=r.compare,r=r!==null?r:_s,r(o,n)&&e.ref===t.ref)return Jt(e,t,i)}return t.flags|=1,e=vr(a,n),e.ref=t.ref,e.return=t,t.child=e}function bh(e,t,r,n,i){if(e!==null){var a=e.memoizedProps;if(_s(a,n)&&e.ref===t.ref)if(Xe=!1,t.pendingProps=n=a,(e.lanes&i)!==0)e.flags&131072&&(Xe=!0);else return t.lanes=e.lanes,Jt(e,t,i)}return sl(e,t,r,n,i)}function wh(e,t,r){var n=t.pendingProps,i=n.children,a=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},he(gn,nt),nt|=r;else{if(!(r&1073741824))return e=a!==null?a.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,he(gn,nt),nt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:r,he(gn,nt),nt|=n}else a!==null?(n=a.baseLanes|r,t.memoizedState=null):n=r,he(gn,nt),nt|=n;return He(e,t,i,r),t.child}function jh(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function sl(e,t,r,n,i){var a=et(r)?$r:qe.current;return a=Nn(t,a),wn(t,i),r=mc(e,t,r,n,a,i),n=hc(),e!==null&&!Xe?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Jt(e,t,i)):(ve&&n&&ec(t),t.flags|=1,He(e,t,r,i),t.child)}function zu(e,t,r,n,i){if(et(r)){var a=!0;Gi(t)}else a=!1;if(wn(t,i),t.stateNode===null)Pi(e,t),xh(t,r,n),rl(t,r,n,i),n=!0;else if(e===null){var o=t.stateNode,c=t.memoizedProps;o.props=c;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=gt(u):(u=et(r)?$r:qe.current,u=Nn(t,u));var d=r.getDerivedStateFromProps,m=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==n||l!==u)&&Ru(t,o,n,u),ir=!1;var h=t.memoizedState;o.state=h,Xi(t,n,o,i),l=t.memoizedState,c!==n||h!==l||Ze.current||ir?(typeof d=="function"&&(tl(t,r,d,n),l=t.memoizedState),(c=ir||Au(t,r,c,n,h,l,u))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=u,n=c):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,Jm(e,t),c=t.memoizedProps,u=t.type===t.elementType?c:wt(t.type,c),o.props=u,m=t.pendingProps,h=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=gt(l):(l=et(r)?$r:qe.current,l=Nn(t,l));var b=r.getDerivedStateFromProps;(d=typeof b=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==m||h!==l)&&Ru(t,o,n,l),ir=!1,h=t.memoizedState,o.state=h,Xi(t,n,o,i);var j=t.memoizedState;c!==m||h!==j||Ze.current||ir?(typeof b=="function"&&(tl(t,r,b,n),j=t.memoizedState),(u=ir||Au(t,r,u,n,h,j,l)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,j,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,j,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=j),o.props=n,o.state=j,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return il(e,t,r,n,a,i)}function il(e,t,r,n,i,a){jh(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return i&&_u(t,r,!1),Jt(e,t,a);n=t.stateNode,mx.current=t;var c=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Sn(t,e.child,null,a),t.child=Sn(t,null,c,a)):He(e,t,c,a),t.memoizedState=n.state,i&&_u(t,r,!0),t.child}function _h(e){var t=e.stateNode;t.pendingContext?ju(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ju(e,t.context,!1),lc(e,t.containerInfo)}function $u(e,t,r,n,i){return kn(),rc(i),t.flags|=256,He(e,t,r,n),t.child}var al={dehydrated:null,treeContext:null,retryLane:0};function ol(e){return{baseLanes:e,cachePool:null,transitions:null}}function Nh(e,t,r){var n=t.pendingProps,i=be.current,a=!1,o=(t.flags&128)!==0,c;if((c=o)||(c=e!==null&&e.memoizedState===null?!1:(i&2)!==0),c?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),he(be,i&1),e===null)return Zo(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,a?(n=t.mode,a=t.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=ja(o,n,0,null),e=zr(e,n,r,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=ol(r),t.memoizedState=al,e):gc(t,o));if(i=e.memoizedState,i!==null&&(c=i.dehydrated,c!==null))return hx(e,t,o,n,c,i,r);if(a){a=n.fallback,o=t.mode,i=e.child,c=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==i?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=vr(i,l),n.subtreeFlags=i.subtreeFlags&14680064),c!==null?a=vr(c,a):(a=zr(a,o,r,null),a.flags|=2),a.return=t,n.return=t,n.sibling=a,t.child=n,n=a,a=t.child,o=e.child.memoizedState,o=o===null?ol(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=e.childLanes&~r,t.memoizedState=al,n}return a=e.child,e=a.sibling,n=vr(a,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function gc(e,t){return t=ja({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function ui(e,t,r,n){return n!==null&&rc(n),Sn(t,e.child,null,r),e=gc(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function hx(e,t,r,n,i,a,o){if(r)return t.flags&256?(t.flags&=-257,n=oo(Error(M(422))),ui(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=n.fallback,i=t.mode,n=ja({mode:"visible",children:n.children},i,0,null),a=zr(a,i,o,null),a.flags|=2,n.return=t,a.return=t,n.sibling=a,t.child=n,t.mode&1&&Sn(t,e.child,null,o),t.child.memoizedState=ol(o),t.memoizedState=al,a);if(!(t.mode&1))return ui(e,t,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var c=n.dgst;return n=c,a=Error(M(419)),n=oo(a,n,void 0),ui(e,t,o,n)}if(c=(o&e.childLanes)!==0,Xe||c){if(n=Le,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Qt(e,i),St(n,e,i,-1))}return jc(),n=oo(Error(M(421))),ui(e,t,o,n)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Sx.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,st=fr(i.nextSibling),it=t,ve=!0,Nt=null,e!==null&&(ut[dt++]=qt,ut[dt++]=Wt,ut[dt++]=Fr,qt=e.id,Wt=e.overflow,Fr=t),t=gc(t,n.children),t.flags|=4096,t)}function Fu(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),el(e.return,t,r)}function lo(e,t,r,n,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=r,a.tailMode=i)}function kh(e,t,r){var n=t.pendingProps,i=n.revealOrder,a=n.tail;if(He(e,t,n.children,r),n=be.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Fu(e,r,t);else if(e.tag===19)Fu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(he(be,n),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(r=t.child,i=null;r!==null;)e=r.alternate,e!==null&&Zi(e)===null&&(i=r),r=r.sibling;r=i,r===null?(i=t.child,t.child=null):(i=r.sibling,r.sibling=null),lo(t,!1,i,r,a);break;case"backwards":for(r=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Zi(e)===null){t.child=i;break}e=i.sibling,i.sibling=r,r=i,i=e}lo(t,!0,r,null,a);break;case"together":lo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pi(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Jt(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Br|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(M(153));if(t.child!==null){for(e=t.child,r=vr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=vr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function fx(e,t,r){switch(t.tag){case 3:_h(t),kn();break;case 5:Ym(t);break;case 1:et(t.type)&&Gi(t);break;case 4:lc(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,i=t.memoizedProps.value;he(Ji,n._currentValue),n._currentValue=i;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(he(be,be.current&1),t.flags|=128,null):r&t.child.childLanes?Nh(e,t,r):(he(be,be.current&1),e=Jt(e,t,r),e!==null?e.sibling:null);he(be,be.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return kh(e,t,r);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),he(be,be.current),n)break;return null;case 22:case 23:return t.lanes=0,wh(e,t,r)}return Jt(e,t,r)}var Sh,ll,Ch,Eh;Sh=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};ll=function(){};Ch=function(e,t,r,n){var i=e.memoizedProps;if(i!==n){e=t.stateNode,Mr(Mt.current);var a=null;switch(r){case"input":i=To(e,i),n=To(e,n),a=[];break;case"select":i=_e({},i,{value:void 0}),n=_e({},n,{value:void 0}),a=[];break;case"textarea":i=Oo(e,i),n=Oo(e,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Vi)}Lo(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var c=i[u];for(o in c)c.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gs.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var l=n[u];if(c=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==c&&(l!=null||c!=null))if(u==="style")if(c){for(o in c)!c.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&c[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(a||(a=[]),a.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,c=c?c.__html:void 0,l!=null&&c!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gs.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&pe("scroll",e),a||c===l||(a=[])):(a=a||[]).push(u,l))}r&&(a=a||[]).push("style",r);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Eh=function(e,t,r,n){r!==n&&(t.flags|=4)};function Gn(e,t){if(!ve)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Fe(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function px(e,t,r){var n=t.pendingProps;switch(tc(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fe(t),null;case 1:return et(t.type)&&Hi(),Fe(t),null;case 3:return n=t.stateNode,Cn(),xe(Ze),xe(qe),uc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(li(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Nt!==null&&(gl(Nt),Nt=null))),ll(e,t),Fe(t),null;case 5:cc(t);var i=Mr(Es.current);if(r=t.type,e!==null&&t.stateNode!=null)Ch(e,t,r,n,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(M(166));return Fe(t),null}if(e=Mr(Mt.current),li(t)){n=t.stateNode,r=t.type;var a=t.memoizedProps;switch(n[It]=t,n[Ss]=a,e=(t.mode&1)!==0,r){case"dialog":pe("cancel",n),pe("close",n);break;case"iframe":case"object":case"embed":pe("load",n);break;case"video":case"audio":for(i=0;i<rs.length;i++)pe(rs[i],n);break;case"source":pe("error",n);break;case"img":case"image":case"link":pe("error",n),pe("load",n);break;case"details":pe("toggle",n);break;case"input":Qc(n,a),pe("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},pe("invalid",n);break;case"textarea":Yc(n,a),pe("invalid",n)}Lo(r,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var c=a[o];o==="children"?typeof c=="string"?n.textContent!==c&&(a.suppressHydrationWarning!==!0&&oi(n.textContent,c,e),i=["children",c]):typeof c=="number"&&n.textContent!==""+c&&(a.suppressHydrationWarning!==!0&&oi(n.textContent,c,e),i=["children",""+c]):gs.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&pe("scroll",n)}switch(r){case"input":Zs(n),Jc(n,a,!0);break;case"textarea":Zs(n),Xc(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Vi)}n=i,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=rm(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[It]=t,e[Ss]=n,Sh(e,t,!1,!1),t.stateNode=e;e:{switch(o=Mo(r,n),r){case"dialog":pe("cancel",e),pe("close",e),i=n;break;case"iframe":case"object":case"embed":pe("load",e),i=n;break;case"video":case"audio":for(i=0;i<rs.length;i++)pe(rs[i],e);i=n;break;case"source":pe("error",e),i=n;break;case"img":case"image":case"link":pe("error",e),pe("load",e),i=n;break;case"details":pe("toggle",e),i=n;break;case"input":Qc(e,n),i=To(e,n),pe("invalid",e);break;case"option":i=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},i=_e({},n,{value:void 0}),pe("invalid",e);break;case"textarea":Yc(e,n),i=Oo(e,n),pe("invalid",e);break;default:i=n}Lo(r,i),c=i;for(a in c)if(c.hasOwnProperty(a)){var l=c[a];a==="style"?im(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&nm(e,l)):a==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&xs(e,l):typeof l=="number"&&xs(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(gs.hasOwnProperty(a)?l!=null&&a==="onScroll"&&pe("scroll",e):l!=null&&Fl(e,a,l,o))}switch(r){case"input":Zs(e),Jc(e,n,!1);break;case"textarea":Zs(e),Xc(e);break;case"option":n.value!=null&&e.setAttribute("value",""+wr(n.value));break;case"select":e.multiple=!!n.multiple,a=n.value,a!=null?xn(e,!!n.multiple,a,!1):n.defaultValue!=null&&xn(e,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Vi)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fe(t),null;case 6:if(e&&t.stateNode!=null)Eh(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(M(166));if(r=Mr(Es.current),Mr(Mt.current),li(t)){if(n=t.stateNode,r=t.memoizedProps,n[It]=t,(a=n.nodeValue!==r)&&(e=it,e!==null))switch(e.tag){case 3:oi(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&oi(n.nodeValue,r,(e.mode&1)!==0)}a&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[It]=t,t.stateNode=n}return Fe(t),null;case 13:if(xe(be),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ve&&st!==null&&t.mode&1&&!(t.flags&128))Hm(),kn(),t.flags|=98560,a=!1;else if(a=li(t),n!==null&&n.dehydrated!==null){if(e===null){if(!a)throw Error(M(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(M(317));a[It]=t}else kn(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fe(t),a=!1}else Nt!==null&&(gl(Nt),Nt=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||be.current&1?Oe===0&&(Oe=3):jc())),t.updateQueue!==null&&(t.flags|=4),Fe(t),null);case 4:return Cn(),ll(e,t),e===null&&Ns(t.stateNode.containerInfo),Fe(t),null;case 10:return ic(t.type._context),Fe(t),null;case 17:return et(t.type)&&Hi(),Fe(t),null;case 19:if(xe(be),a=t.memoizedState,a===null)return Fe(t),null;if(n=(t.flags&128)!==0,o=a.rendering,o===null)if(n)Gn(a,!1);else{if(Oe!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=Zi(e),o!==null){for(t.flags|=128,Gn(a,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)a=r,e=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,e=o.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return he(be,be.current&1|2),t.child}e=e.sibling}a.tail!==null&&Se()>Pn&&(t.flags|=128,n=!0,Gn(a,!1),t.lanes=4194304)}else{if(!n)if(e=Zi(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Gn(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!ve)return Fe(t),null}else 2*Se()-a.renderingStartTime>Pn&&r!==1073741824&&(t.flags|=128,n=!0,Gn(a,!1),t.lanes=4194304);a.isBackwards?(o.sibling=t.child,t.child=o):(r=a.last,r!==null?r.sibling=o:t.child=o,a.last=o)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Se(),t.sibling=null,r=be.current,he(be,n?r&1|2:r&1),t):(Fe(t),null);case 22:case 23:return wc(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?nt&1073741824&&(Fe(t),t.subtreeFlags&6&&(t.flags|=8192)):Fe(t),null;case 24:return null;case 25:return null}throw Error(M(156,t.tag))}function gx(e,t){switch(tc(t),t.tag){case 1:return et(t.type)&&Hi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cn(),xe(Ze),xe(qe),uc(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return cc(t),null;case 13:if(xe(be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(M(340));kn()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return xe(be),null;case 4:return Cn(),null;case 10:return ic(t.type._context),null;case 22:case 23:return wc(),null;case 24:return null;default:return null}}var di=!1,Be=!1,xx=typeof WeakSet=="function"?WeakSet:Set,B=null;function pn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){ke(e,t,n)}else r.current=null}function cl(e,t,r){try{r()}catch(n){ke(e,t,n)}}var Uu=!1;function vx(e,t){if(Ho=Bi,e=Om(),Zl(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{r.nodeType,a.nodeType}catch{r=null;break e}var o=0,c=-1,l=-1,u=0,d=0,m=e,h=null;t:for(;;){for(var b;m!==r||i!==0&&m.nodeType!==3||(c=o+i),m!==a||n!==0&&m.nodeType!==3||(l=o+n),m.nodeType===3&&(o+=m.nodeValue.length),(b=m.firstChild)!==null;)h=m,m=b;for(;;){if(m===e)break t;if(h===r&&++u===i&&(c=o),h===a&&++d===n&&(l=o),(b=m.nextSibling)!==null)break;m=h,h=m.parentNode}m=b}r=c===-1||l===-1?null:{start:c,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(Go={focusedElem:e,selectionRange:r},Bi=!1,B=t;B!==null;)if(t=B,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,B=e;else for(;B!==null;){t=B;try{var j=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(j!==null){var v=j.memoizedProps,w=j.memoizedState,g=t.stateNode,p=g.getSnapshotBeforeUpdate(t.elementType===t.type?v:wt(t.type,v),w);g.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var f=t.stateNode.containerInfo;f.nodeType===1?f.textContent="":f.nodeType===9&&f.documentElement&&f.removeChild(f.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(x){ke(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,B=e;break}B=t.return}return j=Uu,Uu=!1,j}function us(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&cl(t,r,a)}i=i.next}while(i!==n)}}function ba(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function ul(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Ph(e){var t=e.alternate;t!==null&&(e.alternate=null,Ph(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[It],delete t[Ss],delete t[Jo],delete t[ex],delete t[tx])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Th(e){return e.tag===5||e.tag===3||e.tag===4}function Bu(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Th(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dl(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Vi));else if(n!==4&&(e=e.child,e!==null))for(dl(e,t,r),e=e.sibling;e!==null;)dl(e,t,r),e=e.sibling}function ml(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(ml(e,t,r),e=e.sibling;e!==null;)ml(e,t,r),e=e.sibling}var Me=null,jt=!1;function tr(e,t,r){for(r=r.child;r!==null;)Ah(e,t,r),r=r.sibling}function Ah(e,t,r){if(Lt&&typeof Lt.onCommitFiberUnmount=="function")try{Lt.onCommitFiberUnmount(ma,r)}catch{}switch(r.tag){case 5:Be||pn(r,t);case 6:var n=Me,i=jt;Me=null,tr(e,t,r),Me=n,jt=i,Me!==null&&(jt?(e=Me,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Me.removeChild(r.stateNode));break;case 18:Me!==null&&(jt?(e=Me,r=r.stateNode,e.nodeType===8?to(e.parentNode,r):e.nodeType===1&&to(e,r),ws(e)):to(Me,r.stateNode));break;case 4:n=Me,i=jt,Me=r.stateNode.containerInfo,jt=!0,tr(e,t,r),Me=n,jt=i;break;case 0:case 11:case 14:case 15:if(!Be&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&cl(r,t,o),i=i.next}while(i!==n)}tr(e,t,r);break;case 1:if(!Be&&(pn(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(c){ke(r,t,c)}tr(e,t,r);break;case 21:tr(e,t,r);break;case 22:r.mode&1?(Be=(n=Be)||r.memoizedState!==null,tr(e,t,r),Be=n):tr(e,t,r);break;default:tr(e,t,r)}}function qu(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new xx),t.forEach(function(n){var i=Cx.bind(null,e,n);r.has(n)||(r.add(n),n.then(i,i))})}}function vt(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var a=e,o=t,c=o;e:for(;c!==null;){switch(c.tag){case 5:Me=c.stateNode,jt=!1;break e;case 3:Me=c.stateNode.containerInfo,jt=!0;break e;case 4:Me=c.stateNode.containerInfo,jt=!0;break e}c=c.return}if(Me===null)throw Error(M(160));Ah(a,o,i),Me=null,jt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){ke(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Rh(t,e),t=t.sibling}function Rh(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(vt(t,e),At(e),n&4){try{us(3,e,e.return),ba(3,e)}catch(v){ke(e,e.return,v)}try{us(5,e,e.return)}catch(v){ke(e,e.return,v)}}break;case 1:vt(t,e),At(e),n&512&&r!==null&&pn(r,r.return);break;case 5:if(vt(t,e),At(e),n&512&&r!==null&&pn(r,r.return),e.flags&32){var i=e.stateNode;try{xs(i,"")}catch(v){ke(e,e.return,v)}}if(n&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,o=r!==null?r.memoizedProps:a,c=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{c==="input"&&a.type==="radio"&&a.name!=null&&em(i,a),Mo(c,o);var u=Mo(c,a);for(o=0;o<l.length;o+=2){var d=l[o],m=l[o+1];d==="style"?im(i,m):d==="dangerouslySetInnerHTML"?nm(i,m):d==="children"?xs(i,m):Fl(i,d,m,u)}switch(c){case"input":Ao(i,a);break;case"textarea":tm(i,a);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var b=a.value;b!=null?xn(i,!!a.multiple,b,!1):h!==!!a.multiple&&(a.defaultValue!=null?xn(i,!!a.multiple,a.defaultValue,!0):xn(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ss]=a}catch(v){ke(e,e.return,v)}}break;case 6:if(vt(t,e),At(e),n&4){if(e.stateNode===null)throw Error(M(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(v){ke(e,e.return,v)}}break;case 3:if(vt(t,e),At(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{ws(t.containerInfo)}catch(v){ke(e,e.return,v)}break;case 4:vt(t,e),At(e);break;case 13:vt(t,e),At(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(yc=Se())),n&4&&qu(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Be=(u=Be)||d,vt(t,e),Be=u):vt(t,e),At(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(B=e,d=e.child;d!==null;){for(m=B=d;B!==null;){switch(h=B,b=h.child,h.tag){case 0:case 11:case 14:case 15:us(4,h,h.return);break;case 1:pn(h,h.return);var j=h.stateNode;if(typeof j.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,j.props=t.memoizedProps,j.state=t.memoizedState,j.componentWillUnmount()}catch(v){ke(n,r,v)}}break;case 5:pn(h,h.return);break;case 22:if(h.memoizedState!==null){Vu(m);continue}}b!==null?(b.return=h,B=b):Vu(m)}d=d.sibling}e:for(d=null,m=e;;){if(m.tag===5){if(d===null){d=m;try{i=m.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(c=m.stateNode,l=m.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,c.style.display=sm("display",o))}catch(v){ke(e,e.return,v)}}}else if(m.tag===6){if(d===null)try{m.stateNode.nodeValue=u?"":m.memoizedProps}catch(v){ke(e,e.return,v)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===e)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===e)break e;for(;m.sibling===null;){if(m.return===null||m.return===e)break e;d===m&&(d=null),m=m.return}d===m&&(d=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:vt(t,e),At(e),n&4&&qu(e);break;case 21:break;default:vt(t,e),At(e)}}function At(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Th(r)){var n=r;break e}r=r.return}throw Error(M(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(xs(i,""),n.flags&=-33);var a=Bu(e);ml(e,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,c=Bu(e);dl(e,c,o);break;default:throw Error(M(161))}}catch(l){ke(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function yx(e,t,r){B=e,Oh(e)}function Oh(e,t,r){for(var n=(e.mode&1)!==0;B!==null;){var i=B,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||di;if(!o){var c=i.alternate,l=c!==null&&c.memoizedState!==null||Be;c=di;var u=Be;if(di=o,(Be=l)&&!u)for(B=i;B!==null;)o=B,l=o.child,o.tag===22&&o.memoizedState!==null?Hu(i):l!==null?(l.return=o,B=l):Hu(i);for(;a!==null;)B=a,Oh(a),a=a.sibling;B=i,di=c,Be=u}Wu(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,B=a):Wu(e)}}function Wu(e){for(;B!==null;){var t=B;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Be||ba(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Be)if(r===null)n.componentDidMount();else{var i=t.elementType===t.type?r.memoizedProps:wt(t.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&Eu(t,a,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}Eu(t,o,r)}break;case 5:var c=t.stateNode;if(r===null&&t.flags&4){r=c;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var m=d.dehydrated;m!==null&&ws(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}Be||t.flags&512&&ul(t)}catch(h){ke(t,t.return,h)}}if(t===e){B=null;break}if(r=t.sibling,r!==null){r.return=t.return,B=r;break}B=t.return}}function Vu(e){for(;B!==null;){var t=B;if(t===e){B=null;break}var r=t.sibling;if(r!==null){r.return=t.return,B=r;break}B=t.return}}function Hu(e){for(;B!==null;){var t=B;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{ba(4,t)}catch(l){ke(t,r,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var i=t.return;try{n.componentDidMount()}catch(l){ke(t,i,l)}}var a=t.return;try{ul(t)}catch(l){ke(t,a,l)}break;case 5:var o=t.return;try{ul(t)}catch(l){ke(t,o,l)}}}catch(l){ke(t,t.return,l)}if(t===e){B=null;break}var c=t.sibling;if(c!==null){c.return=t.return,B=c;break}B=t.return}}var bx=Math.ceil,ra=Zt.ReactCurrentDispatcher,xc=Zt.ReactCurrentOwner,ht=Zt.ReactCurrentBatchConfig,ie=0,Le=null,Ce=null,De=0,nt=0,gn=kr(0),Oe=0,Rs=null,Br=0,wa=0,vc=0,ds=null,Je=null,yc=0,Pn=1/0,Ft=null,na=!1,hl=null,gr=null,mi=!1,ur=null,sa=0,ms=0,fl=null,Ti=-1,Ai=0;function Ge(){return ie&6?Se():Ti!==-1?Ti:Ti=Se()}function xr(e){return e.mode&1?ie&2&&De!==0?De&-De:nx.transition!==null?(Ai===0&&(Ai=xm()),Ai):(e=oe,e!==0||(e=window.event,e=e===void 0?16:Nm(e.type)),e):1}function St(e,t,r,n){if(50<ms)throw ms=0,fl=null,Error(M(185));zs(e,r,n),(!(ie&2)||e!==Le)&&(e===Le&&(!(ie&2)&&(wa|=r),Oe===4&&or(e,De)),tt(e,n),r===1&&ie===0&&!(t.mode&1)&&(Pn=Se()+500,xa&&Sr()))}function tt(e,t){var r=e.callbackNode;ng(e,t);var n=Ui(e,e===Le?De:0);if(n===0)r!==null&&tu(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&tu(r),t===1)e.tag===0?rx(Gu.bind(null,e)):qm(Gu.bind(null,e)),Xg(function(){!(ie&6)&&Sr()}),r=null;else{switch(vm(n)){case 1:r=Vl;break;case 4:r=pm;break;case 16:r=Fi;break;case 536870912:r=gm;break;default:r=Fi}r=Uh(r,Ih.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Ih(e,t){if(Ti=-1,Ai=0,ie&6)throw Error(M(327));var r=e.callbackNode;if(jn()&&e.callbackNode!==r)return null;var n=Ui(e,e===Le?De:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ia(e,n);else{t=n;var i=ie;ie|=2;var a=Mh();(Le!==e||De!==t)&&(Ft=null,Pn=Se()+500,Dr(e,t));do try{_x();break}catch(c){Lh(e,c)}while(!0);sc(),ra.current=a,ie=i,Ce!==null?t=0:(Le=null,De=0,t=Oe)}if(t!==0){if(t===2&&(i=Uo(e),i!==0&&(n=i,t=pl(e,i))),t===1)throw r=Rs,Dr(e,0),or(e,n),tt(e,Se()),r;if(t===6)or(e,n);else{if(i=e.current.alternate,!(n&30)&&!wx(i)&&(t=ia(e,n),t===2&&(a=Uo(e),a!==0&&(n=a,t=pl(e,a))),t===1))throw r=Rs,Dr(e,0),or(e,n),tt(e,Se()),r;switch(e.finishedWork=i,e.finishedLanes=n,t){case 0:case 1:throw Error(M(345));case 2:Ar(e,Je,Ft);break;case 3:if(or(e,n),(n&130023424)===n&&(t=yc+500-Se(),10<t)){if(Ui(e,0)!==0)break;if(i=e.suspendedLanes,(i&n)!==n){Ge(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Qo(Ar.bind(null,e,Je,Ft),t);break}Ar(e,Je,Ft);break;case 4:if(or(e,n),(n&4194240)===n)break;for(t=e.eventTimes,i=-1;0<n;){var o=31-kt(n);a=1<<o,o=t[o],o>i&&(i=o),n&=~a}if(n=i,n=Se()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*bx(n/1960))-n,10<n){e.timeoutHandle=Qo(Ar.bind(null,e,Je,Ft),n);break}Ar(e,Je,Ft);break;case 5:Ar(e,Je,Ft);break;default:throw Error(M(329))}}}return tt(e,Se()),e.callbackNode===r?Ih.bind(null,e):null}function pl(e,t){var r=ds;return e.current.memoizedState.isDehydrated&&(Dr(e,t).flags|=256),e=ia(e,t),e!==2&&(t=Je,Je=r,t!==null&&gl(t)),e}function gl(e){Je===null?Je=e:Je.push.apply(Je,e)}function wx(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],a=i.getSnapshot;i=i.value;try{if(!Et(a(),i))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function or(e,t){for(t&=~vc,t&=~wa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-kt(t),n=1<<r;e[r]=-1,t&=~n}}function Gu(e){if(ie&6)throw Error(M(327));jn();var t=Ui(e,0);if(!(t&1))return tt(e,Se()),null;var r=ia(e,t);if(e.tag!==0&&r===2){var n=Uo(e);n!==0&&(t=n,r=pl(e,n))}if(r===1)throw r=Rs,Dr(e,0),or(e,t),tt(e,Se()),r;if(r===6)throw Error(M(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ar(e,Je,Ft),tt(e,Se()),null}function bc(e,t){var r=ie;ie|=1;try{return e(t)}finally{ie=r,ie===0&&(Pn=Se()+500,xa&&Sr())}}function qr(e){ur!==null&&ur.tag===0&&!(ie&6)&&jn();var t=ie;ie|=1;var r=ht.transition,n=oe;try{if(ht.transition=null,oe=1,e)return e()}finally{oe=n,ht.transition=r,ie=t,!(ie&6)&&Sr()}}function wc(){nt=gn.current,xe(gn)}function Dr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Yg(r)),Ce!==null)for(r=Ce.return;r!==null;){var n=r;switch(tc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Hi();break;case 3:Cn(),xe(Ze),xe(qe),uc();break;case 5:cc(n);break;case 4:Cn();break;case 13:xe(be);break;case 19:xe(be);break;case 10:ic(n.type._context);break;case 22:case 23:wc()}r=r.return}if(Le=e,Ce=e=vr(e.current,null),De=nt=t,Oe=0,Rs=null,vc=wa=Br=0,Je=ds=null,Lr!==null){for(t=0;t<Lr.length;t++)if(r=Lr[t],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,a=r.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}r.pending=n}Lr=null}return e}function Lh(e,t){do{var r=Ce;try{if(sc(),Ci.current=ta,ea){for(var n=we.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}ea=!1}if(Ur=0,Ie=Re=we=null,cs=!1,Ps=0,xc.current=null,r===null||r.return===null){Oe=1,Rs=t,Ce=null;break}e:{var a=e,o=r.return,c=r,l=t;if(t=De,c.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,d=c,m=d.tag;if(!(d.mode&1)&&(m===0||m===11||m===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var b=Iu(o);if(b!==null){b.flags&=-257,Lu(b,o,c,a,t),b.mode&1&&Ou(a,u,t),t=b,l=u;var j=t.updateQueue;if(j===null){var v=new Set;v.add(l),t.updateQueue=v}else j.add(l);break e}else{if(!(t&1)){Ou(a,u,t),jc();break e}l=Error(M(426))}}else if(ve&&c.mode&1){var w=Iu(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Lu(w,o,c,a,t),rc(En(l,c));break e}}a=l=En(l,c),Oe!==4&&(Oe=2),ds===null?ds=[a]:ds.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var g=vh(a,l,t);Cu(a,g);break e;case 1:c=l;var p=a.type,f=a.stateNode;if(!(a.flags&128)&&(typeof p.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(gr===null||!gr.has(f)))){a.flags|=65536,t&=-t,a.lanes|=t;var x=yh(a,c,t);Cu(a,x);break e}}a=a.return}while(a!==null)}zh(r)}catch(_){t=_,Ce===r&&r!==null&&(Ce=r=r.return);continue}break}while(!0)}function Mh(){var e=ra.current;return ra.current=ta,e===null?ta:e}function jc(){(Oe===0||Oe===3||Oe===2)&&(Oe=4),Le===null||!(Br&268435455)&&!(wa&268435455)||or(Le,De)}function ia(e,t){var r=ie;ie|=2;var n=Mh();(Le!==e||De!==t)&&(Ft=null,Dr(e,t));do try{jx();break}catch(i){Lh(e,i)}while(!0);if(sc(),ie=r,ra.current=n,Ce!==null)throw Error(M(261));return Le=null,De=0,Oe}function jx(){for(;Ce!==null;)Dh(Ce)}function _x(){for(;Ce!==null&&!Kp();)Dh(Ce)}function Dh(e){var t=Fh(e.alternate,e,nt);e.memoizedProps=e.pendingProps,t===null?zh(e):Ce=t,xc.current=null}function zh(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=gx(r,t),r!==null){r.flags&=32767,Ce=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Oe=6,Ce=null;return}}else if(r=px(r,t,nt),r!==null){Ce=r;return}if(t=t.sibling,t!==null){Ce=t;return}Ce=t=e}while(t!==null);Oe===0&&(Oe=5)}function Ar(e,t,r){var n=oe,i=ht.transition;try{ht.transition=null,oe=1,Nx(e,t,r,n)}finally{ht.transition=i,oe=n}return null}function Nx(e,t,r,n){do jn();while(ur!==null);if(ie&6)throw Error(M(327));r=e.finishedWork;var i=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(M(177));e.callbackNode=null,e.callbackPriority=0;var a=r.lanes|r.childLanes;if(sg(e,a),e===Le&&(Ce=Le=null,De=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||mi||(mi=!0,Uh(Fi,function(){return jn(),null})),a=(r.flags&15990)!==0,r.subtreeFlags&15990||a){a=ht.transition,ht.transition=null;var o=oe;oe=1;var c=ie;ie|=4,xc.current=null,vx(e,r),Rh(r,e),Wg(Go),Bi=!!Ho,Go=Ho=null,e.current=r,yx(r),Qp(),ie=c,oe=o,ht.transition=a}else e.current=r;if(mi&&(mi=!1,ur=e,sa=i),a=e.pendingLanes,a===0&&(gr=null),Xp(r.stateNode),tt(e,Se()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)i=t[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(na)throw na=!1,e=hl,hl=null,e;return sa&1&&e.tag!==0&&jn(),a=e.pendingLanes,a&1?e===fl?ms++:(ms=0,fl=e):ms=0,Sr(),null}function jn(){if(ur!==null){var e=vm(sa),t=ht.transition,r=oe;try{if(ht.transition=null,oe=16>e?16:e,ur===null)var n=!1;else{if(e=ur,ur=null,sa=0,ie&6)throw Error(M(331));var i=ie;for(ie|=4,B=e.current;B!==null;){var a=B,o=a.child;if(B.flags&16){var c=a.deletions;if(c!==null){for(var l=0;l<c.length;l++){var u=c[l];for(B=u;B!==null;){var d=B;switch(d.tag){case 0:case 11:case 15:us(8,d,a)}var m=d.child;if(m!==null)m.return=d,B=m;else for(;B!==null;){d=B;var h=d.sibling,b=d.return;if(Ph(d),d===u){B=null;break}if(h!==null){h.return=b,B=h;break}B=b}}}var j=a.alternate;if(j!==null){var v=j.child;if(v!==null){j.child=null;do{var w=v.sibling;v.sibling=null,v=w}while(v!==null)}}B=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,B=o;else e:for(;B!==null;){if(a=B,a.flags&2048)switch(a.tag){case 0:case 11:case 15:us(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,B=g;break e}B=a.return}}var p=e.current;for(B=p;B!==null;){o=B;var f=o.child;if(o.subtreeFlags&2064&&f!==null)f.return=o,B=f;else e:for(o=p;B!==null;){if(c=B,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:ba(9,c)}}catch(_){ke(c,c.return,_)}if(c===o){B=null;break e}var x=c.sibling;if(x!==null){x.return=c.return,B=x;break e}B=c.return}}if(ie=i,Sr(),Lt&&typeof Lt.onPostCommitFiberRoot=="function")try{Lt.onPostCommitFiberRoot(ma,e)}catch{}n=!0}return n}finally{oe=r,ht.transition=t}}return!1}function Ku(e,t,r){t=En(r,t),t=vh(e,t,1),e=pr(e,t,1),t=Ge(),e!==null&&(zs(e,1,t),tt(e,t))}function ke(e,t,r){if(e.tag===3)Ku(e,e,r);else for(;t!==null;){if(t.tag===3){Ku(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gr===null||!gr.has(n))){e=En(r,e),e=yh(t,e,1),t=pr(t,e,1),e=Ge(),t!==null&&(zs(t,1,e),tt(t,e));break}}t=t.return}}function kx(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Ge(),e.pingedLanes|=e.suspendedLanes&r,Le===e&&(De&r)===r&&(Oe===4||Oe===3&&(De&130023424)===De&&500>Se()-yc?Dr(e,0):vc|=r),tt(e,t)}function $h(e,t){t===0&&(e.mode&1?(t=ri,ri<<=1,!(ri&130023424)&&(ri=4194304)):t=1);var r=Ge();e=Qt(e,t),e!==null&&(zs(e,t,r),tt(e,r))}function Sx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),$h(e,r)}function Cx(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,i=e.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(M(314))}n!==null&&n.delete(t),$h(e,r)}var Fh;Fh=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ze.current)Xe=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Xe=!1,fx(e,t,r);Xe=!!(e.flags&131072)}else Xe=!1,ve&&t.flags&1048576&&Wm(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Pi(e,t),e=t.pendingProps;var i=Nn(t,qe.current);wn(t,r),i=mc(null,t,n,e,i,r);var a=hc();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,et(n)?(a=!0,Gi(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,oc(t),i.updater=ya,t.stateNode=i,i._reactInternals=t,rl(t,n,e,r),t=il(null,t,n,!0,a,r)):(t.tag=0,ve&&a&&ec(t),He(null,t,i,r),t=t.child),t;case 16:n=t.elementType;e:{switch(Pi(e,t),e=t.pendingProps,i=n._init,n=i(n._payload),t.type=n,i=t.tag=Px(n),e=wt(n,e),i){case 0:t=sl(null,t,n,e,r);break e;case 1:t=zu(null,t,n,e,r);break e;case 11:t=Mu(null,t,n,e,r);break e;case 14:t=Du(null,t,n,wt(n.type,e),r);break e}throw Error(M(306,n,""))}return t;case 0:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:wt(n,i),sl(e,t,n,i,r);case 1:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:wt(n,i),zu(e,t,n,i,r);case 3:e:{if(_h(t),e===null)throw Error(M(387));n=t.pendingProps,a=t.memoizedState,i=a.element,Jm(e,t),Xi(t,n,null,r);var o=t.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=En(Error(M(423)),t),t=$u(e,t,n,r,i);break e}else if(n!==i){i=En(Error(M(424)),t),t=$u(e,t,n,r,i);break e}else for(st=fr(t.stateNode.containerInfo.firstChild),it=t,ve=!0,Nt=null,r=Km(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(kn(),n===i){t=Jt(e,t,r);break e}He(e,t,n,r)}t=t.child}return t;case 5:return Ym(t),e===null&&Zo(t),n=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,o=i.children,Ko(n,i)?o=null:a!==null&&Ko(n,a)&&(t.flags|=32),jh(e,t),He(e,t,o,r),t.child;case 6:return e===null&&Zo(t),null;case 13:return Nh(e,t,r);case 4:return lc(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Sn(t,null,n,r):He(e,t,n,r),t.child;case 11:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:wt(n,i),Mu(e,t,n,i,r);case 7:return He(e,t,t.pendingProps,r),t.child;case 8:return He(e,t,t.pendingProps.children,r),t.child;case 12:return He(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,he(Ji,n._currentValue),n._currentValue=o,a!==null)if(Et(a.value,o)){if(a.children===i.children&&!Ze.current){t=Jt(e,t,r);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var c=a.dependencies;if(c!==null){o=a.child;for(var l=c.firstContext;l!==null;){if(l.context===n){if(a.tag===1){l=Vt(-1,r&-r),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?l.next=l:(l.next=d.next,d.next=l),u.pending=l}}a.lanes|=r,l=a.alternate,l!==null&&(l.lanes|=r),el(a.return,r,t),c.lanes|=r;break}l=l.next}}else if(a.tag===10)o=a.type===t.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(M(341));o.lanes|=r,c=o.alternate,c!==null&&(c.lanes|=r),el(o,r,t),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===t){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}He(e,t,i.children,r),t=t.child}return t;case 9:return i=t.type,n=t.pendingProps.children,wn(t,r),i=gt(i),n=n(i),t.flags|=1,He(e,t,n,r),t.child;case 14:return n=t.type,i=wt(n,t.pendingProps),i=wt(n.type,i),Du(e,t,n,i,r);case 15:return bh(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,i=t.pendingProps,i=t.elementType===n?i:wt(n,i),Pi(e,t),t.tag=1,et(n)?(e=!0,Gi(t)):e=!1,wn(t,r),xh(t,n,i),rl(t,n,i,r),il(null,t,n,!0,e,r);case 19:return kh(e,t,r);case 22:return wh(e,t,r)}throw Error(M(156,t.tag))};function Uh(e,t){return fm(e,t)}function Ex(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function mt(e,t,r,n){return new Ex(e,t,r,n)}function _c(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Px(e){if(typeof e=="function")return _c(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Bl)return 11;if(e===ql)return 14}return 2}function vr(e,t){var r=e.alternate;return r===null?(r=mt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ri(e,t,r,n,i,a){var o=2;if(n=e,typeof e=="function")_c(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case an:return zr(r.children,i,a,t);case Ul:o=8,i|=8;break;case So:return e=mt(12,r,t,i|2),e.elementType=So,e.lanes=a,e;case Co:return e=mt(13,r,t,i),e.elementType=Co,e.lanes=a,e;case Eo:return e=mt(19,r,t,i),e.elementType=Eo,e.lanes=a,e;case Yd:return ja(r,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Qd:o=10;break e;case Jd:o=9;break e;case Bl:o=11;break e;case ql:o=14;break e;case sr:o=16,n=null;break e}throw Error(M(130,e==null?e:typeof e,""))}return t=mt(o,r,t,i),t.elementType=e,t.type=n,t.lanes=a,t}function zr(e,t,r,n){return e=mt(7,e,n,t),e.lanes=r,e}function ja(e,t,r,n){return e=mt(22,e,n,t),e.elementType=Yd,e.lanes=r,e.stateNode={isHidden:!1},e}function co(e,t,r){return e=mt(6,e,null,t),e.lanes=r,e}function uo(e,t,r){return t=mt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Tx(e,t,r,n,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wa(0),this.expirationTimes=Wa(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wa(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,r,n,i,a,o,c,l){return e=new Tx(e,t,r,c,l),t===1?(t=1,a===!0&&(t|=8)):t=0,a=mt(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},oc(a),e}function Ax(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:sn,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function Bh(e){if(!e)return jr;e=e._reactInternals;e:{if(Hr(e)!==e||e.tag!==1)throw Error(M(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(et(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(M(171))}if(e.tag===1){var r=e.type;if(et(r))return Bm(e,r,t)}return t}function qh(e,t,r,n,i,a,o,c,l){return e=Nc(r,n,!0,e,i,a,o,c,l),e.context=Bh(null),r=e.current,n=Ge(),i=xr(r),a=Vt(n,i),a.callback=t??null,pr(r,a,i),e.current.lanes=i,zs(e,i,n),tt(e,n),e}function _a(e,t,r,n){var i=t.current,a=Ge(),o=xr(i);return r=Bh(r),t.context===null?t.context=r:t.pendingContext=r,t=Vt(a,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=pr(i,t,o),e!==null&&(St(e,i,o,a),Si(e,i,o)),o}function aa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qu(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function kc(e,t){Qu(e,t),(e=e.alternate)&&Qu(e,t)}function Rx(){return null}var Wh=typeof reportError=="function"?reportError:function(e){console.error(e)};function Sc(e){this._internalRoot=e}Na.prototype.render=Sc.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(M(409));_a(e,t,null,null)};Na.prototype.unmount=Sc.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;qr(function(){_a(null,e,null,null)}),t[Kt]=null}};function Na(e){this._internalRoot=e}Na.prototype.unstable_scheduleHydration=function(e){if(e){var t=wm();e={blockedOn:null,target:e,priority:t};for(var r=0;r<ar.length&&t!==0&&t<ar[r].priority;r++);ar.splice(r,0,e),r===0&&_m(e)}};function Cc(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ka(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ju(){}function Ox(e,t,r,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=aa(o);a.call(u)}}var o=qh(t,n,e,0,null,!1,!1,"",Ju);return e._reactRootContainer=o,e[Kt]=o.current,Ns(e.nodeType===8?e.parentNode:e),qr(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof n=="function"){var c=n;n=function(){var u=aa(l);c.call(u)}}var l=Nc(e,0,!1,null,null,!1,!1,"",Ju);return e._reactRootContainer=l,e[Kt]=l.current,Ns(e.nodeType===8?e.parentNode:e),qr(function(){_a(t,l,r,n)}),l}function Sa(e,t,r,n,i){var a=r._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var c=i;i=function(){var l=aa(o);c.call(l)}}_a(t,o,e,i)}else o=Ox(r,t,e,i,n);return aa(o)}ym=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=ts(t.pendingLanes);r!==0&&(Hl(t,r|1),tt(t,Se()),!(ie&6)&&(Pn=Se()+500,Sr()))}break;case 13:qr(function(){var n=Qt(e,1);if(n!==null){var i=Ge();St(n,e,1,i)}}),kc(e,1)}};Gl=function(e){if(e.tag===13){var t=Qt(e,134217728);if(t!==null){var r=Ge();St(t,e,134217728,r)}kc(e,134217728)}};bm=function(e){if(e.tag===13){var t=xr(e),r=Qt(e,t);if(r!==null){var n=Ge();St(r,e,t,n)}kc(e,t)}};wm=function(){return oe};jm=function(e,t){var r=oe;try{return oe=e,t()}finally{oe=r}};zo=function(e,t,r){switch(t){case"input":if(Ao(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var i=ga(n);if(!i)throw Error(M(90));Zd(n),Ao(n,i)}}}break;case"textarea":tm(e,r);break;case"select":t=r.value,t!=null&&xn(e,!!r.multiple,t,!1)}};lm=bc;cm=qr;var Ix={usingClientEntryPoint:!1,Events:[Fs,un,ga,am,om,bc]},Kn={findFiberByHostInstance:Ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Lx={bundleType:Kn.bundleType,version:Kn.version,rendererPackageName:Kn.rendererPackageName,rendererConfig:Kn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Zt.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=mm(e),e===null?null:e.stateNode},findFiberByHostInstance:Kn.findFiberByHostInstance||Rx,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hi=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hi.isDisabled&&hi.supportsFiber)try{ma=hi.inject(Lx),Lt=hi}catch{}}ot.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ix;ot.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Cc(t))throw Error(M(200));return Ax(e,t,null,r)};ot.createRoot=function(e,t){if(!Cc(e))throw Error(M(299));var r=!1,n="",i=Wh;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,null,r,!1,n,i),e[Kt]=t.current,Ns(e.nodeType===8?e.parentNode:e),new Sc(t)};ot.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(M(188)):(e=Object.keys(e).join(","),Error(M(268,e)));return e=mm(t),e=e===null?null:e.stateNode,e};ot.flushSync=function(e){return qr(e)};ot.hydrate=function(e,t,r){if(!ka(t))throw Error(M(200));return Sa(null,e,t,!0,r)};ot.hydrateRoot=function(e,t,r){if(!Cc(e))throw Error(M(405));var n=r!=null&&r.hydratedSources||null,i=!1,a="",o=Wh;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(a=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=qh(t,null,e,1,r??null,i,!1,a,o),e[Kt]=t.current,Ns(e),n)for(e=0;e<n.length;e++)r=n[e],i=r._getVersion,i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i);return new Na(t)};ot.render=function(e,t,r){if(!ka(t))throw Error(M(200));return Sa(null,e,t,!1,r)};ot.unmountComponentAtNode=function(e){if(!ka(e))throw Error(M(40));return e._reactRootContainer?(qr(function(){Sa(null,null,e,!1,function(){e._reactRootContainer=null,e[Kt]=null})}),!0):!1};ot.unstable_batchedUpdates=bc;ot.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!ka(r))throw Error(M(200));if(e==null||e._reactInternals===void 0)throw Error(M(38));return Sa(e,t,r,!1,n)};ot.version="18.3.1-next-f1338f8080-20240426";function Vh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Vh)}catch(e){console.error(e)}}Vh(),Vd.exports=ot;var Mx=Vd.exports,Hh,Yu=Mx;Hh=Yu.createRoot,Yu.hydrateRoot;/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Xu="popstate";function Dx(e={}){function t(n,i){let{pathname:a,search:o,hash:c}=n.location;return xl("",{pathname:a,search:o,hash:c},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Os(i)}return $x(t,r,null,e)}function je(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Dt(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function zx(){return Math.random().toString(36).substring(2,10)}function Zu(e,t){return{usr:e.state,key:e.key,idx:t}}function xl(e,t,r=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Dn(t):t,state:r,key:t&&t.key||n||zx()}}function Os({pathname:e="/",search:t="",hash:r=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Dn(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substring(r),e=e.substring(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function $x(e,t,r,n={}){let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,c="POP",l=null,u=d();u==null&&(u=0,o.replaceState({...o.state,idx:u},""));function d(){return(o.state||{idx:null}).idx}function m(){c="POP";let w=d(),g=w==null?null:w-u;u=w,l&&l({action:c,location:v.location,delta:g})}function h(w,g){c="PUSH";let p=xl(v.location,w,g);u=d()+1;let f=Zu(p,u),x=v.createHref(p);try{o.pushState(f,"",x)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;i.location.assign(x)}a&&l&&l({action:c,location:v.location,delta:1})}function b(w,g){c="REPLACE";let p=xl(v.location,w,g);u=d();let f=Zu(p,u),x=v.createHref(p);o.replaceState(f,"",x),a&&l&&l({action:c,location:v.location,delta:0})}function j(w){return Fx(w)}let v={get action(){return c},get location(){return e(i,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return i.addEventListener(Xu,m),l=w,()=>{i.removeEventListener(Xu,m),l=null}},createHref(w){return t(i,w)},createURL:j,encodeLocation(w){let g=j(w);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:h,replace:b,go(w){return o.go(w)}};return v}function Fx(e,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),je(r,"No window.location.(origin|href) available to create URL");let n=typeof e=="string"?e:Os(e);return n=n.replace(/ $/,"%20"),!t&&n.startsWith("//")&&(n=r+n),new URL(n,r)}function Gh(e,t,r="/"){return Ux(e,t,r,!1)}function Ux(e,t,r,n){let i=typeof t=="string"?Dn(t):t,a=Yt(i.pathname||"/",r);if(a==null)return null;let o=Kh(e);Bx(o);let c=null;for(let l=0;c==null&&l<o.length;++l){let u=Zx(a);c=Yx(o[l],u,n)}return c}function Kh(e,t=[],r=[],n="",i=!1){let a=(o,c,l=i,u)=>{let d={relativePath:u===void 0?o.path||"":u,caseSensitive:o.caseSensitive===!0,childrenIndex:c,route:o};if(d.relativePath.startsWith("/")){if(!d.relativePath.startsWith(n)&&l)return;je(d.relativePath.startsWith(n),`Absolute route path "${d.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),d.relativePath=d.relativePath.slice(n.length)}let m=Ht([n,d.relativePath]),h=r.concat(d);o.children&&o.children.length>0&&(je(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${m}".`),Kh(o.children,t,h,m,l)),!(o.path==null&&!o.index)&&t.push({path:m,score:Qx(m,o.index),routesMeta:h})};return e.forEach((o,c)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))a(o,c);else for(let u of Qh(o.path))a(o,c,!0,u)}),t}function Qh(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=Qh(n.join("/")),c=[];return c.push(...o.map(l=>l===""?a:[a,l].join("/"))),i&&c.push(...o),c.map(l=>e.startsWith("/")&&l===""?"/":l)}function Bx(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:Jx(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}var qx=/^:[\w-]+$/,Wx=3,Vx=2,Hx=1,Gx=10,Kx=-2,ed=e=>e==="*";function Qx(e,t){let r=e.split("/"),n=r.length;return r.some(ed)&&(n+=Kx),t&&(n+=Vx),r.filter(i=>!ed(i)).reduce((i,a)=>i+(qx.test(a)?Wx:a===""?Hx:Gx),n)}function Jx(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function Yx(e,t,r=!1){let{routesMeta:n}=e,i={},a="/",o=[];for(let c=0;c<n.length;++c){let l=n[c],u=c===n.length-1,d=a==="/"?t:t.slice(a.length)||"/",m=oa({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},d),h=l.route;if(!m&&u&&r&&!n[n.length-1].route.index&&(m=oa({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},d)),!m)return null;Object.assign(i,m.params),o.push({params:i,pathname:Ht([a,m.pathname]),pathnameBase:n0(Ht([a,m.pathnameBase])),route:h}),m.pathnameBase!=="/"&&(a=Ht([a,m.pathnameBase]))}return o}function oa(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=Xx(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),c=i.slice(1);return{params:n.reduce((u,{paramName:d,isOptional:m},h)=>{if(d==="*"){let j=c[h]||"";o=a.slice(0,a.length-j.length).replace(/(.)\/+$/,"$1")}const b=c[h];return m&&!b?u[d]=void 0:u[d]=(b||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:e}}function Xx(e,t=!1,r=!0){Dt(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,l)=>(n.push({paramName:c,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function Zx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Dt(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Yt(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function e0(e,t="/"){let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Dn(e):e;return{pathname:r?r.startsWith("/")?r:t0(r,t):t,search:s0(n),hash:i0(i)}}function t0(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function mo(e,t,r,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function r0(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Jh(e){let t=r0(e);return t.map((r,n)=>n===t.length-1?r.pathname:r.pathnameBase)}function Yh(e,t,r,n=!1){let i;typeof e=="string"?i=Dn(e):(i={...e},je(!i.pathname||!i.pathname.includes("?"),mo("?","pathname","search",i)),je(!i.pathname||!i.pathname.includes("#"),mo("#","pathname","hash",i)),je(!i.search||!i.search.includes("#"),mo("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,c;if(o==null)c=r;else{let m=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),m-=1;i.pathname=h.join("/")}c=m>=0?t[m]:"/"}let l=e0(i,c),u=o&&o!=="/"&&o.endsWith("/"),d=(a||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||d)&&(l.pathname+="/"),l}var Ht=e=>e.join("/").replace(/\/\/+/g,"/"),n0=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),s0=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,i0=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function a0(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Xh=["POST","PUT","PATCH","DELETE"];new Set(Xh);var o0=["GET",...Xh];new Set(o0);var zn=y.createContext(null);zn.displayName="DataRouter";var Ca=y.createContext(null);Ca.displayName="DataRouterState";y.createContext(!1);var Zh=y.createContext({isTransitioning:!1});Zh.displayName="ViewTransition";var l0=y.createContext(new Map);l0.displayName="Fetchers";var c0=y.createContext(null);c0.displayName="Await";var zt=y.createContext(null);zt.displayName="Navigation";var Bs=y.createContext(null);Bs.displayName="Location";var er=y.createContext({outlet:null,matches:[],isDataRoute:!1});er.displayName="Route";var Ec=y.createContext(null);Ec.displayName="RouteError";function u0(e,{relative:t}={}){je(qs(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:n}=y.useContext(zt),{hash:i,pathname:a,search:o}=Ws(e,{relative:t}),c=a;return r!=="/"&&(c=a==="/"?r:Ht([r,a])),n.createHref({pathname:c,search:o,hash:i})}function qs(){return y.useContext(Bs)!=null}function Pt(){return je(qs(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Bs).location}var ef="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function tf(e){y.useContext(zt).static||y.useLayoutEffect(e)}function Ea(){let{isDataRoute:e}=y.useContext(er);return e?_0():d0()}function d0(){je(qs(),"useNavigate() may be used only in the context of a <Router> component.");let e=y.useContext(zn),{basename:t,navigator:r}=y.useContext(zt),{matches:n}=y.useContext(er),{pathname:i}=Pt(),a=JSON.stringify(Jh(n)),o=y.useRef(!1);return tf(()=>{o.current=!0}),y.useCallback((l,u={})=>{if(Dt(o.current,ef),!o.current)return;if(typeof l=="number"){r.go(l);return}let d=Yh(l,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(d.pathname=d.pathname==="/"?t:Ht([t,d.pathname])),(u.replace?r.replace:r.push)(d,u.state,u)},[t,r,a,i,e])}y.createContext(null);function Ws(e,{relative:t}={}){let{matches:r}=y.useContext(er),{pathname:n}=Pt(),i=JSON.stringify(Jh(r));return y.useMemo(()=>Yh(e,JSON.parse(i),n,t==="path"),[e,i,n,t])}function m0(e,t){return rf(e,t)}function rf(e,t,r,n,i){var p;je(qs(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=y.useContext(zt),{matches:o}=y.useContext(er),c=o[o.length-1],l=c?c.params:{},u=c?c.pathname:"/",d=c?c.pathnameBase:"/",m=c&&c.route;{let f=m&&m.path||"";nf(u,!m||f.endsWith("*")||f.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${f}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${f}"> to <Route path="${f==="/"?"*":`${f}/*`}">.`)}let h=Pt(),b;if(t){let f=typeof t=="string"?Dn(t):t;je(d==="/"||((p=f.pathname)==null?void 0:p.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${f.pathname}" was given in the \`location\` prop.`),b=f}else b=h;let j=b.pathname||"/",v=j;if(d!=="/"){let f=d.replace(/^\//,"").split("/");v="/"+j.replace(/^\//,"").split("/").slice(f.length).join("/")}let w=Gh(e,{pathname:v});Dt(m||w!=null,`No routes matched location "${b.pathname}${b.search}${b.hash}" `),Dt(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${b.pathname}${b.search}${b.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=x0(w&&w.map(f=>Object.assign({},f,{params:Object.assign({},l,f.params),pathname:Ht([d,a.encodeLocation?a.encodeLocation(f.pathname).pathname:f.pathname]),pathnameBase:f.pathnameBase==="/"?d:Ht([d,a.encodeLocation?a.encodeLocation(f.pathnameBase).pathname:f.pathnameBase])})),o,r,n,i);return t&&g?y.createElement(Bs.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...b},navigationType:"POP"}},g):g}function h0(){let e=j0(),t=a0(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=y.createElement(y.Fragment,null,y.createElement("p",null," Hey developer "),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:a},"ErrorBoundary")," or"," ",y.createElement("code",{style:a},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},t),r?y.createElement("pre",{style:i},r):null,o)}var f0=y.createElement(h0,null),p0=class extends y.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?y.createElement(er.Provider,{value:this.props.routeContext},y.createElement(Ec.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function g0({routeContext:e,match:t,children:r}){let n=y.useContext(zn);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),y.createElement(er.Provider,{value:e},r)}function x0(e,t=[],r=null,n=null,i=null){if(e==null){if(!r)return null;if(r.errors)e=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let a=e,o=r==null?void 0:r.errors;if(o!=null){let u=a.findIndex(d=>d.route.id&&(o==null?void 0:o[d.route.id])!==void 0);je(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let c=!1,l=-1;if(r)for(let u=0;u<a.length;u++){let d=a[u];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=u),d.route.id){let{loaderData:m,errors:h}=r,b=d.route.loader&&!m.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||b){c=!0,l>=0?a=a.slice(0,l+1):a=[a[0]];break}}}return a.reduceRight((u,d,m)=>{let h,b=!1,j=null,v=null;r&&(h=o&&d.route.id?o[d.route.id]:void 0,j=d.route.errorElement||f0,c&&(l<0&&m===0?(nf("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),b=!0,v=null):l===m&&(b=!0,v=d.route.hydrateFallbackElement||null)));let w=t.concat(a.slice(0,m+1)),g=()=>{let p;return h?p=j:b?p=v:d.route.Component?p=y.createElement(d.route.Component,null):d.route.element?p=d.route.element:p=u,y.createElement(g0,{match:d,routeContext:{outlet:u,matches:w,isDataRoute:r!=null},children:p})};return r&&(d.route.ErrorBoundary||d.route.errorElement||m===0)?y.createElement(p0,{location:r.location,revalidation:r.revalidation,component:j,error:h,children:g(),routeContext:{outlet:null,matches:w,isDataRoute:!0},unstable_onError:n}):g()},null)}function Pc(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function v0(e){let t=y.useContext(zn);return je(t,Pc(e)),t}function y0(e){let t=y.useContext(Ca);return je(t,Pc(e)),t}function b0(e){let t=y.useContext(er);return je(t,Pc(e)),t}function Tc(e){let t=b0(e),r=t.matches[t.matches.length-1];return je(r.route.id,`${e} can only be used on routes that contain a unique "id"`),r.route.id}function w0(){return Tc("useRouteId")}function j0(){var n;let e=y.useContext(Ec),t=y0("useRouteError"),r=Tc("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[r]}function _0(){let{router:e}=v0("useNavigate"),t=Tc("useNavigate"),r=y.useRef(!1);return tf(()=>{r.current=!0}),y.useCallback(async(i,a={})=>{Dt(r.current,ef),r.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var td={};function nf(e,t,r){!t&&!td[e]&&(td[e]=!0,Dt(!1,r))}y.memo(N0);function N0({routes:e,future:t,state:r,unstable_onError:n}){return rf(e,void 0,r,n,t)}function yt(e){je(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function k0({basename:e="/",children:t=null,location:r,navigationType:n="POP",navigator:i,static:a=!1}){je(!qs(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),c=y.useMemo(()=>({basename:o,navigator:i,static:a,future:{}}),[o,i,a]);typeof r=="string"&&(r=Dn(r));let{pathname:l="/",search:u="",hash:d="",state:m=null,key:h="default"}=r,b=y.useMemo(()=>{let j=Yt(l,o);return j==null?null:{location:{pathname:j,search:u,hash:d,state:m,key:h},navigationType:n}},[o,l,u,d,m,h,n]);return Dt(b!=null,`<Router basename="${o}"> is not able to match the URL "${l}${u}${d}" because it does not start with the basename, so the <Router> won't render anything.`),b==null?null:y.createElement(zt.Provider,{value:c},y.createElement(Bs.Provider,{children:t,value:b}))}function S0({children:e,location:t}){return m0(vl(e),t)}function vl(e,t=[]){let r=[];return y.Children.forEach(e,(n,i)=>{if(!y.isValidElement(n))return;let a=[...t,i];if(n.type===y.Fragment){r.push.apply(r,vl(n.props.children,a));return}je(n.type===yt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),je(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=vl(n.props.children,a)),r.push(o)}),r}var Oi="get",Ii="application/x-www-form-urlencoded";function Pa(e){return e!=null&&typeof e.tagName=="string"}function C0(e){return Pa(e)&&e.tagName.toLowerCase()==="button"}function E0(e){return Pa(e)&&e.tagName.toLowerCase()==="form"}function P0(e){return Pa(e)&&e.tagName.toLowerCase()==="input"}function T0(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function A0(e,t){return e.button===0&&(!t||t==="_self")&&!T0(e)}var fi=null;function R0(){if(fi===null)try{new FormData(document.createElement("form"),0),fi=!1}catch{fi=!0}return fi}var O0=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ho(e){return e!=null&&!O0.has(e)?(Dt(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ii}"`),null):e}function I0(e,t){let r,n,i,a,o;if(E0(e)){let c=e.getAttribute("action");n=c?Yt(c,t):null,r=e.getAttribute("method")||Oi,i=ho(e.getAttribute("enctype"))||Ii,a=new FormData(e)}else if(C0(e)||P0(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||c.getAttribute("action");if(n=l?Yt(l,t):null,r=e.getAttribute("formmethod")||c.getAttribute("method")||Oi,i=ho(e.getAttribute("formenctype"))||ho(c.getAttribute("enctype"))||Ii,a=new FormData(c,e),!R0()){let{name:u,type:d,value:m}=e;if(d==="image"){let h=u?`${u}.`:"";a.append(`${h}x`,"0"),a.append(`${h}y`,"0")}else u&&a.append(u,m)}}else{if(Pa(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=Oi,n=null,i=Ii,o=e}return a&&i==="text/plain"&&(o=a,a=void 0),{action:n,method:r.toLowerCase(),encType:i,formData:a,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ac(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function L0(e,t,r){let n=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return n.pathname==="/"?n.pathname=`_root.${r}`:t&&Yt(n.pathname,t)==="/"?n.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${r}`,n}async function M0(e,t){if(e.id in t)return t[e.id];try{let r=await import(e.module);return t[e.id]=r,r}catch(r){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function D0(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function z0(e,t,r){let n=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let o=await M0(a,r);return o.links?o.links():[]}return[]}));return B0(n.flat(1).filter(D0).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function rd(e,t,r,n,i,a){let o=(l,u)=>r[u]?l.route.id!==r[u].route.id:!0,c=(l,u)=>{var d;return r[u].pathname!==l.pathname||((d=r[u].route.path)==null?void 0:d.endsWith("*"))&&r[u].params["*"]!==l.params["*"]};return a==="assets"?t.filter((l,u)=>o(l,u)||c(l,u)):a==="data"?t.filter((l,u)=>{var m;let d=n.routes[l.route.id];if(!d||!d.hasLoader)return!1;if(o(l,u)||c(l,u))return!0;if(l.route.shouldRevalidate){let h=l.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((m=r[0])==null?void 0:m.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function $0(e,t,{includeHydrateFallback:r}={}){return F0(e.map(n=>{let i=t.routes[n.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),r&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function F0(e){return[...new Set(e)]}function U0(e){let t={},r=Object.keys(e).sort();for(let n of r)t[n]=e[n];return t}function B0(e,t){let r=new Set;return new Set(t),e.reduce((n,i)=>{let a=JSON.stringify(U0(i));return r.has(a)||(r.add(a),n.push({key:a,link:i})),n},[])}function sf(){let e=y.useContext(zn);return Ac(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function q0(){let e=y.useContext(Ca);return Ac(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Rc=y.createContext(void 0);Rc.displayName="FrameworkContext";function af(){let e=y.useContext(Rc);return Ac(e,"You must render this element inside a <HydratedRouter> element"),e}function W0(e,t){let r=y.useContext(Rc),[n,i]=y.useState(!1),[a,o]=y.useState(!1),{onFocus:c,onBlur:l,onMouseEnter:u,onMouseLeave:d,onTouchStart:m}=t,h=y.useRef(null);y.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let v=g=>{g.forEach(p=>{o(p.isIntersecting)})},w=new IntersectionObserver(v,{threshold:.5});return h.current&&w.observe(h.current),()=>{w.disconnect()}}},[e]),y.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let b=()=>{i(!0)},j=()=>{i(!1),o(!1)};return r?e!=="intent"?[a,h,{}]:[a,h,{onFocus:Qn(c,b),onBlur:Qn(l,j),onMouseEnter:Qn(u,b),onMouseLeave:Qn(d,j),onTouchStart:Qn(m,b)}]:[!1,h,{}]}function Qn(e,t){return r=>{e&&e(r),r.defaultPrevented||t(r)}}function V0({page:e,...t}){let{router:r}=sf(),n=y.useMemo(()=>Gh(r.routes,e,r.basename),[r.routes,e,r.basename]);return n?y.createElement(G0,{page:e,matches:n,...t}):null}function H0(e){let{manifest:t,routeModules:r}=af(),[n,i]=y.useState([]);return y.useEffect(()=>{let a=!1;return z0(e,t,r).then(o=>{a||i(o)}),()=>{a=!0}},[e,t,r]),n}function G0({page:e,matches:t,...r}){let n=Pt(),{manifest:i,routeModules:a}=af(),{basename:o}=sf(),{loaderData:c,matches:l}=q0(),u=y.useMemo(()=>rd(e,t,l,i,n,"data"),[e,t,l,i,n]),d=y.useMemo(()=>rd(e,t,l,i,n,"assets"),[e,t,l,i,n]),m=y.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let j=new Set,v=!1;if(t.forEach(g=>{var f;let p=i.routes[g.route.id];!p||!p.hasLoader||(!u.some(x=>x.route.id===g.route.id)&&g.route.id in c&&((f=a[g.route.id])!=null&&f.shouldRevalidate)||p.hasClientLoader?v=!0:j.add(g.route.id))}),j.size===0)return[];let w=L0(e,o,"data");return v&&j.size>0&&w.searchParams.set("_routes",t.filter(g=>j.has(g.route.id)).map(g=>g.route.id).join(",")),[w.pathname+w.search]},[o,c,n,i,u,t,e,a]),h=y.useMemo(()=>$0(d,i),[d,i]),b=H0(d);return y.createElement(y.Fragment,null,m.map(j=>y.createElement("link",{key:j,rel:"prefetch",as:"fetch",href:j,...r})),h.map(j=>y.createElement("link",{key:j,rel:"modulepreload",href:j,...r})),b.map(({key:j,link:v})=>y.createElement("link",{key:j,nonce:r.nonce,...v})))}function K0(...e){return t=>{e.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var of=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{of&&(window.__reactRouterVersion="7.9.1")}catch{}function Q0({basename:e,children:t,window:r}){let n=y.useRef();n.current==null&&(n.current=Dx({window:r,v5Compat:!0}));let i=n.current,[a,o]=y.useState({action:i.action,location:i.location}),c=y.useCallback(l=>{y.startTransition(()=>o(l))},[o]);return y.useLayoutEffect(()=>i.listen(c),[i,c]),y.createElement(k0,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var lf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ue=y.forwardRef(function({onClick:t,discover:r="render",prefetch:n="none",relative:i,reloadDocument:a,replace:o,state:c,target:l,to:u,preventScrollReset:d,viewTransition:m,...h},b){let{basename:j}=y.useContext(zt),v=typeof u=="string"&&lf.test(u),w,g=!1;if(typeof u=="string"&&v&&(w=u,of))try{let S=new URL(window.location.href),A=u.startsWith("//")?new URL(S.protocol+u):new URL(u),$=Yt(A.pathname,j);A.origin===S.origin&&$!=null?u=$+A.search+A.hash:g=!0}catch{Dt(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let p=u0(u,{relative:i}),[f,x,_]=W0(n,h),C=Z0(u,{replace:o,state:c,target:l,preventScrollReset:d,relative:i,viewTransition:m});function k(S){t&&t(S),S.defaultPrevented||C(S)}let N=y.createElement("a",{...h,..._,href:w||p,onClick:g||a?t:k,ref:K0(b,x),target:l,"data-discover":!v&&r==="render"?"true":void 0});return f&&!v?y.createElement(y.Fragment,null,N,y.createElement(V0,{page:p})):N});Ue.displayName="Link";var J0=y.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:n="",end:i=!1,style:a,to:o,viewTransition:c,children:l,...u},d){let m=Ws(o,{relative:u.relative}),h=Pt(),b=y.useContext(Ca),{navigator:j,basename:v}=y.useContext(zt),w=b!=null&&sv(m)&&c===!0,g=j.encodeLocation?j.encodeLocation(m).pathname:m.pathname,p=h.pathname,f=b&&b.navigation&&b.navigation.location?b.navigation.location.pathname:null;r||(p=p.toLowerCase(),f=f?f.toLowerCase():null,g=g.toLowerCase()),f&&v&&(f=Yt(f,v)||f);const x=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let _=p===g||!i&&p.startsWith(g)&&p.charAt(x)==="/",C=f!=null&&(f===g||!i&&f.startsWith(g)&&f.charAt(g.length)==="/"),k={isActive:_,isPending:C,isTransitioning:w},N=_?t:void 0,S;typeof n=="function"?S=n(k):S=[n,_?"active":null,C?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let A=typeof a=="function"?a(k):a;return y.createElement(Ue,{...u,"aria-current":N,className:S,ref:d,style:A,to:o,viewTransition:c},typeof l=="function"?l(k):l)});J0.displayName="NavLink";var Y0=y.forwardRef(({discover:e="render",fetcherKey:t,navigate:r,reloadDocument:n,replace:i,state:a,method:o=Oi,action:c,onSubmit:l,relative:u,preventScrollReset:d,viewTransition:m,...h},b)=>{let j=rv(),v=nv(c,{relative:u}),w=o.toLowerCase()==="get"?"get":"post",g=typeof c=="string"&&lf.test(c),p=f=>{if(l&&l(f),f.defaultPrevented)return;f.preventDefault();let x=f.nativeEvent.submitter,_=(x==null?void 0:x.getAttribute("formmethod"))||o;j(x||f.currentTarget,{fetcherKey:t,method:_,navigate:r,replace:i,state:a,relative:u,preventScrollReset:d,viewTransition:m})};return y.createElement("form",{ref:b,method:w,action:v,onSubmit:n?l:p,...h,"data-discover":!g&&e==="render"?"true":void 0})});Y0.displayName="Form";function X0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function cf(e){let t=y.useContext(zn);return je(t,X0(e)),t}function Z0(e,{target:t,replace:r,state:n,preventScrollReset:i,relative:a,viewTransition:o}={}){let c=Ea(),l=Pt(),u=Ws(e,{relative:a});return y.useCallback(d=>{if(A0(d,t)){d.preventDefault();let m=r!==void 0?r:Os(l)===Os(u);c(e,{replace:m,state:n,preventScrollReset:i,relative:a,viewTransition:o})}},[l,c,u,r,n,t,e,i,a,o])}var ev=0,tv=()=>`__${String(++ev)}__`;function rv(){let{router:e}=cf("useSubmit"),{basename:t}=y.useContext(zt),r=w0();return y.useCallback(async(n,i={})=>{let{action:a,method:o,encType:c,formData:l,body:u}=I0(n,t);if(i.navigate===!1){let d=i.fetcherKey||tv();await e.fetch(d,r,i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||c,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:l,body:u,formMethod:i.method||o,formEncType:i.encType||c,replace:i.replace,state:i.state,fromRouteId:r,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,r])}function nv(e,{relative:t}={}){let{basename:r}=y.useContext(zt),n=y.useContext(er);je(n,"useFormAction must be used inside a RouteContext");let[i]=n.matches.slice(-1),a={...Ws(e||".",{relative:t})},o=Pt();if(e==null){a.search=o.search;let c=new URLSearchParams(a.search),l=c.getAll("index");if(l.some(d=>d==="")){c.delete("index"),l.filter(m=>m).forEach(m=>c.append("index",m));let d=c.toString();a.search=d?`?${d}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(a.pathname=a.pathname==="/"?r:Ht([r,a.pathname])),Os(a)}function sv(e,{relative:t}={}){let r=y.useContext(Zh);je(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=cf("useViewTransitionState"),i=Ws(e,{relative:t});if(!r.isTransitioning)return!1;let a=Yt(r.currentLocation.pathname,n)||r.currentLocation.pathname,o=Yt(r.nextLocation.pathname,n)||r.nextLocation.pathname;return oa(i.pathname,o)!=null||oa(i.pathname,a)!=null}const iv="modulepreload",av=function(e){return"/"+e},nd={},Vs=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(r.map(l=>{if(l=av(l),l in nd)return;nd[l]=!0;const u=l.endsWith(".css"),d=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${d}`))return;const m=document.createElement("link");if(m.rel=u?"stylesheet":iv,u||(m.as="script"),m.crossOrigin="",m.href=l,c&&m.setAttribute("nonce",c),document.head.appendChild(m),u)return new Promise((h,b)=>{m.addEventListener("load",h),m.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&a(c.reason);return t().catch(a)})},ov=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>$n);return{default:n}},[]).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Oc extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class lv extends Oc{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class sd extends Oc{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class id extends Oc{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var yl;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(yl||(yl={}));var cv=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};class uv{constructor(t,{headers:r={},customFetch:n,region:i=yl.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=ov(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return cv(this,void 0,void 0,function*(){try{const{headers:i,method:a,body:o}=r;let c={},{region:l}=r;l||(l=this.region);const u=new URL(`${this.url}/${t}`);l&&l!=="any"&&(c["x-region"]=l,u.searchParams.set("forceFunctionRegion",l));let d;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(c["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(c["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(c["Content-Type"]="application/json",d=JSON.stringify(o)));const m=yield this.fetch(u.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},c),this.headers),i),body:d}).catch(v=>{throw new lv(v)}),h=m.headers.get("x-relay-error");if(h&&h==="true")throw new sd(m);if(!m.ok)throw new id(m);let b=((n=m.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),j;return b==="application/json"?j=yield m.json():b==="application/octet-stream"?j=yield m.blob():b==="text/event-stream"?j=m:b==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(i){return{data:null,error:i,response:i instanceof id||i instanceof sd?i.context:void 0}}})}}var Ye={},Ic={},Ta={},Hs={},Aa={},Ra={},dv=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Tn=dv();const mv=Tn.fetch,uf=Tn.fetch.bind(Tn),df=Tn.Headers,hv=Tn.Request,fv=Tn.Response,$n=Object.freeze(Object.defineProperty({__proto__:null,Headers:df,Request:hv,Response:fv,default:uf,fetch:mv},Symbol.toStringTag,{value:"Module"})),pv=up($n);var Oa={};Object.defineProperty(Oa,"__esModule",{value:!0});let gv=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Oa.default=gv;var mf=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ra,"__esModule",{value:!0});const xv=mf(pv),vv=mf(Oa);let yv=class{constructor(t){var r,n;this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=new Headers(t.headers),this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=(r=t.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=t.signal,this.isMaybeSingle=(n=t.isMaybeSingle)!==null&&n!==void 0?n:!1,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=xv.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=new Headers(this.headers),this.headers.set(t,r),this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const n=this.fetch;let i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,c,l,u;let d=null,m=null,h=null,b=a.status,j=a.statusText;if(a.ok){if(this.method!=="HEAD"){const p=await a.text();p===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((o=this.headers.get("Accept"))===null||o===void 0)&&o.includes("application/vnd.pgrst.plan+text"))?m=p:m=JSON.parse(p))}const w=(c=this.headers.get("Prefer"))===null||c===void 0?void 0:c.match(/count=(exact|planned|estimated)/),g=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");w&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(m)&&(m.length>1?(d={code:"PGRST116",details:`Results contain ${m.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},m=null,h=null,b=406,j="Not Acceptable"):m.length===1?m=m[0]:m=null)}else{const w=await a.text();try{d=JSON.parse(w),Array.isArray(d)&&a.status===404&&(m=[],d=null,b=200,j="OK")}catch{a.status===404&&w===""?(b=204,j="No Content"):d={message:w}}if(d&&this.isMaybeSingle&&(!((u=d==null?void 0:d.details)===null||u===void 0)&&u.includes("0 rows"))&&(d=null,b=200,j="OK"),d&&this.shouldThrowOnError)throw new vv.default(d)}return{error:d,data:m,count:h,status:b,statusText:j}});return this.shouldThrowOnError||(i=i.catch(a=>{var o,c,l;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(c=a==null?void 0:a.stack)!==null&&c!==void 0?c:""}`,hint:"",code:`${(l=a==null?void 0:a.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,r)}returns(){return this}overrideTypes(){return this}};Ra.default=yv;var bv=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Aa,"__esModule",{value:!0});const wv=bv(Ra);let jv=class extends wv.default{select(t){let r=!1;const n=(t??"*").split("").map(i=>/\s/.test(i)&&!r?"":(i==='"'&&(r=!r),i)).join("");return this.url.searchParams.set("select",n),this.headers.append("Prefer","return=representation"),this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:i,referencedTable:a=i}={}){const o=a?`${a}.order`:"order",c=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${c?`${c},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:i=n}={}){const a=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(a,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:i=!1,wal:a=!1,format:o="text"}={}){var c;const l=[t?"analyze":null,r?"verbose":null,n?"settings":null,i?"buffers":null,a?"wal":null].filter(Boolean).join("|"),u=(c=this.headers.get("Accept"))!==null&&c!==void 0?c:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${o}; for="${u}"; options=${l};`),o==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(t){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${t}`),this}};Aa.default=jv;var _v=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Hs,"__esModule",{value:!0});const Nv=_v(Aa);let kv=class extends Nv.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:i}={}){let a="";i==="plain"?a="pl":i==="phrase"?a="ph":i==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${a}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Hs.default=kv;var Sv=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ta,"__esModule",{value:!0});const Jn=Sv(Hs);let Cv=class{constructor(t,{headers:r={},schema:n,fetch:i}){this.url=t,this.headers=new Headers(r),this.schema=n,this.fetch=i}select(t,{head:r=!1,count:n}={}){const i=r?"HEAD":"GET";let a=!1;const o=(t??"*").split("").map(c=>/\s/.test(c)&&!a?"":(c==='"'&&(a=!a),c)).join("");return this.url.searchParams.set("select",o),n&&this.headers.append("Prefer",`count=${n}`),new Jn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var i;const a="POST";if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const o=t.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(o.length>0){const c=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",c.join(","))}}return new Jn.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:i,defaultToNull:a=!0}={}){var o;const c="POST";if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),r!==void 0&&this.url.searchParams.set("on_conflict",r),i&&this.headers.append("Prefer",`count=${i}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const l=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(l.length>0){const u=[...new Set(l)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new Jn.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}update(t,{count:r}={}){var n;const i="PATCH";return r&&this.headers.append("Prefer",`count=${r}`),new Jn.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:(n=this.fetch)!==null&&n!==void 0?n:fetch})}delete({count:t}={}){var r;const n="DELETE";return t&&this.headers.append("Prefer",`count=${t}`),new Jn.default({method:n,url:this.url,headers:this.headers,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch})}};Ta.default=Cv;var hf=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ic,"__esModule",{value:!0});const Ev=hf(Ta),Pv=hf(Hs);let Tv=class ff{constructor(t,{headers:r={},schema:n,fetch:i}={}){this.url=t,this.headers=new Headers(r),this.schemaName=n,this.fetch=i}from(t){const r=new URL(`${this.url}/${t}`);return new Ev.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new ff(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:i=!1,count:a}={}){var o;let c;const l=new URL(`${this.url}/rpc/${t}`);let u;n||i?(c=n?"HEAD":"GET",Object.entries(r).filter(([m,h])=>h!==void 0).map(([m,h])=>[m,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([m,h])=>{l.searchParams.append(m,h)})):(c="POST",u=r);const d=new Headers(this.headers);return a&&d.set("Prefer",`count=${a}`),new Pv.default({method:c,url:l,headers:d,schema:this.schemaName,body:u,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}};Ic.default=Tv;var Fn=pt&&pt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ye,"__esModule",{value:!0});Ye.PostgrestError=Ye.PostgrestBuilder=Ye.PostgrestTransformBuilder=Ye.PostgrestFilterBuilder=Ye.PostgrestQueryBuilder=Ye.PostgrestClient=void 0;const pf=Fn(Ic);Ye.PostgrestClient=pf.default;const gf=Fn(Ta);Ye.PostgrestQueryBuilder=gf.default;const xf=Fn(Hs);Ye.PostgrestFilterBuilder=xf.default;const vf=Fn(Aa);Ye.PostgrestTransformBuilder=vf.default;const yf=Fn(Ra);Ye.PostgrestBuilder=yf.default;const bf=Fn(Oa);Ye.PostgrestError=bf.default;var Av=Ye.default={PostgrestClient:pf.default,PostgrestQueryBuilder:gf.default,PostgrestFilterBuilder:xf.default,PostgrestTransformBuilder:vf.default,PostgrestBuilder:yf.default,PostgrestError:bf.default};const{PostgrestClient:Rv,PostgrestQueryBuilder:t1,PostgrestFilterBuilder:r1,PostgrestTransformBuilder:n1,PostgrestBuilder:s1,PostgrestError:i1}=Av;class Ov{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Iv="2.15.5",Lv=`realtime-js/${Iv}`,Mv="1.0.0",bl=1e4,Dv=1e3,zv=100;var hs;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(hs||(hs={}));var Te;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Te||(Te={}));var _t;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(_t||(_t={}));var wl;(function(e){e.websocket="websocket"})(wl||(wl={}));var Or;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Or||(Or={}));class $v{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const c=n.decode(t.slice(o,o+i));o=o+i;const l=n.decode(t.slice(o,o+a));o=o+a;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:c,event:l,payload:u}}}let wf=class{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var me;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(me||(me={}));const ad=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((a,o)=>(a[o]=Fv(o,e,t,i),a),{})},Fv=(e,t,r,n)=>{const i=t.find(c=>c.name===e),a=i==null?void 0:i.type,o=r[e];return a&&!n.includes(a)?jf(a,o):jl(o)},jf=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return Wv(t,r)}switch(e){case me.bool:return Uv(t);case me.float4:case me.float8:case me.int2:case me.int4:case me.int8:case me.numeric:case me.oid:return Bv(t);case me.json:case me.jsonb:return qv(t);case me.timestamp:return Vv(t);case me.abstime:case me.date:case me.daterange:case me.int4range:case me.int8range:case me.money:case me.reltime:case me.text:case me.time:case me.timestamptz:case me.timetz:case me.tsrange:case me.tstzrange:return jl(t);default:return jl(t)}},jl=e=>e,Uv=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Bv=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},qv=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},Wv=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(c=>jf(t,c))}return e},Vv=e=>typeof e=="string"?e.replace(" ","T"):e,_f=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class fo{constructor(t,r,n={},i=bl){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var od;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(od||(od={}));class fs{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.joinRef=this.channel._joinRef(),this.state=fs.syncState(this.state,i,a,o),this.pendingDiffs.forEach(l=>{this.state=fs.syncDiff(this.state,l,a,o)}),this.pendingDiffs=[],c()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:c}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=fs.syncDiff(this.state,i,a,o),c())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),o=this.transformState(r),c={},l={};return this.map(a,(u,d)=>{o[u]||(l[u]=d)}),this.map(o,(u,d)=>{const m=a[u];if(m){const h=d.map(w=>w.presence_ref),b=m.map(w=>w.presence_ref),j=d.filter(w=>b.indexOf(w.presence_ref)<0),v=m.filter(w=>h.indexOf(w.presence_ref)<0);j.length>0&&(c[u]=j),v.length>0&&(l[u]=v)}else c[u]=d}),this.syncDiff(a,{joins:c,leaves:l},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(c,l)=>{var u;const d=(u=t[c])!==null&&u!==void 0?u:[];if(t[c]=this.cloneDeep(l),d.length>0){const m=t[c].map(b=>b.presence_ref),h=d.filter(b=>m.indexOf(b.presence_ref)<0);t[c].unshift(...h)}n(c,d,l)}),this.map(o,(c,l)=>{let u=t[c];if(!u)return;const d=l.map(m=>m.presence_ref);u=u.filter(m=>d.indexOf(m.presence_ref)<0),t[c]=u,i(c,u,l),u.length===0&&delete t[c]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var ld;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(ld||(ld={}));var ps;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ps||(ps={}));var Ut;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ut||(Ut={}));class Lc{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Te.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new fo(this,_t.join,this.params,this.timeout),this.rejoinTimer=new wf(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Te.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Te.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Te.errored,this.rejoinTimer.scheduleTimeout())}),this._on(_t.reply,{},(i,a)=>{this._trigger(this._replyEventName(a),i)}),this.presence=new fs(this),this.broadcastEndpointURL=_f(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Te.closed){const{config:{broadcast:o,presence:c,private:l}}=this.params,u=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(b=>b.filter))!==null&&i!==void 0?i:[],d=!!this.bindings[ps.PRESENCE]&&this.bindings[ps.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,m={},h={broadcast:o,presence:Object.assign(Object.assign({},c),{enabled:d}),postgres_changes:u,private:l};this.socket.accessTokenValue&&(m.access_token=this.socket.accessTokenValue),this._onError(b=>t==null?void 0:t(Ut.CHANNEL_ERROR,b)),this._onClose(()=>t==null?void 0:t(Ut.CLOSED)),this.updateJoinPayload(Object.assign({config:h},m)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:b})=>{var j;if(this.socket.setAuth(),b===void 0){t==null||t(Ut.SUBSCRIBED);return}else{const v=this.bindings.postgres_changes,w=(j=v==null?void 0:v.length)!==null&&j!==void 0?j:0,g=[];for(let p=0;p<w;p++){const f=v[p],{filter:{event:x,schema:_,table:C,filter:k}}=f,N=b&&b[p];if(N&&N.event===x&&N.schema===_&&N.table===C&&N.filter===k)g.push(Object.assign(Object.assign({},f),{id:N.id}));else{this.unsubscribe(),this.state=Te.errored,t==null||t(Ut.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=g,t&&t(Ut.SUBSCRIBED);return}}).receive("error",b=>{this.state=Te.errored,t==null||t(Ut.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(b).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ut.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Te.joined&&t===ps.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){const{event:a,payload:o}=t,l={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,l,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=u.body)===null||i===void 0?void 0:i.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,c,l;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((l=(c=(o=this.params)===null||o===void 0?void 0:o.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&a("ok"),u.receive("ok",()=>a("ok")),u.receive("error",()=>a("error")),u.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Te.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(_t.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new fo(this,_t.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Te.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new fo(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>zv){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const o=t.toLocaleLowerCase(),{close:c,error:l,leave:u,join:d}=_t;if(n&&[c,l,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(b=>{var j,v,w;return((j=b.filter)===null||j===void 0?void 0:j.event)==="*"||((w=(v=b.filter)===null||v===void 0?void 0:v.event)===null||w===void 0?void 0:w.toLocaleLowerCase())===o}).map(b=>b.callback(h,n)):(a=this.bindings[o])===null||a===void 0||a.filter(b=>{var j,v,w,g,p,f;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in b){const x=b.id,_=(j=b.filter)===null||j===void 0?void 0:j.event;return x&&((v=r.ids)===null||v===void 0?void 0:v.includes(x))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((w=r.data)===null||w===void 0?void 0:w.type.toLocaleLowerCase()))}else{const x=(p=(g=b==null?void 0:b.filter)===null||g===void 0?void 0:g.event)===null||p===void 0?void 0:p.toLocaleLowerCase();return x==="*"||x===((f=r==null?void 0:r.event)===null||f===void 0?void 0:f.toLocaleLowerCase())}else return b.type.toLocaleLowerCase()===o}).map(b=>{if(typeof h=="object"&&"ids"in h){const j=h.data,{schema:v,table:w,commit_timestamp:g,type:p,errors:f}=j;h=Object.assign(Object.assign({},{schema:v,table:w,commit_timestamp:g,eventType:p,new:{},old:{},errors:f}),this._getPayloadRecords(j))}b.callback(h,n)})}_isClosed(){return this.state===Te.closed}_isJoined(){return this.state===Te.joined}_isJoining(){return this.state===Te.joining}_isLeaving(){return this.state===Te.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&Lc.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(_t.close,{},t)}_onError(t){this._on(_t.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Te.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=ad(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=ad(t.columns,t.old_record)),r}}const po=()=>{},pi={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},Hv=[1e3,2e3,5e3,1e4],Gv=1e4,Kv=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Qv{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=bl,this.transport=null,this.heartbeatIntervalMs=pi.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=po,this.ref=0,this.reconnectTimer=null,this.logger=po,this.conn=null,this.sendBuffer=[],this.serializer=new $v,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>Vs(async()=>{const{default:c}=await Promise.resolve().then(()=>$n);return{default:c}},void 0).then(({default:c})=>c(...o)).catch(c=>{throw new Error(`Failed to load @supabase/node-fetch: ${c.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${wl.websocket}`,this.httpEndpoint=_f(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ov.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Mv}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case hs.connecting:return Or.Connecting;case hs.open:return Or.Open;case hs.closing:return Or.Closing;default:return Or.Closed}}isConnected(){return this.connectionState()===Or.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new Lc(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,o=()=>{this.encode(t,c=>{var l;(l=this.conn)===null||l===void 0||l.send(c)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Dv,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},pi.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(u){this.log("error","error in heartbeat callback",u)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,c=o?`(${o})`:"",l=a.status||"";this.log("receive",`${l} ${n} ${i} ${c}`.trim(),a),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(_t.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([Kv],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Lv};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(_t.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new wf(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},pi.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,o,c,l,u,d;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:bl,this.heartbeatIntervalMs=(i=t==null?void 0:t.heartbeatIntervalMs)!==null&&i!==void 0?i:pi.HEARTBEAT_INTERVAL,this.worker=(a=t==null?void 0:t.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(c=t==null?void 0:t.heartbeatCallback)!==null&&c!==void 0?c:po,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:m=>Hv[m-1]||Gv,this.encode=(u=t==null?void 0:t.encode)!==null&&u!==void 0?u:(m,h)=>h(JSON.stringify(m)),this.decode=(d=t==null?void 0:t.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Mc extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function Ae(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class Jv extends Mc{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _l extends Mc{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var Yv=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};const Nf=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>$n);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},Xv=()=>Yv(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Vs(()=>Promise.resolve().then(()=>$n),void 0)).Response:Response}),Nl=e=>{if(Array.isArray(e))return e.map(r=>Nl(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=Nl(n)}),t},Zv=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Gr=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};const go=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ey=(e,t,r)=>Gr(void 0,void 0,void 0,function*(){const n=yield Xv();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(i=>{const a=e.status||500,o=(i==null?void 0:i.statusCode)||a+"";t(new Jv(go(i),a,o))}).catch(i=>{t(new _l(go(i),i))}):t(new _l(go(e),e))}),ty=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?i:(Zv(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),i.body=JSON.stringify(n)):i.body=n,t!=null&&t.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Gs(e,t,r,n,i,a){return Gr(this,void 0,void 0,function*(){return new Promise((o,c)=>{e(r,ty(t,n,i,a)).then(l=>{if(!l.ok)throw l;return n!=null&&n.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>ey(l,c,n))})})}function la(e,t,r,n){return Gr(this,void 0,void 0,function*(){return Gs(e,"GET",t,r,n)})}function Ot(e,t,r,n,i){return Gr(this,void 0,void 0,function*(){return Gs(e,"POST",t,n,i,r)})}function kl(e,t,r,n,i){return Gr(this,void 0,void 0,function*(){return Gs(e,"PUT",t,n,i,r)})}function ry(e,t,r,n){return Gr(this,void 0,void 0,function*(){return Gs(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function kf(e,t,r,n,i){return Gr(this,void 0,void 0,function*(){return Gs(e,"DELETE",t,n,i,r)})}var We=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};const ny={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},cd={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class sy{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=Nf(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return We(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},cd),i);let c=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),l&&a.append("metadata",this.encodeMetadata(l))):(a=n,c["cache-control"]=`max-age=${o.cacheControl}`,c["content-type"]=o.contentType,l&&(c["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i!=null&&i.headers&&(c=Object.assign(Object.assign({},c),i.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),m=yield(t=="PUT"?kl:Ot)(this.fetch,`${this.url}/object/${d}`,a,Object.assign({headers:c},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:m.Id,fullPath:m.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Ae(a))return{data:null,error:a};throw a}})}upload(t,r,n){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return We(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),c=new URL(this.url+`/object/upload/sign/${o}`);c.searchParams.set("token",r);try{let l;const u=Object.assign({upsert:cd.upsert},i),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",u.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",u.cacheControl)):(l=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const m=yield kl(this.fetch,c.toString(),l,{headers:d});return{data:{path:a,fullPath:m.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(Ae(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,r){return We(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r!=null&&r.upsert&&(i["x-upsert"]="true");const a=yield Ot(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),c=o.searchParams.get("token");if(!c)throw new Mc("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:c},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}update(t,r,n){return We(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return We(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ae(i))return{data:null,error:i};throw i}})}copy(t,r,n){return We(this,void 0,void 0,function*(){try{return{data:{path:(yield Ot(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ae(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return We(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield Ot(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ae(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return We(this,void 0,void 0,function*(){try{const i=yield Ot(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ae(i))return{data:null,error:i};throw i}})}download(t,r){return We(this,void 0,void 0,function*(){const i=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=a?`?${a}`:"";try{const c=this._getFinalPath(t);return{data:yield(yield la(this.fetch,`${this.url}/${i}/${c}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Ae(c))return{data:null,error:c};throw c}})}info(t){return We(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield la(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Nl(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}exists(t){return We(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield ry(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n)&&n instanceof _l){const i=n.originalError;if([400,404].includes(i==null?void 0:i.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const c=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});l!==""&&i.push(l);let u=i.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${c}/public/${n}${u}`)}}}remove(t){return We(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}list(t,r,n){return We(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},ny),r),{prefix:t||""});return{data:yield Ot(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Ae(i))return{data:null,error:i};throw i}})}listV2(t,r){return We(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Ot(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const iy="2.12.1",ay={"X-Client-Info":`storage-js/${iy}`};var Yr=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};class oy{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i!=null&&i.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href,this.headers=Object.assign(Object.assign({},ay),r),this.fetch=Nf(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Yr(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Ae(t))return{data:null,error:t};throw t}})}getBucket(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield la(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Yr(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Yr(this,void 0,void 0,function*(){try{return{data:yield kl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Ae(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield Ot(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Yr(this,void 0,void 0,function*(){try{return{data:yield kf(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Ae(r))return{data:null,error:r};throw r}})}}class ly extends oy{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new sy(this.url,this.headers,t,this.fetch)}}const cy="2.57.4";let ns="";typeof Deno<"u"?ns="deno":typeof document<"u"?ns="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ns="react-native":ns="node";const uy={"X-Client-Info":`supabase-js-${ns}/${cy}`},dy={headers:uy},my={schema:"public"},hy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fy={};var py=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};const gy=e=>{let t;return e?t=e:typeof fetch>"u"?t=uf:t=fetch,(...r)=>t(...r)},xy=()=>typeof Headers>"u"?df:Headers,vy=(e,t,r)=>{const n=gy(r),i=xy();return(a,o)=>py(void 0,void 0,void 0,function*(){var c;const l=(c=yield t())!==null&&c!==void 0?c:e;let u=new i(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${l}`),n(a,Object.assign(Object.assign({},o),{headers:u}))})};var yy=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};function by(e){return e.endsWith("/")?e:e+"/"}function wy(e,t){var r,n;const{db:i,auth:a,realtime:o,global:c}=e,{db:l,auth:u,realtime:d,global:m}=t,h={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},u),a),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},m),c),{headers:Object.assign(Object.assign({},(r=m==null?void 0:m.headers)!==null&&r!==void 0?r:{}),(n=c==null?void 0:c.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>yy(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}function jy(e){const t=e==null?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(by(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Sf="2.71.1",rn=30*1e3,Sl=3,xo=Sl*rn,_y="http://localhost:9999",Ny="supabase.auth.token",ky={"X-Client-Info":`gotrue-js/${Sf}`},Cl="X-Supabase-Api-Version",Cf={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Sy=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Cy=10*60*1e3;class Dc extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Z(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class Ey extends Dc{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Py(e){return Z(e)&&e.name==="AuthApiError"}class Ef extends Dc{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Cr extends Dc{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class nr extends Cr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Ty(e){return Z(e)&&e.name==="AuthSessionMissingError"}class gi extends Cr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class xi extends Cr{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class vi extends Cr{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Ay(e){return Z(e)&&e.name==="AuthImplicitGrantRedirectError"}class ud extends Cr{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class El extends Cr{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function vo(e){return Z(e)&&e.name==="AuthRetryableFetchError"}class dd extends Cr{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Pl extends Cr{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const ca="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),md=` 	
\r=`.split(""),Ry=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<md.length;t+=1)e[md[t].charCodeAt(0)]=-2;for(let t=0;t<ca.length;t+=1)e[ca[t].charCodeAt(0)]=t;return e})();function hd(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ca[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(ca[n]),t.queuedBits-=6}}function Pf(e,t,r){const n=Ry[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function fd(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{Ly(o,n,r)};for(let o=0;o<e.length;o+=1)Pf(e.charCodeAt(o),i,a);return t.join("")}function Oy(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function Iy(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}Oy(n,t)}}function Ly(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function My(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)Pf(e.charCodeAt(i),r,n);return new Uint8Array(t)}function Dy(e){const t=[];return Iy(e,r=>t.push(r)),new Uint8Array(t)}function zy(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>hd(i,r,n)),hd(null,r,n),t.join("")}function $y(e){return Math.round(Date.now()/1e3)+e}function Fy(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const bt=()=>typeof window<"u"&&typeof document<"u",Er={tested:!1,writable:!1},Tf=()=>{if(!bt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Er.tested)return Er.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Er.tested=!0,Er.writable=!0}catch{Er.tested=!0,Er.writable=!1}return Er.writable};function Uy(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const Af=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Vs(async()=>{const{default:n}=await Promise.resolve().then(()=>$n);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},By=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",nn=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Pr=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},rr=async(e,t)=>{await e.removeItem(t)};class Ia{constructor(){this.promise=new Ia.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Ia.promiseConstructor=Promise;function yo(e){const t=e.split(".");if(t.length!==3)throw new Pl("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!Sy.test(t[n]))throw new Pl("JWT not in base64url format");return{header:JSON.parse(fd(t[0])),payload:JSON.parse(fd(t[1])),signature:My(t[2]),raw:{header:t[0],payload:t[1]}}}async function qy(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function Wy(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function Vy(e){return("0"+e.toString(16)).substr(-2)}function Hy(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,Vy).join("")}async function Gy(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function Ky(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await Gy(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Xr(e,t,r=!1){const n=Hy();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await nn(e,`${t}-code-verifier`,i);const a=await Ky(n);return[a,n===a?"plain":"s256"]}const Qy=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jy(e){const t=e.headers.get(Cl);if(!t||!t.match(Qy))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function Yy(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function Xy(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Zy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Zr(e){if(!Zy.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function bo(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function pd(e){return JSON.parse(JSON.stringify(e))}var eb=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};const Rr=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),tb=[502,503,504];async function gd(e){var t;if(!By(e))throw new El(Rr(e),0);if(tb.includes(e.status))throw new El(Rr(e),e.status);let r;try{r=await e.json()}catch(a){throw new Ef(Rr(a),a)}let n;const i=Jy(e);if(i&&i.getTime()>=Cf["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new dd(Rr(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new nr}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new dd(Rr(r),e.status,r.weak_password.reasons);throw new Ey(Rr(r),e.status||500,n)}const rb=(e,t,r,n)=>{const i={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function re(e,t,r,n){var i;const a=Object.assign({},n==null?void 0:n.headers);a[Cl]||(a[Cl]=Cf["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n==null?void 0:n.query)!==null&&i!==void 0?i:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const c=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=await nb(e,t,r+c,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(l):{data:Object.assign({},l),error:null}}async function nb(e,t,r,n,i,a){const o=rb(t,n,i,a);let c;try{c=await e(r,Object.assign({},o))}catch(l){throw console.error(l),new El(Rr(l),0)}if(c.ok||await gd(c),n!=null&&n.noResolveJson)return c;try{return await c.json()}catch(l){await gd(l)}}function $t(e){var t;let r=null;ob(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=$y(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function xd(e){const t=$t(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function lr(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function sb(e){return{data:e,error:null}}function ib(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,o=eb(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),c={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},l=Object.assign({},o);return{data:{properties:c,user:l},error:null}}function ab(e){return e}function ob(e){return e.access_token&&e.refresh_token&&e.expires_in}const wo=["global","local","others"];var lb=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r};class cb{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=Af(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=wo[0]){if(wo.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wo.join(", ")}`);try{return await re(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await re(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:lr})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=lb(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n==null?void 0:n.newEmail,delete i.newEmail),await re(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:ib,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await re(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:lr})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,o,c,l;try{const u={nextPage:null,lastPage:0,total:0},d=await re(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t==null?void 0:t.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:ab});if(d.error)throw d.error;const m=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,b=(l=(c=d.headers.get("link"))===null||c===void 0?void 0:c.split(","))!==null&&l!==void 0?l:[];return b.length>0&&(b.forEach(j=>{const v=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),w=JSON.parse(j.split(";")[1].split("=")[1]);u[`${w}Page`]=v}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},m),u),error:null}}catch(u){if(Z(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Zr(t);try{return await re(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:lr})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Zr(t);try{return await re(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:lr})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Zr(t);try{return await re(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:lr})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Zr(t.userId);try{const{data:r,error:n}=await re(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Zr(t.userId),Zr(t.id);try{return{data:await re(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}}function vd(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function ub(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const en={debug:!!(globalThis&&Tf()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Rf extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class db extends Rf{}async function mb(e,t,r){en.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),en.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){en.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{en.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw en.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new db(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(en.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}ub();const hb={url:_y,storageKey:Ny,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ky,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function yd(e,t,r){return await r()}const tn={};class Is{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Is.nextInstanceID,Is.nextInstanceID+=1,this.instanceID>0&&bt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},hb),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new cb({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Af(i.fetch),this.lock=i.lock||yd,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:bt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=mb:this.lock=yd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(i.storage?this.storage=i.storage:Tf()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=vd(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=vd(this.memoryStorage)),bt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=tn[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){tn[this.storageKey]=Object.assign(Object.assign({},tn[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=tn[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){tn[this.storageKey]=Object.assign(Object.assign({},tn[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Sf}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=Uy(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),bt()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),Ay(a)){const l=(t=a.details)===null||t===void 0?void 0:t.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:c}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",c),await this._saveSession(o),setTimeout(async()=>{c==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Z(r)?{error:r}:{error:new Ef("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t==null?void 0:t.options)===null||i===void 0?void 0:i.captchaToken}},xform:$t}),{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:d,password:m,options:h}=t;let b=null,j=null;this.flowType==="pkce"&&([b,j]=await Xr(this.storage,this.storageKey)),a=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:m,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:b,code_challenge_method:j},xform:$t})}else if("phone"in t){const{phone:d,password:m,options:h}=t;a=await re(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:m,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(i=h==null?void 0:h.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:$t})}else throw new xi("You must provide either an email or phone number and a password");const{data:o,error:c}=a;if(c||!o)return{data:{user:null,session:null},error:c};const l=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:c}=t;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:xd})}else if("phone"in t){const{phone:a,password:o,options:c}=t;r=await re(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken}},xform:xd})}else throw new xi("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new gi}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,i,a,o,c,l,u,d,m,h,b;let j,v;if("message"in t)j=t.message,v=t.signature;else{const{chain:w,wallet:g,statement:p,options:f}=t;let x;if(bt())if(typeof g=="object")x=g;else{const C=window;if("solana"in C&&typeof C.solana=="object"&&("signIn"in C.solana&&typeof C.solana.signIn=="function"||"signMessage"in C.solana&&typeof C.solana.signMessage=="function"))x=C.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(f!=null&&f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=g}const _=new URL((r=f==null?void 0:f.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in x&&x.signIn){const C=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},f==null?void 0:f.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),p?{statement:p}:null));let k;if(Array.isArray(C)&&C[0]&&typeof C[0]=="object")k=C[0];else if(C&&typeof C=="object"&&"signedMessage"in C&&"signature"in C)k=C;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)j=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),v=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in x)||typeof x.signMessage!="function"||!("publicKey"in x)||typeof x!="object"||!x.publicKey||!("toBase58"in x.publicKey)||typeof x.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${_.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...p?["",p,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(i=(n=f==null?void 0:f.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=f==null?void 0:f.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...!((o=f==null?void 0:f.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...!((c=f==null?void 0:f.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...!((l=f==null?void 0:f.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...!((u=f==null?void 0:f.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...!((m=(d=f==null?void 0:f.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||m===void 0)&&m.length?["Resources",...f.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const C=await x.signMessage(new TextEncoder().encode(j),"utf8");if(!C||!(C instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=C}}try{const{data:w,error:g}=await re(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:zy(v)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(b=t.options)===null||b===void 0?void 0:b.captchaToken}}:null),xform:$t});if(g)throw g;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new gi}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:g})}catch(w){if(Z(w))return{data:{user:null,session:null},error:w};throw w}}async _exchangeCodeForSession(t){const r=await Pr(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await re(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:$t});if(await rr(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new gi}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Z(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=t,c=await re(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:$t}),{data:l,error:u}=c;return u?{data:{user:null,session:null},error:u}:!l||!l.session||!l.user?{data:{user:null,session:null},error:new gi}:(l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),{data:l,error:u})}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,o;try{if("email"in t){const{email:c,options:l}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await Xr(this.storage,this.storageKey));const{error:m}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(r=l==null?void 0:l.data)!==null&&r!==void 0?r:{},create_user:(n=l==null?void 0:l.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:l==null?void 0:l.emailRedirectTo});return{data:{user:null,session:null},error:m}}if("phone"in t){const{phone:c,options:l}=t,{data:u,error:d}=await re(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(i=l==null?void 0:l.data)!==null&&i!==void 0?i:{},create_user:(a=l==null?void 0:l.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken},channel:(o=l==null?void 0:l.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new xi("You must provide either an email or phone number.")}catch(c){if(Z(c))return{data:{user:null,session:null},error:c};throw c}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:c}=await re(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:$t});if(c)throw c;if(!o)throw new Error("An error occurred on token verification.");const l=o.session,u=o.user;return l!=null&&l.access_token&&(await this._saveSession(l),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),{data:{user:u,session:l},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Xr(this.storage,this.storageKey)),await re(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t==null?void 0:t.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:sb})}catch(a){if(Z(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new nr;const{error:i}=await re(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Z(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:o}=await re(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:o,error:c}=await re(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:c}}throw new xi("You must provide either an email or phone number and a type")}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Pr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xo:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Pr(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=bo()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(l,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(l,u,d))})}return{data:{session:t},error:null}}const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:lr}):await this._useSession(async r=>{var n,i,a;const{data:o,error:c}=r;if(c)throw c;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new nr}:await re(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:lr})})}catch(r){if(Z(r))return Ty(r)&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new nr;const o=i.session;let c=null,l=null;this.flowType==="pkce"&&t.email!=null&&([c,l]=await Xr(this.storage,this.storageKey));const{data:u,error:d}=await re(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:c,code_challenge_method:l}),jwt:o.access_token,xform:lr});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new nr;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=yo(t.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{session:c,error:l}=await this._callRefreshToken(t.refresh_token);if(l)return{data:{user:null,session:null},error:l};if(!c)return{data:{user:null,session:null},error:null};a=c}else{const{data:c,error:l}=await this._getUser(t.access_token);if(l)throw l;a={access_token:t.access_token,refresh_token:t.refresh_token,user:c.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:c}=r;if(c)throw c;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new nr;const{session:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!bt())throw new vi("No browser detected.");if(t.error||t.error_description||t.error_code)throw new vi(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ud("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new vi("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new ud("No code detected.");const{data:p,error:f}=await this._exchangeCodeForSession(t.code);if(f)throw f;const x=new URL(window.location.href);return x.searchParams.delete("code"),window.history.replaceState(window.history.state,"",x.toString()),{data:{session:p.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:c,expires_at:l,token_type:u}=t;if(!a||!c||!o||!u)throw new vi("No session defined in URL");const d=Math.round(Date.now()/1e3),m=parseInt(c);let h=d+m;l&&(h=parseInt(l));const b=h-d;b*1e3<=rn&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${b}s, should have been closer to ${m}s`);const j=h-m;d-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,h,d):d-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,h,d);const{data:v,error:w}=await this._getUser(a);if(w)throw w;const g={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:m,expires_at:h,refresh_token:o,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:t.type},error:null}}catch(n){if(Z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Pr(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:c}=await this.admin.signOut(o,t);if(c&&!(Py(c)&&(c.status===404||c.status===401||c.status===403)))return{error:c}}return t!=="others"&&(await this._removeSession(),await rr(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=Fy(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Xr(this.storage,this.storageKey,!0));try{return await re(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Z(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,c,l,u,d;const{data:m,error:h}=a;if(h)throw h;const b=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(c=t.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=t.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return await re(this.fetch,"GET",b,{headers:this.headers,jwt:(d=(u=m.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(i)throw i;return bt()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Z(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await re(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await Wy(async i=>(i>0&&await qy(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await re(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:$t})),(i,a)=>{const o=200*Math.pow(2,i);return a&&vo(a)&&Date.now()+o-n<rn})}catch(n){if(this._debug(r,"error",n),Z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),bt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await Pr(this.storage,this.storageKey);if(i&&this.userStorage){let o=await Pr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await nn(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:bo()}else if(i&&!i.user&&!i.user){const o=await Pr(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(i.user=o.user,await rr(this.storage,this.storageKey+"-user"),await nn(this.storage,this.storageKey,i)):i.user=bo()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xo;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${xo}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),vo(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:c}=await this._getUser(i.access_token);!c&&(o!=null&&o.user)?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new nr;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new Ia;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new nr;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const c={session:a.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(a){if(this._debug(i,"error",a),Z(a)){const o={session:null,error:a};return vo(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async c=>{try{await c.callback(t,r)}catch(l){a.push(l)}});if(await Promise.all(o),a.length>0){for(let c=0;c<a.length;c+=1)console.error(a[c]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await nn(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=pd(i);await nn(this.storage,this.storageKey,a)}else{const i=pd(r);await nn(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await rr(this.storage,this.storageKey),await rr(this.storage,this.storageKey+"-code-verifier"),await rr(this.storage,this.storageKey+"-user"),this.userStorage&&await rr(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&bt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),rn);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/rn);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${rn}ms, refresh threshold is ${Sl} ticks`),i<=Sl&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof Rf)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!bt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Xr(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(c.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await re(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const c=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:l,error:u}=await re(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((i=l==null?void 0:l.totp)===null||i===void 0)&&i.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),{data:l,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const{data:o,error:c}=await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return c?{data:null,error:c}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:c})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await re(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],i=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:i,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=yo(i.access_token);let c=null;o.aal&&(c=o.aal);let l=c;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(m=>m.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(l="aal2");const d=o.amr||[];return{data:{currentLevel:c,nextLevel:l,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(c=>c.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(c=>c.kid===t),n&&this.jwks_cached_at+Cy>i)return n;const{data:a,error:o}=await re(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(c=>c.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:b,error:j}=await this.getSession();if(j||!b.session)return{data:null,error:j};n=b.session.access_token}const{header:i,payload:a,signature:o,raw:{header:c,payload:l}}=yo(n);r!=null&&r.allowExpired||Yy(a.exp);const u=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:b}=await this.getUser(n);if(b)throw b;return{data:{claims:a,header:i,signature:o},error:null}}const d=Xy(i.alg),m=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,m,o,Dy(`${c}.${l}`)))throw new Pl("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}}Is.nextInstanceID=0;const fb=Is;class pb extends fb{constructor(t){super(t)}}var gb=function(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function c(d){try{u(n.next(d))}catch(m){o(m)}}function l(d){try{u(n.throw(d))}catch(m){o(m)}}function u(d){d.done?a(d.value):i(d.value).then(c,l)}u((n=n.apply(e,t||[])).next())})};class xb{constructor(t,r,n){var i,a,o;this.supabaseUrl=t,this.supabaseKey=r;const c=jy(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:my,realtime:fy,auth:Object.assign(Object.assign({},hy),{storageKey:l}),global:dy},d=wy(n??{},u);this.storageKey=(i=d.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=d.global.headers)!==null&&a!==void 0?a:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(m,h)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(h)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=d.auth)!==null&&o!==void 0?o:{},this.headers,d.global.fetch),this.fetch=vy(r,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new Rv(new URL("rest/v1",c).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new ly(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new uv(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return gb(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:c,lock:l,debug:u},d,m){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new pb({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:c,lock:l,debug:u,fetch:m,hasCustomAuthorizationHeader:Object.keys(this.headers).some(b=>b.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new Qv(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const vb=(e,t,r)=>new xb(e,t,r);function yb(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}yb()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const bb="https://yqaxowxnvstvvtklqcfu.supabase.co",wb="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlxYXhvd3hudnN0dnZ0a2xxY2Z1Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMTQ2NzgsImV4cCI6MjA3MzY5MDY3OH0.CXmuUmuRy0AM4qXu7xRDZyNV78E4EHowIXqm6INcxSk",J=vb(bb,wb),Of=y.createContext(void 0),ct=()=>{const e=y.useContext(Of);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e},jb=({children:e})=>{const[t,r]=y.useState(null),[n,i]=y.useState(null),[a,o]=y.useState(!0),[c,l]=y.useState(!1),[u,d]=y.useState(!1),m=async g=>{try{d(!0);const{data:p,error:f}=await J.rpc("is_admin",{user_email:g});f?(console.error("Error checking admin status:",f),l(!1)):l(p||!1)}catch(p){console.error("Error checking admin status:",p),l(!1)}finally{d(!1)}};y.useEffect(()=>{J.auth.getSession().then(({data:{session:p}})=>{var f;i(p),r((p==null?void 0:p.user)??null),o(!1),(f=p==null?void 0:p.user)!=null&&f.email?m(p.user.email):(l(!1),d(!1))});const{data:{subscription:g}}=J.auth.onAuthStateChange((p,f)=>{var x;i(f),r((f==null?void 0:f.user)??null),o(!1),(x=f==null?void 0:f.user)!=null&&x.email?m(f.user.email):(l(!1),d(!1))});return()=>g.unsubscribe()},[]);const w={user:t,session:n,loading:a,isAdmin:c,adminLoading:u,signUp:async(g,p,f)=>{const{error:x}=await J.auth.signUp({email:g,password:p,options:{emailRedirectTo:`${window.location.origin}`,data:{full_name:f}}});return{error:x}},signIn:async(g,p)=>{const{error:f}=await J.auth.signInWithPassword({email:g,password:p});return{error:f}},signInWithGoogle:async()=>{const{error:g}=await J.auth.signInWithOAuth({provider:"google",options:{redirectTo:`${window.location.origin}`}});return{error:g}},signOut:async()=>{const{error:g}=await J.auth.signOut();return{error:g}}};return s.jsx(Of.Provider,{value:w,children:e})},If=y.createContext(void 0),Ks=()=>{const e=y.useContext(If);if(!e)throw new Error("useCart must be used within a CartProvider");return e},_b=({children:e})=>{const[t,r]=y.useState([]),[n,i]=y.useState(null),[a,o]=y.useState(!1),{user:c}=ct(),l=v=>{r(w=>w.find(p=>v.pricing_type==="by_weight"?p.id===v.id&&p.weight_grams===v.weight_grams:p.id===v.id)?w.map(p=>p.id===v.id&&(v.pricing_type!=="by_weight"||p.weight_grams===v.weight_grams)?{...p,quantity:p.quantity+1}:p):[...w,{...v,quantity:1}])},u=(v,w)=>{r(g=>g.filter(p=>p.id!==v?!0:typeof w=="number"?p.weight_grams!==w:!1))},d=(v,w,g)=>{if(w===0){u(v,g);return}r(p=>p.map(f=>f.id!==v||typeof g=="number"&&f.weight_grams!==g?f:{...f,quantity:w}))},m=()=>{r([]),i(null)},h=t.reduce((v,w)=>v+w.price*w.quantity,0),b=t.reduce((v,w)=>v+w.quantity,0),j=async()=>{if(!c||h===0){i(null);return}try{o(!0);const{data:v,error:w}=await J.rpc("preview_discount",{user_uuid:c.id,cart_total:h});w?(console.error("Errore nel calcolo dello sconto:",w),i(null)):i(v)}catch(v){console.error("Errore nella chiamata preview_discount:",v),i(null)}finally{o(!1)}};return y.useEffect(()=>{c&&h>0?j():i(null)},[c,h]),s.jsx(If.Provider,{value:{items:t,addItem:l,removeItem:u,updateQuantity:d,clearCart:m,total:h,itemsCount:b,discountInfo:n,discountLoading:a,refreshDiscount:j},children:e})},Lf=y.createContext(void 0),Kr=()=>{const e=y.useContext(Lf);if(e===void 0)throw new Error("useDish must be used within a DishProvider");return e},Nb=({children:e})=>{const[t,r]=y.useState([]),[n,i]=y.useState([]),[a,o]=y.useState([]),[c,l]=y.useState(!1),[u,d]=y.useState(!1),[m,h]=y.useState(null),b=y.useCallback(async()=>{try{l(!0);const{data:N}=await J.from("dishes").select("id").limit(1);if(N&&N.length>0)return;const S=[{name:"Spaghetti alla Carbonara",description:"Pasta tradizionale romana con guanciale, uova, pecorino e pepe nero",price:12.5,category:"primi",allergens:["glutine","uova","latte"],tags:["tradizionale","romano"],available:!0,limited_quantity:!1,image_url:"https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?w=400"},{name:"Risotto ai Funghi Porcini",description:"Cremoso risotto con funghi porcini freschi e parmigiano reggiano",price:14,category:"primi",allergens:["latte"],tags:["vegetariano","stagionale"],available:!0,limited_quantity:!0,image_url:"https://images.unsplash.com/photo-1476124369491-e7addf5db371?w=400"},{name:"Branzino in Crosta di Sale",description:"Branzino fresco cotto in crosta di sale con erbe mediterranee",price:18,category:"secondi",allergens:["pesce"],tags:["fresco","mediterraneo"],available:!0,limited_quantity:!1,image_url:"https://images.unsplash.com/photo-1544943910-4c1dc44aab44?w=400"},{name:"Antipasto della Casa",description:"Selezione di salumi, formaggi, olive e verdure grigliate",price:16,category:"antipasti",allergens:["latte"],tags:["condivisione","tradizionale"],available:!0,limited_quantity:!1,image_url:"https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=400"},{name:"Tiramis della Nonna",description:"Dolce tradizionale con mascarpone, caff e cacao amaro",price:6.5,category:"contorni",allergens:["glutine","uova","latte"],tags:["tradizionale","fatto in casa"],available:!0,limited_quantity:!1,image_url:"https://images.unsplash.com/photo-1571877227200-a0d98ea607e9?w=400"}],{data:A,error:$}=await J.from("dishes").insert(S).select();if($){console.error("Errore nell'inserimento dei piatti di esempio:",$);const I=S.map((ee,se)=>({...ee,id:`mock-${se}`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}));r(I);const q=I.map(ee=>({id:`assignment-${ee.id}`,dish_id:ee.id,is_available:!0,created_at:new Date().toISOString(),dish:ee}));o(q)}else if(await j(),A&&A.length>0){const I=A.map(ee=>({dish_id:ee.id,is_available:!0})),{error:q}=await J.from("menu_fisso").insert(I);q?console.error("Errore nell'assegnazione al menu fisso:",q):await x("fixed")}}catch(N){console.error("Errore nell'inizializzazione:",N);const S=[{id:"mock-1",name:"Spaghetti alla Carbonara",description:"Pasta tradizionale romana con guanciale, uova, pecorino e pepe nero",price:12.5,category:"primi",allergens:["glutine","uova","latte"],tags:["tradizionale","romano"],available:!0,limited_quantity:!1,image_url:"https://images.unsplash.com/photo-1621996346565-e3dbc353d2e5?w=400",created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"mock-2",name:"Antipasto della Casa",description:"Selezione di salumi, formaggi, olive e verdure grigliate",price:16,category:"antipasti",allergens:["latte"],tags:["condivisione","tradizionale"],available:!0,limited_quantity:!1,image_url:"https://images.unsplash.com/photo-1571997478779-2adcbbe9ab2f?w=400",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}];r(S)}finally{l(!1)}},[]),j=y.useCallback(async()=>{try{l(!0),h(null);const{data:N,error:S}=await J.from("dishes").select("*").order("category",{ascending:!0}).order("name",{ascending:!0});if(S){console.error("Errore nel caricamento dei piatti:",S),await b();return}if(!N||N.length===0){await b();return}r(N)}catch(N){console.error("Errore nella fetch:",N),h("Errore nel caricamento dei piatti"),await b()}finally{l(!1)}},[b]),v=y.useCallback(async N=>{try{console.log("Adding dish with data:",N);const{data:S,error:A}=await J.from("dishes").insert([N]).select().single();if(console.log("Supabase response:",{data:S,error:A}),A)throw console.error("Supabase error:",A),new Error(`Database error: ${A.message}`);if(!S)throw new Error("No data returned from database");r($=>[...$,S]),console.log("Dish added successfully:",S)}catch(S){throw console.error("Error adding dish:",S),S}},[]),w=y.useCallback(async(N,S)=>{try{const{data:A,error:$}=await J.from("dishes").update({...S,updated_at:new Date().toISOString()}).eq("id",N).select().single();if($)throw $;r(I=>I.map(q=>q.id===N?A:q))}catch(A){throw console.error("Error updating dish:",A),A}},[]),g=y.useCallback(async N=>{try{const{error:S}=await J.from("dishes").delete().eq("id",N);if(S)throw S;r(A=>A.filter($=>$.id!==N))}catch(S){throw console.error("Error deleting dish:",S),S}},[]),p=y.useCallback(N=>t.filter(S=>S.category===N),[t]),f=y.useCallback(()=>t.filter(N=>N.available!==!1),[t]),x=y.useCallback(async N=>{try{l(!0),h(null);const S=N==="daily"?"menu_del_giorno":"menu_fisso";let A=`
        id,
        dish_id,
        is_available,
        created_at,
        dish:dishes(*)
      `;N==="daily"&&(A=`
          id,
          dish_id,
          is_available,
          created_at,
          date,
          dish:dishes(*)
        `);const{data:$,error:I}=await J.from(S).select(A).order("created_at",{ascending:!1});if(I){if(I.code==="42P01"){console.log(`Table ${S} does not exist yet`),N==="daily"?i([]):o([]);return}throw I}$&&(N==="daily"?i($):o($))}catch(S){console.error(`Error fetching ${N} menu dishes:`,S),h(`Errore nel caricamento del menu ${N==="daily"?"del giorno":"fisso"}`)}finally{l(!1)}},[]),_=y.useCallback(async(N,S)=>{try{d(!0),h(null),console.log(`Adding dish ${N} to ${S} menu`);const A=S==="daily"?"menu_del_giorno":"menu_fisso",$={dish_id:N,is_available:!0,...S==="daily"&&{date:new Date().toISOString().split("T")[0]}};let I=`
        id,
        dish_id,
        is_available,
        created_at,
        dish:dishes(*)
      `;S==="daily"&&(I=`
          id,
          dish_id,
          is_available,
          created_at,
          date,
          dish:dishes(*)
        `);const{data:q,error:ee}=await J.from(A).insert($).select(I).single();if(ee)throw console.error("Insert error:",ee),ee;console.log("Assignment created successfully:",q),q&&(S==="daily"?i(se=>[...se,q]):o(se=>[...se,q]),console.log(`Dish added to ${S} menu state`))}catch(A){console.error(`Error adding dish to ${S} menu:`,A),h(`Errore nell'aggiunta del piatto al menu ${S==="daily"?"del giorno":"fisso"}: ${A.message}`)}finally{d(!1)}},[]),C=y.useCallback(async(N,S)=>{try{const A=S==="daily"?"menu_del_giorno":"menu_fisso",{error:$}=await J.from(A).delete().eq("dish_id",N);if($)throw $;S==="daily"?i(I=>I.filter(q=>q.dish_id!==N)):o(I=>I.filter(q=>q.dish_id!==N))}catch(A){console.error(`Error removing dish from ${S} menu:`,A),h(`Errore nella rimozione del piatto dal menu ${S==="daily"?"del giorno":"fisso"}`)}},[]);y.useEffect(()=>{j()},[j]);const k={dishes:t,dailyMenuDishes:n,fixedMenuDishes:a,loading:c,addingToMenu:u,error:m,fetchDishes:j,fetchMenuDishes:x,addDish:v,updateDish:w,deleteDish:g,addDishToMenu:_,removeDishFromMenu:C,getDishesByCategory:p,getAvailableDishes:f,initializeSampleDishes:b};return s.jsx(Lf.Provider,{value:k,children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var kb={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(e,t)=>{const r=y.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:a=2,absoluteStrokeWidth:o,className:c="",children:l,...u},d)=>y.createElement("svg",{ref:d,...kb,width:i,height:i,stroke:n,strokeWidth:o?Number(a)*24/Number(i):a,className:["lucide",`lucide-${Sb(e)}`,c].join(" "),...u},[...t.map(([m,h])=>y.createElement(m,h)),...Array.isArray(l)?l:[l]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jo=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mf=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=K("Bus",[["path",{d:"M8 6v6",key:"18i7km"}],["path",{d:"M15 6v6",key:"1sg6z9"}],["path",{d:"M2 12h19.6",key:"de5uta"}],["path",{d:"M18 18h3s.5-1.7.8-2.8c.1-.4.2-.8.2-1.2 0-.4-.1-.8-.2-1.2l-1.4-5C20.1 6.8 19.1 6 18 6H4a2 2 0 0 0-2 2v10h3",key:"1wwztk"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M9 18h5",key:"lrx6i"}],["circle",{cx:"16",cy:"18",r:"2",key:"1v4tcr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tl=K("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=K("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=K("ChefHat",[["path",{d:"M6 13.87A4 4 0 0 1 7.41 6a5.11 5.11 0 0 1 1.05-1.54 5 5 0 0 1 7.08 0A5.11 5.11 0 0 1 16.59 6 4 4 0 0 1 18 13.87V21H6Z",key:"z3ra2g"}],["line",{x1:"6",x2:"18",y1:"17",y2:"17",key:"12q60k"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Df=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rb=K("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ob=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=K("Facebook",[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=K("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=K("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=K("Instagram",[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bd=K("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=K("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wd=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Al=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qs=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ua=K("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lb=K("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mb=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Db=K("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zb=K("PackageCheck",[["path",{d:"m16 16 2 2 4-4",key:"gfu2re"}],["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $b=K("PackageSearch",[["path",{d:"M21 10V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l2-1.14",key:"e7tb2h"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["line",{x1:"12",x2:"12",y1:"22",y2:"12",key:"a4e8g8"}],["circle",{cx:"18.5",cy:"15.5",r:"2.5",key:"b5zd12"}],["path",{d:"M20.27 17.27 22 19",key:"1l4muz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const br=K("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fb=K("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const No=K("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _r=K("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ft=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ub=K("ShoppingBag",[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ls=K("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bb=K("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qb=K("TramFront",[["rect",{width:"16",height:"16",x:"4",y:"3",rx:"2",key:"1wxw4b"}],["path",{d:"M4 11h16",key:"mpoxn0"}],["path",{d:"M12 3v8",key:"1h2ygw"}],["path",{d:"m8 19-2 3",key:"13i0xs"}],["path",{d:"m18 22-2-3",key:"1p0ohu"}],["path",{d:"M8 15h0",key:"q9eq1f"}],["path",{d:"M16 15h0",key:"pzrbjg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ms=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wb=K("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qf=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vb=K("Utensils",[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2v0a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"1ogz0v"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wf=K("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hb=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qr=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),zc=({isOpen:e,onClose:t,title:r,children:n})=>e?s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 transition-opacity bg-gray-500 bg-opacity-75",onClick:t}),s.jsxs("div",{className:"inline-block w-full max-w-md p-6 my-8 overflow-hidden text-left align-middle transition-all transform bg-white shadow-xl rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h3",{className:"text-lg font-medium leading-6 text-gray-900",children:r}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Qr,{className:"w-6 h-6"})})]}),n]})]})}):null;function Vf(...e){return e.filter(Boolean).join(" ")}const Q=({variant:e="primary",size:t="md",className:r,children:n,...i})=>{const a="inline-flex items-center justify-center font-medium rounded-lg transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",o={primary:"bg-mediterranean-marroncino hover:bg-opacity-90 text-mediterranean-bianco focus:ring-mediterranean-marroncino shadow-lg hover:shadow-xl",secondary:"bg-mediterranean-beige hover:bg-opacity-80 text-mediterranean-blu-scuro focus:ring-mediterranean-beige",outline:"border-2 border-mediterranean-marroncino text-mediterranean-marroncino hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco focus:ring-mediterranean-marroncino"},c={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-base",lg:"px-6 py-3 text-lg"};return s.jsx("button",{className:Vf(a,o[e],c[t],r),...i,children:n})},An=({isOpen:e,onClose:t,onSwitchToRegister:r})=>{const[n,i]=y.useState(""),[a,o]=y.useState(""),[c,l]=y.useState(!1),[u,d]=y.useState(!1),[m,h]=y.useState(""),{signIn:b,signInWithGoogle:j}=ct(),v=async p=>{p.preventDefault(),l(!0),h("");const{error:f}=await b(n,a);f?h(f.message):(t(),i(""),o("")),l(!1)},w=()=>{t(),i(""),o(""),h("")},g=async()=>{d(!0),h("");const{error:p}=await j();p&&(h(p.message),d(!1))};return s.jsxs(zc,{isOpen:e,onClose:w,title:"Accedi",children:[s.jsx("div",{className:"mb-4 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-mediterranean-blu-scuro",children:" Sconto del 10% sul primo ordine!"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Accedi o registrati per ottenere subito il tuo sconto di benvenuto"})]})]})}),s.jsxs("form",{onSubmit:v,className:"space-y-4",children:[m&&s.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:m}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",id:"email",value:n,onChange:p=>i(p.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"La tua email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",id:"password",value:a,onChange:p=>o(p.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"La tua password"})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx(Q,{type:"submit",disabled:c||u,className:"w-full",children:c?"Accesso in corso...":"Accedi"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"oppure"})})]}),s.jsxs(Q,{type:"button",variant:"outline",onClick:g,disabled:c||u,className:"w-full flex items-center justify-center space-x-2",children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{children:u?"Connessione...":"Continua con Google"})]}),s.jsx("button",{type:"button",onClick:r,className:"text-sm text-mediterranean-marroncino hover:text-mediterranean-blu-scuro transition-colors",children:"Non hai un account? Registrati"})]})]})]})},Rn=({isOpen:e,onClose:t,onSwitchToLogin:r})=>{const[n,i]=y.useState(""),[a,o]=y.useState(""),[c,l]=y.useState(""),[u,d]=y.useState(""),[m,h]=y.useState(!1),[b,j]=y.useState(!1),[v,w]=y.useState(""),[g,p]=y.useState(!1),[f,x]=y.useState(!1),{signUp:_,signInWithGoogle:C}=ct(),k=async I=>{if(I.preventDefault(),h(!0),w(""),p(!1),c!==u){w("Le password non corrispondono"),h(!1);return}if(c.length<6){w("La password deve essere di almeno 6 caratteri"),h(!1);return}const{error:q}=await _(a,c,n);q?w(q.message):(p(!0),setTimeout(()=>{t(),N()},2e3)),h(!1)},N=()=>{i(""),o(""),l(""),d(""),w(""),p(!1)},S=()=>{t(),N()},A=async()=>{j(!0),w("");const{error:I}=await C();I&&(w(I.message),j(!1))},$=async()=>{x(!0),w("");try{const{error:I}=await J.auth.resend({type:"signup",email:a});I?w(I.message||"Errore nel reinvio dell'email di verifica"):p(!0)}catch(I){w((I==null?void 0:I.message)||"Errore nel reinvio dell'email di verifica")}finally{x(!1)}};return s.jsxs(zc,{isOpen:e,onClose:S,title:"Registrati",children:[s.jsx("div",{className:"mb-4 bg-gradient-to-r from-green-50 to-blue-50 border border-green-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-center mb-2",children:[s.jsx("div",{className:"bg-green-100 rounded-full p-2 mr-3",children:s.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-semibold text-mediterranean-blu-scuro",children:" Benvenuto! Sconto del 10% sul primo ordine"}),s.jsx("p",{className:"text-xs text-gray-600",children:"Registrandoti ottieni subito uno sconto esclusivo di benvenuto"})]})]})}),s.jsxs("form",{onSubmit:k,className:"space-y-4",children:[v&&s.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md",children:v}),g&&s.jsx("div",{className:"p-3 text-sm text-green-600 bg-green-50 rounded-md",children:"Registrazione completata! Controlla la tua email per confermare l'account."}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"fullName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Completo"}),s.jsx("input",{type:"text",id:"fullName",value:n,onChange:I=>i(I.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Il tuo nome completo"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),s.jsx("input",{type:"email",id:"email",value:a,onChange:I=>o(I.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"La tua email"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),s.jsx("input",{type:"password",id:"password",value:c,onChange:I=>l(I.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Almeno 6 caratteri"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700 mb-1",children:"Conferma Password"}),s.jsx("input",{type:"password",id:"confirmPassword",value:u,onChange:I=>d(I.target.value),required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Ripeti la password"})]}),s.jsxs("div",{className:"flex flex-col space-y-3",children:[s.jsx(Q,{type:"submit",disabled:m||g||b,className:"w-full",children:m?"Registrazione in corso...":"Registrati"}),g&&s.jsx("div",{className:"text-sm text-green-700 bg-green-50 border border-green-200 rounded p-3",children:"Registrazione completata. Controlla la tua email per confermare l'account."}),s.jsx(Q,{type:"button",variant:"outline",onClick:$,disabled:m||b||f||!a,className:"w-full",children:f?"Invio in corso...":"Reinvia email di verifica"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-0 flex items-center",children:s.jsx("div",{className:"w-full border-t border-gray-300"})}),s.jsx("div",{className:"relative flex justify-center text-sm",children:s.jsx("span",{className:"px-2 bg-white text-gray-500",children:"oppure"})})]}),s.jsxs(Q,{type:"button",variant:"outline",onClick:A,disabled:m||g||b,className:"w-full flex items-center justify-center space-x-2",children:[s.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[s.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),s.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),s.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),s.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s.jsx("span",{children:b?"Connessione...":"Continua con Google"})]}),s.jsx("button",{type:"button",onClick:r,className:"text-sm text-mediterranean-marroncino hover:text-mediterranean-blu-scuro transition-colors",children:"Hai gi un account? Accedi"})]})]})]})},Gb=()=>{const[e,t]=y.useState(!1),[r,n]=y.useState(!1),[i,a]=y.useState(!1),o=Pt(),{itemsCount:c}=Ks(),{user:l,signOut:u}=ct(),d=[{path:"/",label:"Home"},{path:"/menu-fisso",label:"Men Fisso"},{path:"/menu-del-giorno",label:"Men del Giorno"},{path:"/prenota",label:"Prenota Ordine"},{path:"/galleria",label:"Galleria"},{path:"/contatti",label:"Contatti"}],m=v=>o.pathname===v,h=()=>{n(!1),a(!0)},b=()=>{a(!1),n(!0)},j=async()=>{await u()};return s.jsx("header",{className:"bg-mediterranean-bianco shadow-lg sticky top-0 z-50",children:s.jsxs("nav",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"flex justify-between items-center h-16",children:[s.jsx(Ue,{to:"/",className:"flex items-center group",children:s.jsx("img",{src:"/images/Senza titolo (1024 x 200 px) (700 x 200 px).png",alt:"Gusto Mediterraneo",className:"h-12 w-auto group-hover:scale-105 transition-transform"})}),s.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[d.map(v=>s.jsx(Ue,{to:v.path,className:`text-sm font-medium transition-colors hover:text-mediterranean-marroncino ${m(v.path)?"text-mediterranean-marroncino border-b-2 border-mediterranean-marroncino":"text-mediterranean-blu-scuro"}`,children:v.label},v.path)),l&&s.jsxs(Ue,{to:"/prenota","data-cart-icon":"true",className:"relative p-2 text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors",children:[s.jsx(Ls,{className:"w-6 h-6"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-mediterranean-marroncino text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:c})]}),l?s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsxs(Ue,{to:"/dashboard",className:"flex items-center space-x-2 p-2 text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors",children:[s.jsx(Xt,{className:"w-6 h-6"}),s.jsx("span",{className:"hidden lg:block text-sm font-medium",children:"Dashboard"})]}),s.jsx("button",{onClick:j,className:"p-2 text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors",title:"Logout",children:s.jsx(Al,{className:"w-5 h-5"})})]}):s.jsx(Q,{onClick:()=>n(!0),size:"sm",className:"ml-4",children:"Accedi"})]}),s.jsxs("div",{className:"md:hidden flex items-center gap-2",children:[l&&s.jsxs(Ue,{to:"/prenota","data-cart-icon":"true",className:"relative p-2 text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors","aria-label":"Carrello",children:[s.jsx(Ls,{className:"w-6 h-6"}),c>0&&s.jsx("span",{className:"absolute -top-1 -right-1 bg-mediterranean-marroncino text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:c})]}),s.jsx("button",{onClick:()=>t(!e),className:"inline-flex items-center justify-center p-2 rounded-md text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors","aria-label":"Menu",children:e?s.jsx(Qr,{className:"w-6 h-6"}):s.jsx(Lb,{className:"w-6 h-6"})})]})]}),s.jsx("div",{className:`md:hidden ${e?"dropdown-anim open":"dropdown-anim"}`,"aria-hidden":!e,children:s.jsxs("div",{className:"px-2 pt-2 pb-3 space-y-1 bg-mediterranean-beige rounded-lg mt-2",children:[d.map(v=>s.jsx(Ue,{to:v.path,onClick:()=>t(!1),className:`block px-3 py-2 rounded-md text-base font-medium transition-colors ${m(v.path)?"text-mediterranean-marroncino bg-mediterranean-bianco":"text-mediterranean-blu-scuro hover:text-mediterranean-marroncino hover:bg-mediterranean-bianco"}`,children:v.label},v.path)),s.jsx("div",{className:"border-t border-mediterranean-marroncino pt-2 mt-2",children:l?s.jsxs("div",{className:"px-3 py-2 space-y-2",children:[s.jsxs(Ue,{to:"/dashboard",onClick:()=>t(!1),className:"flex items-center text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors",children:[s.jsx(Xt,{className:"w-4 h-4 mr-2"}),"Dashboard"]}),s.jsxs("button",{onClick:j,className:"flex items-center text-mediterranean-blu-scuro hover:text-mediterranean-marroncino transition-colors",children:[s.jsx(Al,{className:"w-4 h-4 mr-2"}),"Esci"]})]}):s.jsx("div",{className:"px-3 py-2",children:s.jsx(Q,{onClick:()=>{n(!0),t(!1)},size:"sm",className:"w-full",children:"Accedi"})})})]})}),s.jsx(An,{isOpen:r,onClose:()=>n(!1),onSwitchToRegister:h}),s.jsx(Rn,{isOpen:i,onClose:()=>a(!1),onSwitchToLogin:b})]})})},Kb=()=>s.jsx("footer",{className:"bg-mediterranean-blu-scuro text-mediterranean-bianco",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-serif text-xl font-semibold mb-4",children:"Contatti"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx(ua,{className:"w-5 h-5 mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm",children:"Viale Anicio Gallo, 49, 00174 Roma RM"}),s.jsx("p",{className:"text-sm",children:"Roma (RM)"})]})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_r,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("p",{className:"text-sm",children:"+39 331 332 0411"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Qs,{className:"w-5 h-5 flex-shrink-0"}),s.jsx("p",{className:"text-sm",children:"info@gustomediterraneo.it"})]})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-serif text-xl font-semibold mb-4",children:"Orari di Apertura"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsx("p",{className:"font-medium",children:"Momentaneamente chiusi"}),s.jsx("p",{className:"text-xs opacity-80",children:"Ci scusiamo per il disagio."})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-serif text-xl font-semibold mb-4",children:"Link Utili"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("a",{href:"/",className:"block text-sm hover:text-mediterranean-beige transition-colors",children:"Home"}),s.jsx("a",{href:"/menu-fisso",className:"block text-sm hover:text-mediterranean-beige transition-colors",children:"Menu Fisso"}),s.jsx("a",{href:"/menu-del-giorno",className:"block text-sm hover:text-mediterranean-beige transition-colors",children:"Menu del Giorno"}),s.jsx("a",{href:"/galleria",className:"block text-sm hover:text-mediterranean-beige transition-colors",children:"Galleria"}),s.jsx("a",{href:"/contatti",className:"block text-sm hover:text-mediterranean-beige transition-colors",children:"Contatti"})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-serif text-xl font-semibold mb-4",children:"Seguici"}),s.jsxs("div",{className:"flex space-x-4 mb-4",children:[s.jsx("a",{href:"https://www.facebook.com/gustomediterraneoroma/",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-mediterranean-marroncino rounded-full hover:bg-opacity-80 transition-colors",children:s.jsx($f,{className:"w-5 h-5"})}),s.jsx("a",{href:"https://www.instagram.com/gustomediterraneoroma_/",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-mediterranean-marroncino rounded-full hover:bg-opacity-80 transition-colors",children:s.jsx(Uf,{className:"w-5 h-5"})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm mb-2",children:"Iscriviti alla newsletter"}),s.jsxs("div",{className:"flex",children:[s.jsx("input",{type:"email",placeholder:"La tua email",className:"flex-1 px-3 py-2 bg-mediterranean-beige text-mediterranean-blu-scuro text-sm rounded-l-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino"}),s.jsx("button",{className:"px-4 py-2 bg-mediterranean-marroncino text-sm rounded-r-md hover:bg-opacity-80 transition-colors",children:"Iscriviti"})]})]})]})]}),s.jsx("div",{className:"border-t border-mediterranean-marroncino mt-8 pt-8 text-center",children:s.jsx("p",{className:"text-sm text-mediterranean-beige",children:" 2024 Gusto Mediterraneo - Fish Take Away. Tutti i diritti riservati."})})]})}),Qb=({onRegisterClick:e,onClose:t})=>s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:s.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm md:max-w-md mx-2 sm:mx-4 relative overflow-hidden max-h-[92vh] overflow-y-auto",children:[s.jsx("button",{onClick:t,className:"absolute top-2 right-2 sm:top-4 sm:right-4 text-gray-400 hover:text-gray-600 transition-colors z-10",children:s.jsx(Qr,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),s.jsx("div",{className:"bg-contain bg-no-repeat bg-center h-20 sm:h-24 md:h-28",style:{backgroundImage:"url('/images/Senza titolo (1024 x 200 px) (700 x 200 px).png')"},"aria-hidden":"true"}),s.jsxs("div",{className:"p-4 sm:p-5",children:[s.jsxs("div",{className:"text-center mb-4 sm:mb-6",children:[s.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-3 sm:p-4 mb-3 sm:mb-4",children:[s.jsx("div",{className:"text-2xl sm:text-3xl font-bold text-green-600 mb-1",children:"10% DI SCONTO"}),s.jsx("div",{className:"text-green-700 font-medium text-sm sm:text-base",children:"sul tuo primo ordine!"})]}),s.jsxs("p",{className:"text-mediterranean-blu-scuro mb-3 sm:mb-4 leading-relaxed text-sm sm:text-base",children:["Registrati ora e scopri i sapori autentici del Mediterraneo con uno",s.jsx("strong",{className:"text-mediterranean-marroncino",children:" sconto esclusivo del 10%"}),"sul tuo primo ordine."]}),s.jsxs("div",{className:"bg-mediterranean-beige rounded-lg p-3 sm:p-4 mb-4 sm:mb-6",children:[s.jsxs("h3",{className:"font-semibold text-mediterranean-blu-scuro mb-2 flex items-center justify-center text-sm sm:text-base",children:[s.jsx(Wb,{className:"w-4 h-4 mr-2"}),"Vantaggi della registrazione:"]}),s.jsxs("ul",{className:"text-xs sm:text-sm text-mediterranean-blu-scuro space-y-1",children:[s.jsx("li",{children:" Sconto del 10% sul primo ordine"}),s.jsx("li",{children:" Sconti futuri per ordini superiori a 40"}),s.jsx("li",{children:" Gestione facile dei tuoi ordini"}),s.jsx("li",{children:" Checkout pi veloce"})]})]})]}),s.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[s.jsx(Q,{onClick:e,className:"w-full bg-gradient-to-r from-mediterranean-marroncino to-mediterranean-blu-scuro hover:from-mediterranean-blu-scuro hover:to-mediterranean-marroncino text-white font-semibold py-2 sm:py-3 text-base sm:text-lg transition-all duration-300 transform hover:scale-105",children:"Registrati Ora e Risparmia!"}),s.jsx("button",{onClick:t,className:"w-full text-gray-500 hover:text-gray-700 text-xs sm:text-sm transition-colors",children:"Continua senza registrazione"})]})]})]})}),Jb=({onRegisterClick:e,onClose:t})=>s.jsx("div",{className:"fixed bottom-4 right-4 z-50 animate-slide-in-right",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-2xl border border-gray-200 w-72 max-w-[calc(100vw-2rem)] overflow-hidden",children:[s.jsx("button",{onClick:t,className:"absolute top-2 right-2 text-gray-400 hover:text-gray-600 transition-colors z-10",children:s.jsx(Qr,{className:"w-4 h-4"})}),s.jsx("div",{className:"bg-contain bg-no-repeat bg-center h-16 sm:h-20",style:{backgroundImage:"url('/images/Senza titolo (1024 x 200 px) (700 x 200 px).png')"},"aria-hidden":"true"}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"text-center mb-4",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3 mb-3",children:[s.jsx("div",{className:"text-lg font-bold text-green-600 mb-1",children:"10% DI SCONTO"}),s.jsx("div",{className:"text-green-700 font-medium text-xs",children:"sul tuo primo ordine!"})]}),s.jsxs("p",{className:"text-mediterranean-blu-scuro mb-3 leading-relaxed text-xs",children:["Registrati ora e ottieni uno",s.jsx("strong",{className:"text-mediterranean-marroncino",children:" sconto esclusivo del 10%"}),"sul tuo primo ordine."]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Q,{onClick:e,className:"w-full bg-gradient-to-r from-mediterranean-marroncino to-mediterranean-blu-scuro hover:from-mediterranean-blu-scuro hover:to-mediterranean-marroncino text-white font-semibold py-2 text-sm transition-all duration-300 transform hover:scale-105",children:"Registrati Ora!"}),s.jsx("button",{onClick:t,className:"w-full text-gray-500 hover:text-gray-700 text-xs transition-colors",children:"Non ora"})]})]})]})}),Yb=({children:e})=>{const{user:t,loading:r}=ct();Ea();const n=Pt(),[i,a]=y.useState(!1),[o,c]=y.useState(!1),[l,u]=y.useState(!1),[d,m]=y.useState(!1),h=n.pathname==="/pagamento",b=h;y.useEffect(()=>{if(!r&&!t&&!h){const x=sessionStorage.getItem("hasSeenWelcomeNotification"),_=sessionStorage.getItem("hasClosedWelcomeNotification");if(x)_&&!sessionStorage.getItem("hasDismissedMiniNotification")&&c(!0);else{const C=setTimeout(()=>{a(!0)},1500);return()=>clearTimeout(C)}}},[t,r,h]);const j=()=>{a(!1),sessionStorage.setItem("hasSeenWelcomeNotification","true"),m(!0)},v=()=>{a(!1),sessionStorage.setItem("hasSeenWelcomeNotification","true"),sessionStorage.setItem("hasClosedWelcomeNotification","true"),setTimeout(()=>{!t&&!sessionStorage.getItem("hasDismissedMiniNotification")&&c(!0)},2e3)},w=()=>{u(!1),m(!0)},g=()=>{m(!1),u(!0)},p=()=>{c(!1),sessionStorage.setItem("hasDismissedMiniNotification","true"),m(!0)},f=()=>{c(!1),sessionStorage.setItem("hasDismissedMiniNotification","true")};return s.jsxs("div",{className:"min-h-screen bg-mediterranean-bianco",children:[!b&&s.jsx(Gb,{}),s.jsx("main",{children:e}),!b&&s.jsx(Kb,{}),i&&!h&&s.jsx(Qb,{onRegisterClick:j,onClose:v}),o&&!t&&!h&&s.jsx(Jb,{onRegisterClick:p,onClose:f}),s.jsx(An,{isOpen:l,onClose:()=>u(!1),onSwitchToRegister:w}),s.jsx(Rn,{isOpen:d,onClose:()=>m(!1),onSwitchToLogin:g})]})},Xb=()=>{const{pathname:e}=Pt();return y.useEffect(()=>{window.scrollTo(0,0)},[e]),null},Zb=({children:e})=>s.jsx(s.Fragment,{children:e}),ae=({children:e,className:t,hover:r=!0})=>s.jsx("div",{className:Vf("bg-mediterranean-bianco rounded-lg shadow-md p-6",r&&"transition-all duration-200 hover:shadow-lg hover:-translate-y-1",t),children:e}),ew=()=>{const[e,t]=y.useState(!1),r=y.useRef(null),[n,i]=y.useState(!1),a=y.useRef(null),[o,c]=y.useState(!1),l=y.useRef(null),[u,d]=y.useState(!1),m=y.useRef(null),h=y.useRef(null),b=y.useRef(null),[j,v]=y.useState(!1),[w,g]=y.useState(!1),[p,f]=y.useState(!1),x=y.useRef(null),[_,C]=y.useState(!1),k=y.useRef(null),[N,S]=y.useState(!1),{fixedMenuDishes:A,dailyMenuDishes:$,fetchMenuDishes:I,loading:q}=Kr();ct(),y.useEffect(()=>{I("fixed"),I("daily")},[I]);const ee=O=>{const E=(O||[]).filter(D=>D.is_available&&D.dish);if(E.length===0)return[];if(E.length===1)return[E[0],E[0],E[0]];if(E.length===2){const D=[...E].sort(()=>Math.random()-.5),te=D[Math.floor(Math.random()*2)];return[D[0],D[1],te]}return[...E].sort(()=>Math.random()-.5).slice(0,3)},se=ue.useMemo(()=>ee(A),[A]),Ne=ue.useMemo(()=>ee($),[$]),W=y.useRef(null),T=y.useRef(null),P=y.useRef(null),[L,G]=y.useState(!1),[R,H]=y.useState(!1),[U,Y]=y.useState(!1),[F,le]=y.useState(!1);y.useEffect(()=>{const O=r.current;if(!O)return;const E=new IntersectionObserver(V=>{const D=V[0];i(D.isIntersecting)},{threshold:.2});return E.observe(O),()=>E.disconnect()},[]),y.useEffect(()=>{const O=a.current;if(!O)return;const E=new IntersectionObserver(V=>{V[0].isIntersecting&&(c(!0),E.disconnect())},{threshold:.2});return E.observe(O),()=>E.disconnect()},[]),y.useEffect(()=>{const O=window.matchMedia("(max-width: 767px)"),E=()=>le(O.matches);return E(),O.addEventListener("change",E),()=>O.removeEventListener("change",E)},[]),y.useEffect(()=>{if(!F)return;const O=[],E=(V,D,te=.25)=>{if(!V)return;const fe=new IntersectionObserver(([X])=>{X.isIntersecting&&(D(!0),fe.disconnect())},{threshold:te});fe.observe(V),O.push(fe)};return E(W.current,G,.25),E(T.current,H,.25),E(P.current,Y,.2),()=>{O.forEach(V=>V.disconnect())}},[F]),y.useEffect(()=>{const O=l.current;if(!O)return;const E=new IntersectionObserver(V=>{V[0].isIntersecting&&(d(!0),E.disconnect())},{threshold:.2});return E.observe(O),()=>E.disconnect()},[]),y.useEffect(()=>{if(!F)return;const O={threshold:0,rootMargin:"0px 0px -15% 0px"},E=[],V=(D,te)=>{if(!D)return;const fe=new IntersectionObserver(([X])=>{X.isIntersecting&&(te(!0),fe.disconnect())},O);fe.observe(D),E.push(fe)};return V(m.current,v),V(h.current,g),V(b.current,f),()=>{E.forEach(D=>D.disconnect())}},[F]),y.useEffect(()=>{const O=x.current;if(!O)return;const E=new IntersectionObserver(V=>{V[0].isIntersecting&&(C(!0),E.disconnect())},{threshold:.2});return E.observe(O),()=>E.disconnect()},[]),y.useEffect(()=>{const O=k.current;if(!O)return;const E=new IntersectionObserver(V=>{V[0].isIntersecting&&(S(!0),E.disconnect())},{threshold:.2});return E.observe(O),()=>E.disconnect()},[]);const Tt=O=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(O);function z(O){return{"Crudo di Ricciola":"img1.jpg","Polpo alla Griglia":"polpo.patate.jpg","Spaghetti alle Vongole":"img2.jpg","Spaghetti alla Carbonara":"img2.jpg","Risotto ai Frutti di Mare":"insalata.di.mare.jpg","Branzino in Crosta di Sale":"salmone.crosta.di.pistacchio.mandorle.jpg","Frittura Mista":"calamari.gratinati.alforno.jpg","Antipasto della Casa":"img3.jpg","Tiramis della Nonna":"img4.jpg"}[O]||"img3.jpg"}return s.jsxs("div",{className:"animate-fade-in",children:[s.jsxs("div",{className:"fixed bottom-6 left-6 z-50 flex flex-col gap-3",children:[s.jsx("a",{href:"tel:+393313320411",className:"group",children:s.jsx("div",{className:"w-14 h-14 bg-green-600 hover:bg-green-700 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group-hover:scale-110",children:s.jsx(_r,{className:"w-6 h-6 text-white"})})}),s.jsxs("div",{className:"relative",children:[s.jsx("button",{onClick:()=>t(!e),className:"group",children:s.jsx("div",{className:"w-14 h-14 bg-white hover:bg-gray-50 rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group-hover:scale-110",children:s.jsx("img",{src:"/images/justeat.jpg",alt:"Ordina Online",className:"w-12 h-12 object-cover rounded-full"})})}),e&&s.jsxs("div",{className:"absolute bottom-0 left-16 flex gap-2 mb-2",children:[s.jsx("a",{href:"https://www.justeat.it/restaurants-gusto-mediterraneo-da-andrea-roma/menu",target:"_blank",rel:"noopener noreferrer",className:"group",children:s.jsx("div",{className:"w-12 h-12 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group-hover:scale-110 fade-slide-in",style:{animationDelay:"0ms"},children:s.jsx("img",{src:"/images/justeat.jpg",alt:"JustEat",className:"w-10 h-10 object-cover rounded-full"})})}),s.jsx("a",{href:"https://glovo.go.link/open?adjust_deeplink=glovoapp%3A%2F%2Fopen%3Flink_type%3Dstore%26store_id%3D498129&adjust_t=s321jkn",target:"_blank",rel:"noopener noreferrer",className:"group",children:s.jsx("div",{className:"w-12 h-12 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group-hover:scale-110 fade-slide-in",style:{animationDelay:"200ms"},children:s.jsx("img",{src:"/images/glovo.png",alt:"Glovo",className:"w-11 h-11 object-cover rounded-full"})})}),s.jsx("a",{href:"https://deliveroo.it/it/menu/roma/roma-tuscolano/gusto-mediterraneo-da-andrea",target:"_blank",rel:"noopener noreferrer",className:"group",children:s.jsx("div",{className:"w-12 h-12 bg-white rounded-full shadow-lg hover:shadow-xl transition-all duration-300 flex items-center justify-center group-hover:scale-110 fade-slide-in",style:{animationDelay:"400ms"},children:s.jsx("img",{src:"/images/deliveroo.jpg",alt:"Deliveroo",className:"w-10 h-10 object-cover rounded-full"})})})]})]})]}),s.jsxs("section",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-r from-mediterranean-blu-scuro/20 to-mediterranean-marroncino/20",children:[s.jsx("div",{className:"absolute inset-0 bg-cover bg-center bg-no-repeat",style:{backgroundImage:"url('/images/sfondohome.jpg')"}}),s.jsx("div",{className:"absolute inset-0 bg-mediterranean-blu-scuro/40"}),s.jsxs("div",{className:"relative z-10 text-center px-4 max-w-4xl mx-auto",children:[s.jsx("h1",{className:"font-serif text-5xl md:text-7xl font-bold text-mediterranean-bianco mb-6 animate-slide-up",children:"Gusto Mediterraneo"}),s.jsx("p",{className:"font-serif text-2xl md:text-3xl text-mediterranean-beige mb-8 animate-slide-up",children:"Fish Take Away"}),s.jsx("p",{className:"text-lg md:text-xl text-mediterranean-bianco mb-12 max-w-2xl mx-auto animate-slide-up",children:"Pesce fresco di prima qualit, preparato secondo la tradizione mediterranea. Ordina e ritira il tuo piatto preferito."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center animate-slide-up",children:[s.jsx(Ue,{to:"/prenota",children:s.jsxs(Q,{size:"lg",className:"text-lg px-8 py-4",children:["Prenota il Tuo Ordine",s.jsx(jo,{className:"ml-2 w-5 h-5"})]})}),s.jsx(Ue,{to:"/menu-fisso",children:s.jsx(Q,{variant:"outline",size:"lg",className:"text-lg px-8 py-4 bg-mediterranean-bianco/10 backdrop-blur-sm border-mediterranean-bianco text-mediterranean-bianco hover:bg-mediterranean-bianco hover:text-mediterranean-blu-scuro",children:"Scopri il Men"})})]})]})]}),s.jsx("section",{className:"py-16 bg-mediterranean-beige",ref:r,children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsx("div",{className:n?F?"animate-slide-in-left":"animate-slide-in-up":"opacity-0",style:n?{animationDelay:"0ms",animationDuration:"600ms",animationFillMode:"both"}:void 0,children:s.jsx(Ue,{to:"/menu-fisso",className:"group",children:s.jsxs(ae,{className:"text-center h-full hover:bg-mediterranean-bianco group-hover:shadow-xl transition-all",children:[s.jsx(Ct,{className:"w-12 h-12 text-mediterranean-marroncino mx-auto mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-2",children:"Men Fisso"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Scopri la nostra selezione permanente di piatti della tradizione mediterranea"})]})})}),s.jsx("div",{className:n?F?"animate-slide-in-right":"animate-slide-in-up":"opacity-0",style:n?{animationDelay:"200ms",animationDuration:"600ms",animationFillMode:"both"}:void 0,children:s.jsx(Ue,{to:"/menu-del-giorno",className:"group",children:s.jsxs(ae,{className:"text-center h-full hover:bg-mediterranean-bianco group-hover:shadow-xl transition-all",children:[s.jsx(Ct,{className:"w-12 h-12 text-mediterranean-marroncino mx-auto mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-2",children:"Men del Giorno"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Specialit quotidiane con il pescato fresco del giorno"})]})})}),s.jsx("div",{className:n?F?"animate-slide-in-left":"animate-slide-in-up":"opacity-0",style:n?{animationDelay:"400ms",animationDuration:"600ms",animationFillMode:"both"}:void 0,children:s.jsx(Ue,{to:"/prenota",className:"group",children:s.jsxs(ae,{className:"text-center h-full hover:bg-mediterranean-bianco group-hover:shadow-xl transition-all",children:[s.jsx(Wr,{className:"w-12 h-12 text-mediterranean-marroncino mx-auto mb-4 group-hover:scale-110 transition-transform"}),s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-2",children:"Prenota Ordine"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Ordina online e ritira comodamente il tuo piatto preferito"})]})})})]})})}),s.jsxs("section",{ref:a,className:"py-20 bg-gradient-to-br from-mediterranean-bianco via-mediterranean-beige/30 to-mediterranean-bianco relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-10 left-10 opacity-10",children:s.jsx(Ct,{className:"w-32 h-32 text-mediterranean-marrone"})}),s.jsx("div",{className:"absolute bottom-10 right-10 opacity-10",children:s.jsx(Vb,{className:"w-28 h-28 text-mediterranean-marrone"})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-16 items-center",children:[s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"text-center lg:text-left",children:[s.jsxs("div",{className:"flex items-center justify-center lg:justify-start mb-4",children:[s.jsx("div",{className:"h-px bg-mediterranean-marrone w-12 mr-4"}),s.jsx(_o,{className:"w-8 h-8 text-mediterranean-marrone"}),s.jsx("div",{className:"h-px bg-mediterranean-marrone w-12 ml-4"})]}),s.jsx("h2",{className:`font-serif text-5xl font-bold text-mediterranean-blu-scuro mb-3 leading-tight ${o?"animate-slide-in-left":"opacity-0"}`,style:o?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:"La Nostra Cucina"}),s.jsx("p",{className:`text-mediterranean-marrone font-medium italic text-lg ${o?"animate-slide-in-left":"opacity-0"}`,style:o?{animationDelay:"150ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:"Tradizione, Passione e Autenticit"})]}),s.jsx("div",{className:`bg-white/60 backdrop-blur-sm rounded-2xl p-8 shadow-lg border border-mediterranean-beige/50 ${o?"animate-slide-in-up":"opacity-0"}`,style:o?{animationDelay:"300ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-mediterranean-marrone/10 rounded-full flex items-center justify-center",children:s.jsx(Bb,{className:"w-6 h-6 text-mediterranean-marrone"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-2",children:"Selezione Quotidiana"}),s.jsx("p",{className:"text-mediterranean-blu-scuro leading-relaxed",children:"Nel cuore di Roma, portiamo avanti una tradizione culinaria che affonda le radici nel rispetto per il mare e i suoi frutti. Ogni giorno selezioniamo personalmente il pesce pi fresco lavorandolo con tecniche che preservano sapori autentici e genuini."})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx("div",{className:"flex-shrink-0 w-12 h-12 bg-mediterranean-marrone/10 rounded-full flex items-center justify-center",children:s.jsx(bd,{className:"w-6 h-6 text-mediterranean-marrone"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-2",children:"Filosofia Mediterranea"}),s.jsx("p",{className:"text-mediterranean-blu-scuro leading-relaxed",children:"La nostra filosofia  semplice: ingredienti di qualit superiore, preparazioni rispettose della tradizione mediterranea e l'amore per il buon cibo che si tramanda di generazione in generazione."})]})]})]})}),s.jsxs("div",{className:"grid grid-cols-2 gap-6 mt-8",children:[s.jsxs("div",{ref:W,className:`relative group ${(F?L:o)?"animate-slide-in-left":"opacity-0"}`,style:(F?L:o)?{animationDelay:"450ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsx("img",{src:"/images/img3.jpg",alt:"Specialit della casa",className:"rounded-xl shadow-lg w-full h-32 object-cover transition-transform duration-300 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent rounded-xl"}),s.jsx("div",{className:"absolute bottom-3 left-3 text-white",children:s.jsx("p",{className:"font-serif text-sm font-semibold",children:"Specialit"})})]}),s.jsxs("div",{ref:T,className:`relative group ${(F?R:o)?"animate-slide-in-right":"opacity-0"}`,style:(F?R:o)?{animationDelay:"600ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsx("img",{src:"/images/panino.polpo.rosticciato.jpg",alt:"Panino polpo rosticciato",className:"rounded-xl shadow-lg w-full h-32 object-cover transition-transform duration-300 group-hover:scale-105"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/40 to-transparent rounded-xl"}),s.jsx("div",{className:"absolute bottom-3 left-3 text-white",children:s.jsx("p",{className:"font-serif text-sm font-semibold",children:"Polpo Rosticciato"})})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute -inset-6 bg-gradient-to-br from-mediterranean-marrone/30 via-mediterranean-blu-scuro/25 to-mediterranean-beige/20 rounded-3xl blur-2xl shadow-2xl"}),s.jsx("img",{ref:P,src:"/images/img2.jpg",alt:"La nostra cucina",className:`relative rounded-xl w-full h-104 object-cover ${(F?U:o)?"animate-slide-in-up":"opacity-0"}`,style:(F?U:o)?{animationDelay:"750ms",animationDuration:"700ms",animationFillMode:"both"}:void 0})]})]})})]}),s.jsx("section",{className:"py-20 bg-mediterranean-beige",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{ref:x,className:`mb-16 ${_?F?"animate-slide-in-left":"animate-slide-in-up":"opacity-0"}`,style:_?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4",children:"Menu del Giorno"}),s.jsxs("button",{onClick:()=>window.location.href="/menu-del-giorno",className:"bg-mediterranean-marroncino hover:bg-mediterranean-marroncino/90 text-white px-6 py-2 rounded-lg font-semibold transition-colors duration-200 inline-flex items-center",children:["Vedi Tutto",s.jsx(jo,{className:"w-4 h-4 ml-2"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[q&&s.jsx("div",{className:"col-span-1 md:col-span-3 text-center text-mediterranean-blu-scuro",children:"Caricamento menu del giorno..."}),Ne.length===0?s.jsx("div",{className:"col-span-1 md:col-span-3 text-center text-mediterranean-blu-scuro",children:"Piatti in aggiornamento"}):Ne.map((O,E)=>{const V=O.dish,D=V.image_url||`/images/${z(V.name)}`;return s.jsx("div",{className:"group cursor-pointer",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[s.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.jsx("img",{src:D,alt:V.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h4",{className:"font-serif text-xl font-bold text-mediterranean-blu-scuro group-hover:text-mediterranean-marroncino transition-colors durata-300",children:V.name}),s.jsx("span",{className:"text-2xl font-bold text-mediterranean-marroncino",children:Tt(V.price)})]}),s.jsx("p",{className:"text-mediterranean-blu-scuro/80 mb-4",children:V.description}),Array.isArray(V.tags)&&V.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:V.tags.slice(0,2).map((te,fe)=>s.jsx("span",{className:"px-2 py-1 bg-mediterranean-beige text-mediterranean-blu-scuro text-xs rounded-full",children:te},fe))})]})]})},`${O.id}-${E}`)})]})]}),s.jsxs("div",{ref:k,className:N?F?"animate-slide-in-right":"animate-slide-in-up":"opacity-0",style:N?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4",children:"Menu Fisso"}),s.jsxs("button",{onClick:()=>window.location.href="/menu-fisso",className:"bg-mediterranean-marroncino hover:bg-mediterranean-marroncino/90 text-white px-6 py-2 rounded-lg font-semibold transition-colors duration-200 inline-flex items-center",children:["Vedi Tutto",s.jsx(jo,{className:"w-4 h-4 ml-2"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[q&&s.jsx("div",{className:"col-span-1 md:col-span-3 text-center text-mediterranean-blu-scuro",children:"Caricamento menu fisso..."}),se.map(O=>{const E=O.dish,V=E.image_url||`/images/${z(E.name)}`;return s.jsx("div",{className:"group cursor-pointer",children:s.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-2",children:[s.jsxs("div",{className:"relative h-48 overflow-hidden",children:[s.jsx("img",{src:V,alt:E.name,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h4",{className:"font-serif text-xl font-bold text-mediterranean-blu-scuro group-hover:text-mediterranean-marroncino transition-colors duration-300",children:E.name}),s.jsx("span",{className:"text-2xl font-bold text-mediterranean-marroncino",children:Tt(E.price)})]}),s.jsx("p",{className:"text-mediterranean-blu-scuro/80 mb-4",children:E.description}),Array.isArray(E.tags)&&E.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:E.tags.slice(0,2).map((D,te)=>s.jsx("span",{className:"px-2 py-1 bg-mediterranean-beige text-mediterranean-blu-scuro text-xs rounded-full",children:D},te))})]})]})},O.id)})]})]})]})}),s.jsx("section",{ref:l,className:"py-20 bg-mediterranean-bianco",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:`font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4 ${F?u?"animate-slide-in-up":"opacity-0":""}`,style:F&&u?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:"Come Funziona il Take Away"}),s.jsx("p",{className:`text-lg text-mediterranean-blu-scuro max-w-2xl mx-auto ${F?u?"animate-slide-in-up":"opacity-0":""}`,style:F&&u?{animationDelay:"120ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:"Tre semplici passi per gustare i sapori del mare direttamente a casa tua."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[s.jsxs("div",{ref:m,className:`text-center ${F?j?"animate-slide-in-left":"opacity-0":u?"animate-slide-in-up":"opacity-0"}`,style:(F?j:u)?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsx("div",{className:"w-16 h-16 bg-mediterranean-marroncino rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"text-2xl font-bold text-mediterranean-bianco",children:"1"})}),s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Scegli i Tuoi Piatti"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Esplora il nostro men e seleziona i piatti che preferisci dal nostro catalogo di specialit di mare."})]}),s.jsxs("div",{ref:h,className:`text-center ${F?w?"animate-slide-in-right":"opacity-0":u?"animate-slide-in-up":"opacity-0"}`,style:(F?w:u)?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsx("div",{className:"w-16 h-16 bg-mediterranean-marroncino rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"text-2xl font-bold text-mediterranean-bianco",children:"2"})}),s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Effettua l'Ordine"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Compila il modulo di prenotazione con i tuoi dati e seleziona l'orario di ritiro pi comodo per te."})]}),s.jsxs("div",{ref:b,className:`text-center ${F?p?"animate-slide-in-left":"opacity-0":u?"animate-slide-in-up":"opacity-0"}`,style:(F?p:u)?{animationDelay:"0ms",animationDuration:"700ms",animationFillMode:"both"}:void 0,children:[s.jsx("div",{className:"w-16 h-16 bg-mediterranean-marroncino rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("span",{className:"text-2xl font-bold text-mediterranean-bianco",children:"3"})}),s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Ritira e Gusta"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Vieni a ritirare il tuo ordine all'orario prestabilito. Tutto sar pronto e confezionato con cura."})]})]})]})}),s.jsx("section",{className:"py-20 bg-gradient-to-br from-mediterranean-blu-scuro to-mediterranean-marroncino text-mediterranean-bianco",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"font-serif text-3xl font-bold mb-6",children:"Pescheria Mediterraneo da Andrea"}),s.jsx("p",{className:"text-base mb-6 leading-relaxed opacity-90",children:'Il nostro pesce fresco proviene direttamente dalla nostra "Pescheria Mediterraneo", di propriet di Andrea, lo stesso proprietario del ristorante. Questa integrazione verticale ci permette di garantire la massima qualit e freschezza del pescato che serviamo.'}),s.jsx("p",{className:"text-base mb-8 leading-relaxed opacity-90",children:"Avendo il controllo diretto su tutta la filiera, dalla selezione del pesce fresco alla preparazione dei piatti, possiamo assicurare ai nostri clienti solo il meglio del mare, nel rispetto della tradizione e della sostenibilit."}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(Wr,{className:"w-5 h-5 text-mediterranean-beige flex-shrink-0"}),s.jsx("span",{children:"Pescato selezionato quotidianamente"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(bd,{className:"w-5 h-5 text-mediterranean-beige flex-shrink-0"}),s.jsx("span",{children:"Filiera corta e sostenibile"})]}),s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx(_o,{className:"w-5 h-5 text-mediterranean-beige flex-shrink-0"}),s.jsx("span",{children:"Controllo diretto della qualit"})]})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:"/images/img.webp",alt:"Pesca sostenibile",className:"rounded-lg shadow-2xl w-full h-96 object-cover"}),s.jsx("div",{className:"absolute -top-4 -left-6 bg-mediterranean-beige text-mediterranean-blu-scuro p-8 rounded-lg shadow-xl border-4 border-mediterranean-marroncino max-w-sm transform rotate-[-2deg] z-10",children:s.jsxs("div",{className:"font-serif",children:[s.jsxs("h3",{className:"font-bold text-xl mb-4 text-mediterranean-blu-scuro flex items-center",children:[s.jsx(_o,{className:"w-6 h-6 mr-2"}),"Pescheria Mediterraneo"]}),s.jsxs("div",{className:"space-y-3 text-base font-medium",children:[s.jsxs("p",{className:"flex items-start",children:[s.jsx("span",{className:"font-bold mr-2 text-lg",children:""}),s.jsxs("span",{children:["Largo Giulio Capitolino, 3",s.jsx("br",{}),"00174 Roma RM"]})]}),s.jsx("p",{className:"text-sm italic mt-4 text-mediterranean-marroncino",children:'"La nostra pescheria di famiglia"'}),s.jsxs("button",{onClick:()=>window.open("https://www.google.com/maps/place/Pescheria+Mediterraneo+da+Andrea/@41.853832,12.5640474,17z/data=!3m1!4b1!4m6!3m5!1s0x1325899419f31b5d:0xa589d6165921c428!8m2!3d41.853832!4d12.5640474!16s%2Fg%2F11nrvly_6k?hl=it&entry=ttu&g_ep=EgoyMDI1MDkyOC4wIKXMDSoASAFQAw%3D%3D","_blank"),className:"mt-4 w-full bg-mediterranean-marroncino hover:bg-mediterranean-blu-scuro text-mediterranean-beige font-semibold py-2 px-4 rounded-md transition-colors duration-200 flex items-center justify-center space-x-2 text-sm",children:[s.jsx(ua,{className:"w-4 h-4"}),s.jsx("span",{children:"Vedi su Google Maps"})]})]})]})})]})]})})}),s.jsx("section",{className:"py-20 bg-mediterranean-beige overflow-hidden",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4",children:"Cosa Dicono i Nostri Clienti"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-2xl mx-auto mb-6",children:"Le recensioni autentiche dei nostri clienti su Google."}),s.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[s.jsx("div",{className:"flex items-center",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:`w-6 h-6 ${E<5?"text-yellow-400 fill-current":"text-gray-300"}`},E))}),s.jsx("div",{className:"text-2xl font-bold text-mediterranean-blu-scuro",children:"4.8/5"}),s.jsx("div",{className:"text-mediterranean-marroncino font-medium",children:"(22 recensioni)"})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex gap-6 animate-scroll-left",style:F?{animationDuration:"24s"}:void 0,children:[s.jsxs("div",{className:"flex gap-6 min-w-max",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"3 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Alessandro Falso"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"I sapori di ogni piatto erano perfettamente bilanciati e gli ingredienti incredibilmente freschi. Il servizio  stato impeccabile. Ottimo rapporto qualit-prezzo!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"3 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Nicole La Torraca"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Un piccolo ristorantino take away di pesce che merita davvero! La frittura di calamari era deliziosa: leggera, croccante e per nulla unta. Torner sicuramente!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Pranzo | 10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"1 mese fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Alexandra Marinescu"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Ottima qualit di pesce fresco, tutto veramente buono. Grande cura per i dettagli anche nella consegna. Lo consiglio ad amici e parenti!"'})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"2 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Ludovico Pronesti"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Meraviglioso. Una gemma inaspettata in zona Tuscolana. Pesce fantastico, panini squisiti, economico, personale cordiale. Stra-consigliato!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"8 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Cinzia P"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Finalmente cibo di qualit! Frittura di paranza e polipetti alla Luciana eccellenti! La frittura  espressa, leggera e fatta con olio pulito."'})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"11 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Elisa"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Ho provato due volte la frittura di calamari viene preparata espressa ed  davvero buona e leggera. Torner e sono curiosa di assaggiare altre cose!"'})]})]}),s.jsxs("div",{className:"flex gap-6 min-w-max",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"3 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Alessandro Falso"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"I sapori di ogni piatto erano perfettamente bilanciati e gli ingredienti incredibilmente freschi. Il servizio  stato impeccabile. Ottimo rapporto qualit-prezzo!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"3 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Nicole La Torraca"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Un piccolo ristorantino take away di pesce che merita davvero! La frittura di calamari era deliziosa: leggera, croccante e per nulla unta. Torner sicuramente!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Pranzo | 10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"1 mese fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Alexandra Marinescu"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Ottima qualit di pesce fresco, tutto veramente buono. Grande cura per i dettagli anche nella consegna. Lo consiglio ad amici e parenti!"'})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"2 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Ludovico Pronesti"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Meraviglioso. Una gemma inaspettata in zona Tuscolana. Pesce fantastico, panini squisiti, economico, personale cordiale. Stra-consigliato!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"8 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Cinzia P"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Finalmente cibo di qualit! Frittura di paranza e polipetti alla Luciana eccellenti! La frittura  espressa, leggera e fatta con olio pulito."'})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"11 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Elisa"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Ho provato due volte la frittura di calamari viene preparata espressa ed  davvero buona e leggera. Torner e sono curiosa di assaggiare altre cose!"'})]})]})]})}),s.jsx("div",{className:"relative",children:s.jsxs("div",{className:"flex gap-6 animate-scroll-right",style:F?{animationDuration:"24s"}:void 0,children:[s.jsxs("div",{className:"flex gap-6 min-w-max",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"9 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Simona Bastuanelli"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:`"Abbiamo fatto un aperifish con amici. Anche se l'ambiente  piccolo, l'ospitalit del titolare  molto alta. Personale cordiale e veloce."`})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"4 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Sonia Terrinoni"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Seconda volta abbiamo preso lasagna con misto pesce..buonissimo, porzione abbondante nessuno fastidio digestivo. Pagato 12 euro a porzione."'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Sul posto | 10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"6 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Manuela Amendola"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Pesce freschissimo cucinato in maniera creativa e leggera. Fritto fantastico! Le ragazze sono gentilissime."'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Da asporto"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsxs("div",{className:"flex",children:[[...Array(4)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E)),s.jsx(ce,{className:"w-4 h-4 text-gray-300"})]}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"9 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"MONS smons"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:`"Frittura buona, polpo e patate buonissimo. Si sente che c' cura nel preparare le cose e il fatto che ti infarinano la frittura davanti  un punto in pi."`}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Da asporto | Pranzo | 10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"2 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Domenico"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Frittura di Calamari ECCEZIONALE"'})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"3 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Piera Lucia"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Cibo di ottima qualit, titolare squisitamente accogliente lo consiglio vivamente!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Cena | 10-20 "})]})]}),s.jsxs("div",{className:"flex gap-6 min-w-max",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"9 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Simona Bastuanelli"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:`"Abbiamo fatto un aperifish con amici. Anche se l'ambiente  piccolo, l'ospitalit del titolare  molto alta. Personale cordiale e veloce."`})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"4 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Sonia Terrinoni"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Seconda volta abbiamo preso lasagna con misto pesce..buonissimo, porzione abbondante nessuno fastidio digestivo. Pagato 12 euro a porzione."'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Sul posto | 10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"6 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Manuela Amendola"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Pesce freschissimo cucinato in maniera creativa e leggera. Fritto fantastico! Le ragazze sono gentilissime."'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Da asporto"})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsxs("div",{className:"flex",children:[[...Array(4)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E)),s.jsx(ce,{className:"w-4 h-4 text-gray-300"})]}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"9 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"MONS smons"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:`"Frittura buona, polpo e patate buonissimo. Si sente che c' cura nel preparare le cose e il fatto che ti infarinano la frittura davanti  un punto in pi."`}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Da asporto | Pranzo | 10-20 "})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"2 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Domenico"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Frittura di Calamari ECCEZIONALE"'})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 w-80 flex-shrink-0",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("div",{className:"flex",children:[...Array(5)].map((O,E)=>s.jsx(ce,{className:"w-4 h-4 text-yellow-400 fill-current"},E))}),s.jsx("span",{className:"ml-2 text-sm text-gray-500",children:"3 mesi fa"})]}),s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Piera Lucia"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro leading-relaxed",children:'"Cibo di ottima qualit, titolare squisitamente accogliente lo consiglio vivamente!"'}),s.jsx("div",{className:"mt-3 text-xs text-mediterranean-marroncino",children:"Cena | 10-20 "})]})]})]})})]}),s.jsx("div",{className:"text-center mt-12",children:s.jsxs("a",{href:"https://www.google.com/search?sa=X&sca_esv=db06df8ffc1e69f4&rlz=1C1FHFK_enIT1120IT1120&biw=1536&bih=695&tbm=lcl&sxsrf=AE3TifNs-hcrJ6mdSjsE0pfVRpP_gHyCmw:1759312672336&q=recensioni%20di%20gusto%20mediterraneo&rflfq=1&num=20&stick=H4sIAAAAAAAAAONgkxIxNDA1MLc0MLI0MTc1NzK2NDYxt9jAyPiKUaEoNTk1rzgzPy9TISVTIb20uCRfITc1JbMktagoMS81fxErQSUAEn8mq2EAAAA&rldimm=10507902947572393478&hl=it-IT&ved=0CAcQ5foLahcKEwj4tte33oKQAxUAAAAAHQAAAAAQCg#arid=ChZDSUhNMG9nS0VOcVQ4TGlZbU9xekdREAE&lkt=LocalPoiReviews",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center px-6 py-3 bg-mediterranean-blu-scuro text-mediterranean-bianco rounded-lg hover:bg-opacity-90 transition-colors duration-200 font-semibold",children:[s.jsx(ce,{className:"w-5 h-5 mr-2 text-yellow-400 fill-current"}),"Vedi Tutte le Recensioni su Google"]})})]})})]})};function Li(e,t){return new Promise(r=>{try{const i=Array.from(document.querySelectorAll('[data-cart-icon="true"]')).find(C=>{const k=C.getBoundingClientRect(),N=window.getComputedStyle(C);return k.width>0&&k.height>0&&N.visibility!=="hidden"&&N.display!=="none"});if(!i){r();return}const a=e.getBoundingClientRect(),o=i.getBoundingClientRect(),c=a.left+a.width/2,l=a.top+a.height/2,u=o.left+o.width/2,d=o.top+o.height/2,m=28,h=document.createElement("div"),b="http://www.w3.org/2000/svg",j=document.createElementNS(b,"svg");j.setAttribute("viewBox","0 0 24 24"),j.setAttribute("width",`${m}`),j.setAttribute("height",`${m}`);const v=document.createElementNS(b,"path");v.setAttribute("d","M3 11.5 L21 2.5 L12 21.5 L10 14.5 L3 12.5 Z"),v.setAttribute("fill","#FFFFFF"),v.setAttribute("stroke","#9C6B3D"),v.setAttribute("stroke-width","1.5"),v.setAttribute("vector-effect","non-scaling-stroke");const w=document.createElementNS(b,"path");w.setAttribute("d","M12 12 L21 3"),w.setAttribute("stroke","#9C6B3D"),w.setAttribute("stroke-width","1.5"),w.setAttribute("fill","none"),w.setAttribute("vector-effect","non-scaling-stroke"),j.appendChild(v),j.appendChild(w),h.appendChild(j),h.style.position="fixed",h.style.left=`${c-m/2}px`,h.style.top=`${l-m/2}px`,h.style.width=`${m}px`,h.style.height=`${m}px`,h.style.zIndex="9999",h.style.pointerEvents="none",h.style.transform="translate(0, 0) scale(1) rotate(-15deg)",h.style.opacity="1",h.style.transition="transform 750ms cubic-bezier(0.22, 1, 0.36, 1), opacity 750ms",h.style.filter="drop-shadow(0 6px 12px rgba(0,0,0,0.18))",document.body.appendChild(h),h.getBoundingClientRect();const g=u-c,p=d-l;h.style.transform=`translate(${g}px, ${p}px) scale(0.6) rotate(-15deg)`,h.style.opacity="0.2";const f=()=>{h.removeEventListener("transitionend",_),h.remove()},x=()=>{i.classList.add("cart-bump"),setTimeout(()=>i.classList.remove("cart-bump"),350)},_=()=>{f(),x(),r()};h.addEventListener("transitionend",_),setTimeout(()=>{document.body.contains(h)&&_()},1e3)}catch{r()}})}const tw=()=>{const{addItem:e}=Ks(),{user:t}=ct(),{fixedMenuDishes:r,loading:n,fetchMenuDishes:i,initializeSampleDishes:a}=Kr(),[o,c]=y.useState({}),[l,u]=y.useState("all"),[d,m]=y.useState([]),[h,b]=y.useState(!1),[j,v]=y.useState(!1),[w,g]=y.useState(!1),[p,f]=y.useState(!1),[x,_]=y.useState([]),[C,k]=y.useState(null),[N,S]=y.useState([]),[A,$]=y.useState(null),I=["calamari","gamberi","alici","moscardini","paranza"],q=["polpette di tonno e ricotta","zeppole con alghe di mare","code di mazzancolla","bocconcini di gamberi e zucchine"];y.useEffect(()=>{i("fixed")},[i]);const ee=async()=>{await a(),await i("fixed")},se=[{id:"all",label:"Tutte le categorie"},{id:"antipasti",label:"Antipasti"},{id:"primi",label:"Primi Piatti"},{id:"secondi",label:"Secondi Piatti"},{id:"contorni",label:"Contorni e Insalate"},{id:"fritture",label:"Fritture"},{id:"panini",label:"Panini"},{id:"vini",label:"Vini"}],Ne=[{id:"senza-glutine",label:"Senza Glutine"},{id:"senza-lattosio",label:"Senza Lattosio"},{id:"crudo",label:"Crudi"},{id:"grigliato",label:"Grigliati"},{id:"vegetariano",label:"Vegetariano"}],W=z=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(z),T=z=>({antipasti:"Antipasti",primi:"Primi Piatti",secondi:"Secondi Piatti",contorni:"Contorni",fritture:"Fritture",panini:"Panini",vini:"Vini"})[z]||z,P=r.map(z=>({...z.dish,assignmentAvailable:z.is_available})).filter(z=>z!==null),L=P.filter(z=>{if(!z)return!1;const O=l==="all"||z.category===l,E=d.length===0||d.some(V=>{var D,te;switch(V){case"senza-glutine":return!z.allergens.includes("glutine");case"senza-lattosio":return!z.allergens.includes("latte");case"crudo":return((D=z.tags)==null?void 0:D.includes("crudo"))||!1;case"grigliato":return((te=z.tags)==null?void 0:te.includes("grigliato"))||!1;case"vegetariano":return!z.allergens.includes("pesce")&&!z.allergens.includes("molluschi")&&!z.allergens.includes("crostacei");default:return!0}});return O&&E}),G=z=>{m(O=>O.includes(z)?O.filter(E=>E!==z):[...O,z])},R=async(z,O)=>{if(!t){v(!0);return}if(await Li(z.currentTarget,O==null?void 0:O.image_url),O.pricing_type==="by_weight"||Array.isArray(O.tags)&&O.tags.includes("by_weight")){const V=o[O.id]||100,D=(O.price||0)*(V/100);e({id:O.id,name:O.name,price:D,category:O.category,pricing_type:"by_weight",weight_grams:V,notes:`${V}g @ ${O.price.toFixed(2)}/100g`})}else e({id:O.id,name:O.name,price:O.price,category:O.category,pricing_type:"fixed"})},H=z=>{_(O=>O.includes(z)?O.filter(E=>E!==z):[...O,z]),k(null)},U=async z=>{if(!t){v(!0);return}if(x.length===0){k("Seleziona almeno un ingrediente della frittura");return}const O=[...x].sort(),V=`custom-frittura:${O.length>0?O.join("|"):"base"}`,te=`Componi la tua frittura${O.length>0?`  ${O.join(", ")}`:""}`;await Li(z.currentTarget),e({id:V,name:te,price:10,category:"fritture"}),f(!1)},Y=z=>{S(O=>O.includes(z)?O.filter(E=>E!==z):[...O,z]),$(null)},F=async z=>{if(!t){v(!0);return}if(N.length===0){$("Seleziona almeno un fritto");return}const O=[...N].sort(),V=`fritti-vari:${O.join("|")}`,te=`Fritti vari${`  ${O.join(", ")}`}`;await Li(z.currentTarget),e({id:V,name:te,price:5,category:"fritture"}),S([])},Tt=(()=>{const z={};return l==="all"?se.slice(1).forEach(O=>{z[O.id]=P.filter(E=>E&&E.category===O.id&&(d.length===0||d.some(V=>{var D,te;switch(V){case"senza-glutine":return!E.allergens.includes("glutine");case"senza-lattosio":return!E.allergens.includes("latte");case"crudo":return((D=E.tags)==null?void 0:D.includes("crudo"))||!1;case"grigliato":return((te=E.tags)==null?void 0:te.includes("grigliato"))||!1;case"vegetariano":return!E.allergens.includes("pesce")&&!E.allergens.includes("molluschi")&&!E.allergens.includes("crostacei");default:return!0}})))}):z[l]=L,z})();return n?s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-center items-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino"}),s.jsx("span",{className:"ml-3 text-mediterranean-blu-scuro",children:"Caricamento menu fisso..."})]})})}):s.jsxs("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-mediterranean-blu-scuro mb-4",children:"Men Fisso"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-2xl mx-auto",children:"La nostra selezione permanente di specialit mediterranee preparate con pesce fresco di prima qualit."})]}),s.jsx("div",{className:"mb-6",children:s.jsx(ae,{className:"bg-gradient-to-r from-mediterranean-blu-scuro to-mediterranean-blu-medio text-white",children:s.jsxs("div",{className:"text-center py-3 md:py-4",children:[s.jsx(Ct,{className:"w-8 h-8 md:w-10 md:h-10 mx-auto mb-2 md:mb-3 text-mediterranean-bianco"}),s.jsx("h3",{className:"font-serif text-lg md:text-xl font-bold mb-2",children:"Crudo di Pesce Fresco"}),s.jsxs("p",{className:"text-mediterranean-bianco/90 mb-3 max-w-2xl mx-auto text-sm md:text-base px-4",children:["Su ordinazione  possibile gustare il nostro crudo di pesce freschissimo, preparato con il pescato del giorno. ",s.jsx("strong",{children:"Prenotazione richiesta almeno un giorno prima."})]}),s.jsxs(Q,{onClick:()=>window.open("tel:+393123456789","_self"),className:"bg-mediterranean-marroncino hover:bg-mediterranean-marroncino/90 text-white font-semibold py-2 px-4 md:py-3 md:px-6 rounded-lg transition-colors duration-200 inline-flex items-center text-sm md:text-base",children:[s.jsx(_r,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Chiama per Prenotare"]})]})})}),r.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Ct,{className:"w-24 h-24 text-mediterranean-marroncino mx-auto mb-6 opacity-50"}),s.jsx("h3",{className:"text-2xl font-serif font-semibold text-mediterranean-blu-scuro mb-4",children:"Menu Fisso in Preparazione"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-md mx-auto",children:"Il nostro chef sta preparando la selezione permanente di specialit. Torna presto per scoprire i nostri piatti fissi!"})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-6",children:se.map(z=>s.jsx("button",{onClick:()=>u(z.id),className:`px-4 py-2 rounded-lg font-medium transition-all ${l===z.id?"bg-mediterranean-marroncino text-mediterranean-bianco shadow-md":"bg-mediterranean-bianco text-mediterranean-blu-scuro hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco"}`,children:z.label},z.id))}),s.jsx("div",{className:"text-center",children:s.jsxs("button",{onClick:()=>b(!h),className:"inline-flex items-center space-x-2 px-4 py-2 bg-mediterranean-bianco rounded-lg text-mediterranean-blu-scuro hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco transition-colors",children:[s.jsx(Ff,{className:"w-4 h-4"}),s.jsx("span",{children:"Filtri"}),d.length>0&&s.jsx("span",{className:"bg-mediterranean-marroncino text-mediterranean-bianco px-2 py-1 rounded-full text-xs",children:d.length})]})}),h&&s.jsx("div",{className:"mt-4 p-4 bg-mediterranean-bianco rounded-lg",children:s.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[Ne.map(z=>s.jsx("button",{onClick:()=>G(z.id),className:`px-3 py-2 rounded-lg text-sm transition-all ${d.includes(z.id)?"bg-mediterranean-marroncino text-mediterranean-bianco":"bg-mediterranean-beige text-mediterranean-blu-scuro hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco"}`,children:z.label},z.id)),d.length>0&&s.jsx("button",{onClick:()=>m([]),className:"px-3 py-2 rounded-lg text-sm bg-red-100 text-red-700 hover:bg-red-200 transition-colors",children:s.jsx(Qr,{className:"w-4 h-4"})})]})})]}),s.jsx("div",{className:"space-y-12",children:Object.entries(Tt).map(([z,O])=>{var V;if(O.length===0)return null;const E=((V=se.find(D=>D.id===z))==null?void 0:V.label)||z;return s.jsxs("div",{children:[l==="all"&&s.jsx("h2",{className:"font-serif text-2xl font-bold text-mediterranean-blu-scuro mb-4 text-center",children:E}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[z==="fritture"&&s.jsxs(ae,{className:"h-full flex flex-col border-2 border-mediterranean-marroncino/40",children:[s.jsx("div",{className:"w-full h-40 overflow-hidden rounded-t-lg",children:s.jsx("img",{src:"/images/img.webp",alt:"Frittura mista",className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-serif text-lg font-semibold text-mediterranean-blu-scuro",children:"Componi la tua frittura"}),s.jsx("span",{className:"text-lg font-bold text-mediterranean-marroncino ml-4",children:W(10)})]}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-3 leading-relaxed",children:"Scegli liberamente tra calamari, gamberi, alici, moscardini e paranza. Il prezzo resta fisso."}),s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-mediterranean-beige text-mediterranean-blu-scuro",children:"Fritture"})}),s.jsx("p",{className:"text-sm font-medium text-mediterranean-blu-scuro mb-2",children:"Personalizza la tua frittura:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(D=>{const te=x.includes(D);return s.jsxs("button",{type:"button",onClick:()=>H(D),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm capitalize transition-colors ${te?"bg-mediterranean-marroncino text-white border-mediterranean-marroncino":"bg-white text-mediterranean-blu-scuro border-mediterranean-beige hover:bg-mediterranean-beige"}`,children:[s.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-mediterranean-beige text-mediterranean-blu-scuro font-semibold",children:"+"}),s.jsx("span",{children:D})]},D)})}),C&&s.jsx("p",{className:"mt-3 text-sm text-red-600",children:C})]}),s.jsx("div",{className:"p-4 pt-0",children:s.jsxs(Q,{onClick:D=>U(D),className:"w-full",disabled:x.length===0,title:x.length===0?"Seleziona almeno un ingrediente":void 0,children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"Aggiungi al Carrello"]})})]}),z==="fritture"&&s.jsxs(ae,{className:"h-full flex flex-col border-2 border-mediterranean-marroncino/40",children:[s.jsx("div",{className:"w-full h-40 overflow-hidden rounded-t-lg",children:s.jsx("img",{src:"/images/frittivari.jpg",alt:"Fritti vari",className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-serif text-lg font-semibold text-mediterranean-blu-scuro",children:"Fritti vari"}),s.jsx("span",{className:"text-lg font-bold text-mediterranean-marroncino ml-4",children:W(5)})]}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-3 leading-relaxed",children:"6pz dei nostri migliori fritti"}),s.jsx("div",{className:"mb-4",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-mediterranean-beige text-mediterranean-blu-scuro",children:"Fritture"})}),s.jsx("p",{className:"text-sm font-medium text-mediterranean-blu-scuro mb-2",children:"Seleziona i fritti desiderati:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:q.map(D=>{const te=N.includes(D);return s.jsxs("button",{type:"button",onClick:()=>Y(D),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm transition-colors ${te?"bg-mediterranean-marroncino text-white border-mediterranean-marroncino":"bg-white text-mediterranean-blu-scuro border-mediterranean-beige hover:bg-mediterranean-beige"}`,children:[s.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-mediterranean-beige text-mediterranean-blu-scuro font-semibold",children:"+"}),s.jsx("span",{className:"capitalize",children:D})]},D)})}),A&&s.jsx("p",{className:"mt-3 text-sm text-red-600",children:A})]}),s.jsx("div",{className:"p-4 pt-0",children:s.jsxs(Q,{onClick:D=>F(D),className:"w-full",disabled:N.length===0,title:N.length===0?"Seleziona almeno un fritto":void 0,children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),"Aggiungi al Carrello"]})})]}),O.map(D=>{var te,fe;return s.jsxs(ae,{className:"h-full flex flex-col",children:[D.image_url&&s.jsx("div",{className:"w-full h-40 overflow-hidden rounded-t-lg",children:s.jsx("img",{src:D.image_url,alt:D.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-serif text-lg font-semibold text-mediterranean-blu-scuro",children:D.name}),s.jsx("span",{className:"text-lg font-bold text-mediterranean-marroncino ml-4",children:D.pricing_type==="by_weight"||(te=D.tags)!=null&&te.includes("by_weight")?`${W(D.price)} / 100g`:`${W(D.price)}`})]}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-3 leading-relaxed",children:D.description}),s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-mediterranean-beige text-mediterranean-blu-scuro",children:T(D.category)})}),D.allergens.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-xs text-mediterranean-blu-scuro opacity-75 mb-1",children:"Allergeni:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:D.allergens.map((X,rt)=>s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:X},rt))})]}),D.tags&&D.tags.filter(X=>X!=="by_weight").length>0&&s.jsx("div",{className:"mb-3",children:s.jsx("div",{className:"flex flex-wrap gap-1",children:D.tags.filter(X=>X!=="by_weight").map((X,rt)=>s.jsx("span",{className:"px-2 py-1 bg-mediterranean-beige text-mediterranean-blu-scuro text-xs rounded-full",children:X},rt))})}),(D.pricing_type==="by_weight"||((fe=D.tags)==null?void 0:fe.includes("by_weight")))&&s.jsxs("div",{className:"mb-4 p-3 bg-mediterranean-beige/50 border border-mediterranean-marroncino/30 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("button",{type:"button",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-mediterranean-marroncino/20 hover:bg-mediterranean-marroncino/30 text-mediterranean-marroncino text-xl font-bold flex items-center justify-center",onClick:()=>c(X=>{const rt=X[D.id]??100,de=Math.max(50,rt-50);return{...X,[D.id]:de}}),children:"-"}),s.jsxs("span",{className:"font-semibold min-w-[70px] text-center text-lg sm:text-xl",children:[o[D.id]??100,"g"]}),s.jsx("button",{type:"button",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-mediterranean-marroncino/20 hover:bg-mediterranean-marroncino/30 text-mediterranean-marroncino text-xl font-bold flex items-center justify-center",onClick:()=>c(X=>{const de=(X[D.id]??100)+50;return{...X,[D.id]:de}}),children:"+"})]}),s.jsxs("span",{className:"ml-2 text-mediterranean-marroncino font-bold text-lg sm:text-xl",children:["Totale: ",W((D.price||0)*((o[D.id]??100)/100))]})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Regola il peso in step da 50g"})]})]}),s.jsx("div",{className:"p-4 pt-0",children:s.jsxs(Q,{onClick:X=>R(X,D),className:"w-full",disabled:!D.assignmentAvailable||!D.available,children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),D.assignmentAvailable&&D.available?"Aggiungi al Carrello":"Non Disponibile"]})})]},D.id)})]})]},z)})}),L.length===0&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro mb-4",children:"Nessun piatto trovato con i filtri selezionati."}),r.length===0&&s.jsx(Q,{onClick:ee,className:"bg-mediterranean-marroncino hover:bg-mediterranean-marroncino/90 text-white",children:"Inizializza Piatti di Esempio"})]})]})]}),s.jsx(An,{isOpen:j,onClose:()=>v(!1),onSwitchToRegister:()=>{v(!1),g(!0)}}),s.jsx(Rn,{isOpen:w,onClose:()=>g(!1),onSwitchToLogin:()=>{g(!1),v(!0)}}),p&&s.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Componi la tua frittura"}),s.jsxs("p",{className:"text-sm text-mediterranean-blu-scuro mb-4",children:["Seleziona gli ingredienti desiderati. Il prezzo resta fisso a ",W(10),"."]}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:I.map(z=>{const O=x.includes(z);return s.jsxs("button",{type:"button",onClick:()=>H(z),className:`inline-flex items-center gap-2 rounded-full border px-3 py-1 text-sm capitalize transition-colors ${O?"bg-mediterranean-marroncino text-white border-mediterranean-marroncino":"bg-white text-mediterranean-blu-scuro border-mediterranean-beige hover:bg-mediterranean-beige"}`,children:[s.jsx("span",{className:"inline-flex items-center justify-center w-5 h-5 rounded-full bg-mediterranean-beige text-mediterranean-blu-scuro font-semibold",children:"+"}),s.jsx("span",{children:z})]},z)})}),C&&s.jsx("p",{className:"-mt-4 mb-6 text-sm text-red-600",children:C}),s.jsxs("div",{className:"flex justify-end space-x-3",children:[s.jsx(Q,{variant:"outline",onClick:()=>f(!1),children:"Annulla"}),s.jsx(Q,{onClick:U,disabled:x.length===0,title:x.length===0?"Seleziona almeno un ingrediente":void 0,children:"Aggiungi al Carrello"})]})]})})]})},rw=()=>{const{addItem:e}=Ks(),{user:t}=ct(),{dailyMenuDishes:r,loading:n,fetchMenuDishes:i}=Kr(),[a,o]=y.useState(!1),[c,l]=y.useState(!1),[u,d]=y.useState({});y.useEffect(()=>{i("daily")},[i]);const m=async(w,g)=>{if(!t){o(!0);return}if(await Li(w.currentTarget,g==null?void 0:g.image_url),(g==null?void 0:g.pricing_type)==="by_weight"||Array.isArray(g.tags)&&g.tags.includes("by_weight")){const f=u[g.id]||100,x=(g.price||0)*(f/100);e({id:g.id,name:g.name,price:x,category:g.category,pricing_type:"by_weight",weight_grams:f,notes:`${f}g @ ${g.price.toFixed(2)}/100g`})}else e({id:g.id,name:g.name,price:g.price,category:g.category,pricing_type:"fixed"})},h=w=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(w),b=w=>({antipasti:"Antipasti",primi:"Primi Piatti",secondi:"Secondi Piatti",contorni:"Contorni",fritture:"Fritture",panini:"Panini",vini:"Vini"})[w]||w,j=[{id:"antipasti",label:"Antipasti"},{id:"primi",label:"Primi Piatti"},{id:"secondi",label:"Secondi Piatti"},{id:"contorni",label:"Contorni e Insalate"},{id:"fritture",label:"Fritture"},{id:"panini",label:"Panini"},{id:"vini",label:"Vini"}],v=new Date().toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return n?s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-center items-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino"}),s.jsx("span",{className:"ml-3 text-mediterranean-blu-scuro",children:"Caricamento menu del giorno..."})]})})}):s.jsxs("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-mediterranean-blu-scuro mb-4",children:"Men del Giorno"}),s.jsx("p",{className:"text-lg text-mediterranean-marroncino mb-2",children:v}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-2xl mx-auto",children:"Le nostre specialit quotidiane preparate con il pescato fresco del giorno."})]}),s.jsx("div",{className:"mb-6",children:s.jsx(ae,{className:"bg-gradient-to-r from-mediterranean-blu-scuro to-mediterranean-blu-medio text-white",children:s.jsxs("div",{className:"text-center py-3 md:py-4",children:[s.jsx(Ct,{className:"w-8 h-8 md:w-10 md:h-10 mx-auto mb-2 md:mb-3 text-mediterranean-bianco"}),s.jsx("h3",{className:"font-serif text-lg md:text-xl font-bold mb-2",children:"Crudo di Pesce Fresco"}),s.jsxs("p",{className:"text-mediterranean-bianco/90 mb-3 max-w-2xl mx-auto text-sm md:text-base px-4",children:["Su ordinazione  possibile gustare il nostro crudo di pesce freschissimo, preparato con il pescato del giorno. ",s.jsx("strong",{children:"Prenotazione richiesta almeno un giorno prima."})]}),s.jsxs(Q,{onClick:()=>window.open("tel:+393123456789","_self"),className:"bg-mediterranean-marroncino hover:bg-mediterranean-marroncino/90 text-white font-semibold py-2 px-4 md:py-3 md:px-6 rounded-lg transition-colors duration-200 inline-flex items-center text-sm md:text-base",children:[s.jsx(_r,{className:"w-4 h-4 md:w-5 md:h-5 mr-2"}),"Chiama per Prenotare"]})]})})}),r.length===0?s.jsxs("div",{className:"text-center py-16",children:[s.jsx(Ct,{className:"w-24 h-24 text-mediterranean-marroncino mx-auto mb-6 opacity-50"}),s.jsx("h3",{className:"text-2xl font-serif font-semibold text-mediterranean-blu-scuro mb-4",children:"Menu del Giorno in Preparazione"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-md mx-auto",children:"Il nostro chef sta preparando le specialit del giorno. Torna presto per scoprire le delizie fresche di oggi!"})]}):s.jsx("div",{className:"space-y-12 mb-12",children:j.map(w=>{const g=r.filter(p=>p.dish&&p.dish.category===w.id);return g.length===0?null:s.jsxs("div",{children:[s.jsx("h2",{className:"font-serif text-2xl font-bold text-mediterranean-blu-scuro mb-4 text-center",children:w.label}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:g.map(p=>{var x,_;const f=p.dish;return s.jsxs(ae,{className:"h-full flex flex-col relative overflow-hidden",children:[s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsx("span",{className:"bg-mediterranean-marroncino text-mediterranean-bianco px-3 py-1 rounded-full text-sm font-medium",children:"Speciale"})}),f.image_url&&s.jsx("div",{className:"w-full h-40 overflow-hidden",children:s.jsx("img",{src:f.image_url,alt:f.name,className:"w-full h-full object-cover"})}),s.jsxs("div",{className:"flex-1 p-4",children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsx("h3",{className:"font-serif text-lg font-semibold text-mediterranean-blu-scuro pr-4",children:f.name}),s.jsx("span",{className:"text-lg font-bold text-mediterranean-marroncino",children:f.pricing_type==="by_weight"||(x=f.tags)!=null&&x.includes("by_weight")?`${h(f.price)} / 100g`:`${h(f.price)}`})]}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-3 leading-relaxed",children:f.description}),s.jsx("div",{className:"mb-3",children:s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-mediterranean-beige text-mediterranean-blu-scuro",children:b(f.category)})}),f.allergens.length>0&&s.jsxs("div",{className:"mb-3",children:[s.jsx("p",{className:"text-xs text-mediterranean-blu-scuro opacity-75 mb-1",children:"Allergeni:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:f.allergens.map((C,k)=>s.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:C},k))})]}),(f.pricing_type==="by_weight"||((_=f.tags)==null?void 0:_.includes("by_weight")))&&s.jsxs("div",{className:"mt-2 p-4 bg-mediterranean-beige border border-mediterranean-marroncino/20 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("button",{type:"button",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-mediterranean-marroncino/20 hover:bg-mediterranean-marroncino/30 text-mediterranean-marroncino text-xl font-bold flex items-center justify-center",onClick:()=>d(C=>{const k=C[f.id]??100,N=Math.max(50,k-50);return{...C,[f.id]:N}}),children:""}),s.jsxs("span",{className:"font-semibold min-w-[70px] text-center text-lg sm:text-xl",children:[u[f.id]??100,"g"]}),s.jsx("button",{type:"button",className:"w-10 h-10 sm:w-12 sm:h-12 rounded-full bg-mediterranean-marroncino/20 hover:bg-mediterranean-marroncino/30 text-mediterranean-marroncino text-xl font-bold flex items-center justify-center",onClick:()=>d(C=>{const N=(C[f.id]??100)+50;return{...C,[f.id]:N}}),children:"+"}),s.jsxs("span",{className:"ml-4 text-mediterranean-marroncino font-bold text-lg sm:text-xl",children:["Totale: ",h((f.price||0)*((u[f.id]??100)/100))]})]}),s.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Regola il peso in step da 50g"})]})]}),s.jsx("div",{className:"p-4 pt-0",children:s.jsxs(Q,{onClick:C=>m(C,f),className:"w-full",disabled:!p.is_available||!f.available,children:[s.jsx(ft,{className:"w-4 h-4 mr-2"}),p.is_available&&f.available?"Aggiungi al Carrello":"Non Disponibile"]})})]},p.id)})})]},w.id)})})]}),s.jsx(An,{isOpen:a,onClose:()=>o(!1),onSwitchToRegister:()=>{o(!1),l(!0)}}),s.jsx(Rn,{isOpen:c,onClose:()=>l(!1),onSwitchToLogin:()=>{l(!1),o(!0)}})]})},jd=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,_d=()=>{const{items:e,updateQuantity:t,removeItem:r,clearCart:n,total:i,itemsCount:a,discountInfo:o,discountLoading:c}=Ks(),{user:l}=ct(),u=Ea(),d=Pt(),[m,h]=y.useState({name:"",phone:"",email:"",pickupDate:"",pickupTime:"",paymentMethod:"pickup",notes:"",privacyConsent:!1}),[b,j]=y.useState(!1),[v,w]=y.useState(""),[g,p]=y.useState(null),[f,x]=y.useState(!1),[_,C]=y.useState(!1),[k,N]=y.useState(!1),[S,A]=y.useState(null),$=R=>{try{if(!R)return"";const H=R.includes("T");return new Date(H?R:`${R}T00:00:00`).toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"})}catch{return R}};y.useEffect(()=>{const R=d.state;if(!R)return;const{orderConfirmed:H,orderNumber:U,discountInfo:Y,orderSummary:F,orderId:le}=R||{};typeof H<"u"&&j(!!H),typeof U<"u"&&w(U),typeof Y<"u"&&p(Y),typeof F<"u"&&A(F),(async()=>{if(!(!le||F))try{const{data:z,error:O}=await J.from("orders").select("id, order_number, customer_name, customer_email, customer_phone, pickup_date, pickup_time, payment_method, total_amount, notes").eq("id",le).single();if(O)throw O;let{data:E,error:V}=await J.from("order_items").select("dish_name, dish_price, quantity, subtotal, pricing_type, weight_grams").eq("order_id",le);if(V){const te=String(V.message||"").toLowerCase();if(te.includes("pricing_type")||te.includes("weight_grams")){const{data:fe,error:X}=await J.from("order_items").select("dish_name, dish_price, quantity, subtotal").eq("order_id",le);if(X)throw X;E=fe}else throw V}const D={customer_name:z.customer_name,customer_email:z.customer_email,customer_phone:z.customer_phone,pickup_date:z.pickup_date,pickup_time:z.pickup_time,payment_method:z.payment_method,total_amount:z.total_amount,notes:z.notes,items:(E||[]).map(te=>({name:te.dish_name,price:te.dish_price,quantity:te.quantity,subtotal:te.subtotal,pricing_type:te.pricing_type,weight_grams:te.weight_grams}))};w(z.order_number),A(D)}catch(z){console.error("Errore nel recupero riepilogo ordine:",z)}})()},[d.state]),y.useEffect(()=>{const R=d.state;R!=null&&R.orderConfirmed&&(j(!0),R.orderNumber&&w(R.orderNumber),R.discountInfo&&p(R.discountInfo))},[d.state]);const I=(R=new Date)=>{const H=R.getDay();return H===1||H===0?[]:["11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","17:00","17:30","18:00","18:30","19:00","19:30","20:00","20:30","21:00","21:30","22:00"]},q=()=>{const R=[],H=new Date;for(let U=0;U<14;U++){const Y=new Date(H);if(Y.setDate(H.getDate()+U),Y.getDay()!==0&&Y.getDay()!==1&&R.push({value:Y.toISOString().split("T")[0],label:Y.toLocaleDateString("it-IT",{weekday:"long",day:"numeric",month:"long"}),date:Y}),R.length>=7)break}return R},ee=(R,H=new Date)=>{const U=new Date,[Y,F]=R.split(":").map(Number),le=new Date(H);le.setHours(Y,F,0,0);const Tt=new Date(U.getTime()+30*60*1e3);return le>Tt},se=R=>{let H=new Date;return R&&(H=new Date(R+"T00:00:00")),I(H).filter(Y=>ee(Y,H))},Ne=q(),W=se(m.pickupDate),T=R=>{const{name:H,value:U,type:Y}=R.target;h(H==="pickupDate"?F=>({...F,[H]:U,pickupTime:""}):F=>({...F,[H]:Y==="checkbox"?R.target.checked:U}))},P=()=>{const R=/^[+]?[\d\s\-()]{10,}$/,H=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return m.name.trim()?R.test(m.phone)?H.test(m.email)?m.pickupDate?m.pickupTime?m.privacyConsent?e.length===0?(alert("Il carrello  vuoto. Aggiungi almeno un piatto per continuare."),!1):!0:(alert("Devi accettare l'informativa sulla privacy"),!1):(alert("Seleziona un orario di ritiro"),!1):(alert("Seleziona una data di ritiro"),!1):(alert("Inserisci un indirizzo email valido"),!1):(alert("Inserisci un numero di telefono valido"),!1):(alert("Il nome  obbligatorio"),!1)},L=async R=>{var H,U,Y,F,le,Tt,z,O,E,V,D,te;if(R.preventDefault(),!l){console.error("Tentativo di ordine senza autenticazione bloccato"),alert("Errore: devi essere autenticato per effettuare un ordine.");return}if(P()){if(console.log("User authenticated:",{id:l.id,email:l.email,authenticated:!!l}),m.paymentMethod==="online"){if(c){alert("Calcolo sconto in corso. Attendi qualche secondo e riprova.");return}const fe=o&&typeof o.final_amount=="number"?Number(o.final_amount):i,X={user_id:l.id,customer_name:m.name,customer_email:m.email,customer_phone:m.phone,pickup_date:m.pickupDate,pickup_time:m.pickupTime,payment_method:m.paymentMethod,total_amount:fe,original_total:i,notes:m.notes||null,items:e,discountInfo:o};sessionStorage.setItem("pendingOrder",JSON.stringify(X)),u("/pagamento");return}x(!0);try{const fe={user_id:l.id,customer_name:m.name,customer_email:m.email,customer_phone:m.phone,pickup_date:m.pickupDate,pickup_time:m.pickupTime,payment_method:m.paymentMethod,payment_status:m.paymentMethod==="pickup"?"pending":"paid",total_amount:i,notes:m.notes||null};let X=null,rt=null;for(let ye=0;ye<5;ye++){const{data:Da,error:Js}=await J.from("orders").insert([fe]).select().single();if(X=Da,rt=Js,!rt)break;const za=(H=rt.code)==null?void 0:H.toString(),Uc=(U=rt.status)==null?void 0:U.toString();if(!(za==="23505"||za==="409"||Uc==="409"))break;const lp=150+Math.floor(Math.random()*250);await new Promise(cp=>setTimeout(cp,lp))}if(rt)throw rt;console.log("Applying discount to order:",{orderId:X.id,userId:l.id,originalTotal:i});const{data:de,error:$c}=await J.rpc("apply_discount_to_order",{order_uuid:X.id,user_uuid:l.id,original_total:i});$c?console.error("Error applying discount:",$c):console.log("Discount applied successfully:",de);const Fc=e.map(ye=>({order_id:X.id,customer_name:m.name,dish_id:typeof ye.id=="string"&&jd.test(ye.id)?ye.id:null,dish_name:ye.name,dish_price:ye.price,quantity:ye.quantity,subtotal:ye.price*ye.quantity,pricing_type:ye.pricing_type,weight_grams:ye.weight_grams??null}));let{error:Ma}=await J.from("order_items").insert(Fc);if(Ma){const ye=String(Ma.message||"").toLowerCase();if(ye.includes("pricing_type")||ye.includes("weight_grams")){console.warn("order_items table seems to miss weight/pricing columns. Retrying insert without these columns.");const Da=Fc.map(({pricing_type:za,weight_grams:Uc,...Bc})=>Bc),{error:Js}=await J.from("order_items").insert(Da);if(Js)throw Js}else throw Ma}w(X.order_number),de&&de[0]&&de[0].discount_info&&p(de[0].discount_info);const op={customer_name:m.name,customer_email:m.email,customer_phone:m.phone,pickup_date:m.pickupDate,pickup_time:m.pickupTime,payment_method:m.paymentMethod,items:e.map(ye=>({name:ye.name,quantity:ye.quantity,subtotal:ye.price*ye.quantity,pricing_type:ye.pricing_type,weight_grams:ye.weight_grams??null})),original_amount:i,discount_type:((F=(Y=de==null?void 0:de[0])==null?void 0:Y.discount_info)==null?void 0:F.discount_type)??(o==null?void 0:o.discount_type)??null,discount_percentage:((Tt=(le=de==null?void 0:de[0])==null?void 0:le.discount_info)==null?void 0:Tt.discount_percentage)??(o==null?void 0:o.discount_percentage)??null,discount_amount:((O=(z=de==null?void 0:de[0])==null?void 0:z.discount_info)==null?void 0:O.discount_amount)??(o==null?void 0:o.discount_amount)??null,total_amount:((V=(E=de==null?void 0:de[0])==null?void 0:E.discount_info)==null?void 0:V.final_amount)??(o==null?void 0:o.final_amount)??i};A(op),j(!0),n(),console.log("Order submitted successfully:",{orderNumber:X.order_number,customer:m,items:e,originalTotal:i,discountApplied:((D=de==null?void 0:de[0])==null?void 0:D.success)||!1,discountInfo:((te=de==null?void 0:de[0])==null?void 0:te.discount_info)||null,timestamp:new Date().toISOString()})}catch(fe){console.error("Error submitting order:",fe),console.error("Error details:",{message:fe.message,code:fe.code,details:fe.details,hint:fe.hint,user:l==null?void 0:l.id,orderData:{user_id:l==null?void 0:l.id,customer_name:m.name,customer_email:m.email,customer_phone:m.phone,pickup_date:m.pickupDate,pickup_time:m.pickupTime,payment_method:m.paymentMethod,total_amount:i},items:e.map(X=>({dish_id:typeof X.id=="string"&&jd.test(X.id)?X.id:null,dish_name:X.name,dish_price:X.price,quantity:X.quantity,subtotal:X.price*X.quantity,pricing_type:X.pricing_type,weight_grams:X.weight_grams??null}))}),alert(`Si  verificato un errore durante l'invio dell'ordine: ${fe.message||"Errore sconosciuto"}. Riprova pi tardi.`)}finally{x(!1)}}},G=()=>{window.print()};return b?s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs(ae,{className:"text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:s.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("h1",{className:"font-serif text-3xl font-bold text-mediterranean-blu-scuro mb-4",children:"Ordine Confermato!"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro mb-6",children:"Grazie per aver scelto Gusto Mediterraneo. Il tuo ordine  stato registrato con successo."}),s.jsxs("div",{className:"bg-mediterranean-beige p-6 rounded-lg mb-6 text-left",children:[s.jsx("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Riepilogo Ordine"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Numero Ordine:"}),s.jsx("p",{className:"text-2xl font-bold text-mediterranean-marroncino",children:v})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Data e Orario Ritiro:"}),s.jsxs("p",{className:"text-lg text-mediterranean-blu-scuro",children:[$((S==null?void 0:S.pickup_date)||m.pickupDate)," alle ",(S==null?void 0:S.pickup_time)||m.pickupTime]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Nome:"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:(S==null?void 0:S.customer_name)||m.name})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Email:"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:(S==null?void 0:S.customer_email)||m.email})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Telefono:"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:(S==null?void 0:S.customer_phone)||m.phone})]})]}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Modalit di Pagamento:"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro",children:((S==null?void 0:S.payment_method)||m.paymentMethod)==="pickup"?"Pagamento al Ritiro":"Pagamento Online"})]})}),s.jsxs("div",{className:"border-t pt-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Piatti Ordinati:"}),((S==null?void 0:S.items)||e).map((R,H)=>s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsxs("span",{children:[R.name,R.pricing_type==="by_weight"&&R.weight_grams?s.jsxs("span",{className:"ml-2 text-sm text-mediterranean-blu-scuro opacity-75",children:["(",R.weight_grams,"g)"]}):null," ","x",R.quantity]}),s.jsxs("span",{className:"font-semibold",children:["",(R.subtotal??R.price*R.quantity).toFixed(2)]})]},H))]}),s.jsx("div",{className:"border-t pt-4 text-right",children:g&&g.discount_amount>0?s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-gray-600",children:[s.jsx("span",{children:"Subtotale:"}),s.jsxs("span",{children:["",g.original_amount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-green-600",children:[s.jsxs("span",{children:["Sconto (",g.discount_percentage,"% - ",g.discount_type==="first_order"?"Primo ordine":"Ordine superiore a 40","):"]}),s.jsxs("span",{children:["-",g.discount_amount.toFixed(2)]})]}),s.jsxs("div",{className:"border-t pt-2",children:[s.jsxs("div",{className:"flex justify-between items-center text-xl font-bold text-mediterranean-marroncino",children:[s.jsx("span",{children:"Totale:"}),s.jsxs("span",{children:["",g.final_amount.toFixed(2)]})]}),s.jsxs("p",{className:"text-sm text-green-600 mt-1",children:["Hai risparmiato ",g.discount_amount.toFixed(2),"!"]})]})]}):s.jsxs("p",{className:"text-xl font-bold text-mediterranean-marroncino",children:["Totale: ",((S==null?void 0:S.total_amount)??i).toFixed(2)]})}),m.notes&&s.jsxs("div",{className:"border-t pt-4 mb-4",children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Note:"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:m.notes})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("p",{className:"text-mediterranean-blu-scuro",children:["Ti aspettiamo in Viale Anicio Gallo, 49, 00174 Roma RM all'orario concordato.",s.jsx("br",{}),"Per informazioni o modifiche, contattaci al +39 331 332 0411."]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(Q,{onClick:G,variant:"outline",children:"Stampa Riepilogo"}),s.jsx(Q,{onClick:()=>u("/"),children:"Ritorna alla Home"}),s.jsx(Q,{onClick:()=>u("/dashboard"),children:"Visualizza Ordine"})]})]})]})})}):l?s.jsxs("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:[s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4",children:"Prenota il Tuo Ordine"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro",children:"Completa il modulo per finalizzare il tuo ordine take away."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(ae,{className:"sticky top-24",children:[s.jsxs("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4 flex items-center",children:[s.jsx(Ls,{className:"w-5 h-5 mr-2"}),"Il Tuo Carrello (",a,")"]}),e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ls,{className:"w-16 h-16 text-mediterranean-blu-scuro opacity-50 mx-auto mb-4"}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-4",children:"Il tuo carrello  vuoto"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75 mb-4",children:"Aggiungi piatti dal nostro men per continuare"}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(Ue,{to:"/menu-fisso",children:s.jsx(Q,{variant:"outline",size:"sm",className:"w-full",children:"Men Fisso"})}),s.jsx(Ue,{to:"/menu-del-giorno",children:s.jsx(Q,{variant:"outline",size:"sm",className:"w-full",children:"Men del Giorno"})})]})]}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"space-y-4 mb-6",children:e.map(R=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-mediterranean-beige rounded-lg",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"font-medium text-mediterranean-blu-scuro",children:[R.name,R.pricing_type==="by_weight"&&R.weight_grams?s.jsxs("span",{className:"ml-2 text-sm text-mediterranean-blu-scuro opacity-75",children:["(",R.weight_grams,"g)"]}):null]}),s.jsxs("p",{className:"text-mediterranean-marroncino font-semibold",children:["",Number(R.price).toFixed(2)]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("button",{onClick:()=>t(R.id,R.quantity-1,R.weight_grams),className:"w-8 h-8 rounded-full bg-mediterranean-bianco flex items-center justify-center text-mediterranean-blu-scuro hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco transition-colors",children:s.jsx(Db,{className:"w-4 h-4"})}),s.jsx("span",{className:"w-8 text-center font-medium text-mediterranean-blu-scuro",children:R.quantity}),s.jsx("button",{onClick:()=>t(R.id,R.quantity+1,R.weight_grams),className:"w-8 h-8 rounded-full bg-mediterranean-bianco flex items-center justify-center text-mediterranean-blu-scuro hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco transition-colors",children:s.jsx(ft,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>r(R.id,R.weight_grams),className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center text-red-600 hover:bg-red-200 transition-colors ml-2",children:s.jsx(Ms,{className:"w-4 h-4"})})]})]},`${R.id}-${R.weight_grams??"fixed"}`))}),s.jsxs("div",{className:"border-t pt-4",children:[o&&o.discount_amount>0&&s.jsxs("div",{className:"space-y-2 mb-4",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm text-mediterranean-blu-scuro",children:[s.jsx("span",{children:"Subtotale:"}),s.jsxs("span",{children:["",i.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-green-600",children:[s.jsxs("span",{className:"flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"})}),"Sconto ",o.discount_type==="first_order"?"Primo Ordine":"Ordine >40"," (",o.discount_percentage,"%):"]}),s.jsxs("span",{children:["-",o.discount_amount.toFixed(2)]})]}),s.jsx("div",{className:"border-t pt-2",children:s.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold text-mediterranean-blu-scuro",children:[s.jsx("span",{children:"Totale:"}),s.jsxs("div",{className:"text-right",children:[s.jsxs("span",{className:"text-mediterranean-marroncino",children:["",o.final_amount.toFixed(2)]}),s.jsxs("div",{className:"text-xs text-green-600 font-normal",children:["Risparmi ",o.discount_amount.toFixed(2),"!"]})]})]})})]}),(!o||o.discount_amount===0)&&s.jsxs("div",{className:"flex justify-between items-center text-lg font-semibold text-mediterranean-blu-scuro",children:[s.jsx("span",{children:"Totale:"}),s.jsxs("span",{className:"text-mediterranean-marroncino",children:["",i.toFixed(2)]})]}),c&&s.jsxs("div",{className:"flex justify-center items-center py-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-mediterranean-marroncino"}),s.jsx("span",{className:"ml-2 text-sm text-mediterranean-blu-scuro",children:"Calcolo sconto..."})]}),l&&o&&o.discount_type==="first_order"&&o.discount_amount===0&&!c&&s.jsx("div",{className:"mt-2 p-3 bg-gradient-to-r from-green-50 to-emerald-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"bg-green-100 rounded-full p-1 mr-2 mt-0.5",children:s.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-semibold text-green-800 mb-1",children:" Sconto primo ordine del 10%!"}),s.jsx("p",{className:"text-xs text-green-700",children:"Questo  il tuo primo ordine! Riceverai automaticamente il 10% di sconto su qualsiasi importo."})]})]})}),l&&o&&o.discount_type==="amount_threshold"&&o.discount_amount===0&&i>=40&&!c&&s.jsx("div",{className:"mt-2 p-2 bg-green-50 border border-green-200 rounded-lg",children:s.jsxs("div",{className:"flex items-center text-sm text-green-700",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Ordine idoneo per sconto del 10%! (Totale superiore a 40)"]})}),l&&o&&o.discount_type==="none"&&i>0&&i<40&&!c&&s.jsx("div",{className:"mt-2 p-3 bg-gradient-to-r from-amber-50 to-yellow-50 border border-amber-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"bg-amber-100 rounded-full p-1 mr-2 mt-0.5",children:s.jsx("svg",{className:"w-4 h-4 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("h4",{className:"text-sm font-semibold text-amber-800 mb-1",children:[" Aggiungi ",(40-i).toFixed(2)," per lo sconto!"]}),s.jsxs("p",{className:"text-xs text-amber-700",children:["Hai gi effettuato il primo ordine. Aggiungi ",(40-i).toFixed(2)," per raggiungere i 40 e ottenere il 10% di sconto."]})]})]})}),!l&&i>0&&s.jsx("div",{className:"mt-2 p-3 bg-gradient-to-r from-purple-50 to-indigo-50 border border-purple-200 rounded-lg",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"bg-purple-100 rounded-full p-1 mr-2 mt-0.5",children:s.jsx("svg",{className:"w-4 h-4 text-purple-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-semibold text-purple-800 mb-1",children:" Sconto del 10% sul primo ordine!"}),s.jsxs("p",{className:"text-xs text-purple-700 mb-2",children:[s.jsx("strong",{children:"Registrati ora"})," e ottieni automaticamente il 10% di sconto sul tuo primo ordine, indipendentemente dall'importo!"]}),s.jsx("button",{onClick:()=>setShowAuthModal(!0),className:"text-xs bg-purple-600 text-white px-3 py-1 rounded-full hover:bg-purple-700 transition-colors",children:"Registrati e Risparmia"})]})]})})]}),s.jsxs(Q,{onClick:n,variant:"outline",size:"sm",className:"w-full mt-4 text-red-600 border-red-300 hover:bg-red-50",children:[s.jsx(Ms,{className:"w-4 h-4 mr-2"}),"Svuota Carrello"]})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(ae,{children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-6",children:"Dati per la Prenotazione"}),(()=>{const H=new Date().getDay();return H===0||H===1?s.jsxs("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700",children:["Attenzione: la ",s.jsx("strong",{children:"domenica"})," e il ",s.jsx("strong",{children:"luned"})," siamo ",s.jsx("strong",{children:"chiusi"}),". Le prenotazioni non sono disponibili in queste giornate."]}):null})(),s.jsxs("form",{onSubmit:L,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(Xt,{className:"w-4 h-4 inline mr-1"}),"Nome e Cognome *"]}),s.jsx("input",{type:"text",id:"name",name:"name",value:m.name,onChange:T,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Il tuo nome completo"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(_r,{className:"w-4 h-4 inline mr-1"}),"Numero di Telefono *"]}),s.jsx("input",{type:"tel",id:"phone",name:"phone",value:m.phone,onChange:T,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"+39 xxx xxx xxxx"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(Qs,{className:"w-4 h-4 inline mr-1"}),"Email *"]}),s.jsx("input",{type:"email",id:"email",name:"email",value:m.email,onChange:T,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"la.tua.email@esempio.com"})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"pickupDate",className:"block text-sm font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(Tl,{className:"w-4 h-4 inline mr-1"}),"Data di Ritiro *"]}),s.jsxs("select",{id:"pickupDate",name:"pickupDate",value:m.pickupDate,onChange:T,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",children:[s.jsx("option",{value:"",children:"Seleziona una data"}),Ne.map(R=>s.jsx("option",{value:R.value,children:R.label},R.value))]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"pickupTime",className:"block text-sm font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(Wr,{className:"w-4 h-4 inline mr-1"}),"Orario di Ritiro *"]}),s.jsxs("select",{id:"pickupTime",name:"pickupTime",value:m.pickupTime,onChange:T,required:!0,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",children:[s.jsx("option",{value:"",children:"Seleziona un orario"}),m.pickupDate?W.length===0?s.jsx("option",{disabled:!0,children:"Nessun orario disponibile per questa data"}):s.jsx(s.Fragment,{children:(()=>{if((m.pickupDate?new Date(m.pickupDate+"T00:00:00"):new Date).getDay()===0)return s.jsx("optgroup",{label:"Domenica (09:30-15:00)",children:W.map(U=>s.jsx("option",{value:U,children:U},U))});{const U=W.filter(F=>{const[le]=F.split(":").map(Number);return le>=11&&le<17}),Y=W.filter(F=>{const[le]=F.split(":").map(Number);return le>=17});return s.jsxs(s.Fragment,{children:[U.length>0&&s.jsx("optgroup",{label:"Pranzo (11:00-15:30)",children:U.map(F=>s.jsx("option",{value:F,children:F},F))}),Y.length>0&&s.jsx("optgroup",{label:"Cena (17:00-22:00)",children:Y.map(F=>s.jsx("option",{value:F,children:F},F))})]})}})()}):s.jsx("option",{disabled:!0,children:"Seleziona prima una data"})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-mediterranean-blu-scuro mb-4",children:[s.jsx(yr,{className:"w-4 h-4 inline mr-1"}),"Modalit di Pagamento *"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${m.paymentMethod==="pickup"?"border-mediterranean-marroncino bg-mediterranean-marroncino bg-opacity-10":"border-gray-300 hover:border-mediterranean-marroncino"}`,onClick:()=>h(R=>({...R,paymentMethod:"pickup"})),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"pickup",name:"paymentMethod",value:"pickup",checked:m.paymentMethod==="pickup",onChange:T,className:"w-4 h-4 text-mediterranean-marroncino border-gray-300 focus:ring-mediterranean-marroncino"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(Wf,{className:"w-5 h-5 text-mediterranean-marroncino"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"pickup",className:"font-medium text-mediterranean-blu-scuro cursor-pointer",children:"Pagamento al Ritiro"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75",children:"Paga direttamente in negozio"})]})]})]})}),s.jsx("div",{className:`p-4 border-2 rounded-lg cursor-pointer transition-all ${m.paymentMethod==="online"?"border-mediterranean-marroncino bg-mediterranean-marroncino bg-opacity-10":"border-gray-300 hover:border-mediterranean-marroncino"}`,onClick:()=>h(R=>({...R,paymentMethod:"online"})),children:s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsx("input",{type:"radio",id:"online",name:"paymentMethod",value:"online",checked:m.paymentMethod==="online",onChange:T,className:"w-4 h-4 text-mediterranean-marroncino border-gray-300 focus:ring-mediterranean-marroncino"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(yr,{className:"w-5 h-5 text-mediterranean-marroncino"}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"online",className:"font-medium text-mediterranean-blu-scuro cursor-pointer",children:"Paga Ora Online"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75",children:"Carta di credito/debito"})]})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs("label",{htmlFor:"notes",className:"block text-sm font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(Mb,{className:"w-4 h-4 inline mr-1"}),"Note e Allergie (opzionale)"]}),s.jsx("textarea",{id:"notes",name:"notes",value:m.notes,onChange:T,rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Eventuali richieste speciali, allergie o note aggiuntive..."})]}),s.jsxs("div",{className:"flex items-start space-x-3",children:[s.jsx("input",{type:"checkbox",id:"privacyConsent",name:"privacyConsent",checked:m.privacyConsent,onChange:T,required:!0,className:"mt-1 w-4 h-4 text-mediterranean-marroncino border-gray-300 rounded focus:ring-mediterranean-marroncino"}),s.jsxs("label",{htmlFor:"privacyConsent",className:"text-sm text-mediterranean-blu-scuro",children:["Accetto l'",s.jsx("a",{href:"#",className:"text-mediterranean-marroncino hover:underline",children:"informativa sulla privacy"})," e autorizzo il trattamento dei miei dati personali per la gestione dell'ordine. *"]})]}),s.jsxs("div",{className:"pt-6",children:[s.jsx(Q,{type:"submit",size:"lg",className:"w-full",disabled:e.length===0||f||m.paymentMethod==="online"&&c,children:f?"Invio in corso...":s.jsxs("span",{className:"flex items-center justify-center",children:[m.paymentMethod==="online"?"Vai al Pagamento":"Conferma Ordine",s.jsxs("span",{className:"ml-2 font-semibold",children:["",(o&&typeof o.final_amount=="number"?Number(o.final_amount):i).toFixed(2)]})]})}),m.paymentMethod==="online"&&c&&s.jsx("p",{className:"mt-2 text-sm text-mediterranean-blu-scuro opacity-75 text-center",children:"Calcolo sconto in corso... attendi un attimo prima di procedere."})]})]})]})})]})]}),s.jsx(An,{isOpen:_,onClose:()=>C(!1),onSwitchToRegister:()=>{C(!1),N(!0)}}),s.jsx(Rn,{isOpen:k,onClose:()=>N(!1),onSwitchToLogin:()=>{N(!1),C(!0)}})]}):s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-8",children:[s.jsx("h1",{className:"font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4",children:"Prenota il Tuo Ordine"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro",children:"Per effettuare un ordine devi prima accedere al tuo account."})]}),s.jsx(ae,{className:"text-center",children:s.jsxs("div",{className:"py-12",children:[s.jsx(Xt,{className:"w-24 h-24 text-mediterranean-marroncino mx-auto mb-6"}),s.jsx("h2",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Accesso Richiesto"}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-6 max-w-md mx-auto",children:"Per garantire la sicurezza e tracciare i tuoi ordini,  necessario essere registrati e aver effettuato l'accesso."}),e.length>0&&s.jsxs("div",{className:"bg-mediterranean-beige p-4 rounded-lg mb-6 max-w-md mx-auto",children:[s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro mb-2",children:s.jsxs("strong",{children:["Il tuo carrello contiene ",a," ",a===1?"piatto":"piatti"]})}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro",children:"Non preoccuparti, i tuoi piatti rimarranno nel carrello dopo il login!"})]}),s.jsxs("div",{className:"space-y-4 max-w-sm mx-auto",children:[s.jsx(Q,{onClick:()=>C(!0),size:"lg",className:"w-full",children:"Accedi al Tuo Account"}),s.jsx(Q,{onClick:()=>N(!0),variant:"outline",size:"lg",className:"w-full",children:"Registrati Gratuitamente"})]}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75 mt-6",children:"La registrazione  veloce e gratuita. Potrai anche tenere traccia dei tuoi ordini!"})]})}),s.jsx(An,{isOpen:_,onClose:()=>C(!1),onSwitchToRegister:()=>{C(!1),N(!0)}}),s.jsx(Rn,{isOpen:k,onClose:()=>N(!1),onSwitchToLogin:()=>{N(!1),C(!0)}})]})})};var Hf="basil",nw=function(t){return t===3?"v3":t},Gf="https://js.stripe.com",sw="".concat(Gf,"/").concat(Hf,"/stripe.js"),iw=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,aw=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,Nd="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",ow=function(t){return iw.test(t)||aw.test(t)},lw=function(){for(var t=document.querySelectorAll('script[src^="'.concat(Gf,'"]')),r=0;r<t.length;r++){var n=t[r];if(ow(n.src))return n}return null},kd=function(t){var r="",n=document.createElement("script");n.src="".concat(sw).concat(r);var i=document.head||document.body;if(!i)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return i.appendChild(n),n},cw=function(t,r){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"7.9.0",startTime:r})},Yn=null,yi=null,bi=null,uw=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},dw=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},mw=function(t){return Yn!==null?Yn:(Yn=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe&&t&&console.warn(Nd),window.Stripe){r(window.Stripe);return}try{var i=lw();if(i&&t)console.warn(Nd);else if(!i)i=kd(t);else if(i&&bi!==null&&yi!==null){var a;i.removeEventListener("load",bi),i.removeEventListener("error",yi),(a=i.parentNode)===null||a===void 0||a.removeChild(i),i=kd(t)}bi=dw(r,n),yi=uw(n),i.addEventListener("load",bi),i.addEventListener("error",yi)}catch(o){n(o);return}}),Yn.catch(function(r){return Yn=null,Promise.reject(r)}))},hw=function(t,r,n){if(t===null)return null;var i=r[0],a=i.match(/^pk_test/),o=nw(t.version),c=Hf;a&&o!==c&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("7.9.0"," expected Stripe.js@").concat(c,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var l=t.apply(void 0,r);return cw(l,n),l},Xn,Kf=!1,Qf=function(){return Xn||(Xn=mw(null).catch(function(t){return Xn=null,Promise.reject(t)}),Xn)};Promise.resolve().then(function(){return Qf()}).catch(function(e){Kf||console.warn(e)});var fw=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];Kf=!0;var i=Date.now();return Qf().then(function(a){return hw(a,r,i)})},Jf={exports:{}},pw="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gw=pw,xw=gw;function Yf(){}function Xf(){}Xf.resetWarningCache=Yf;var vw=function(){function e(n,i,a,o,c,l){if(l!==xw){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Xf,resetWarningCache:Yf};return r.PropTypes=r,r};Jf.exports=vw();var yw=Jf.exports;const ge=Od(yw);function Sd(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Cd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sd(Object(r),!0).forEach(function(n){Zf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sd(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Mi(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Mi=function(t){return typeof t}:Mi=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(e)}function Zf(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bw(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function ww(e,t){if(e==null)return{};var r=bw(e,t),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function ep(e,t){return jw(e)||_w(e,t)||Nw(e,t)||kw()}function jw(e){if(Array.isArray(e))return e}function _w(e,t){var r=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(r!=null){var n=[],i=!0,a=!1,o,c;try{for(r=r.call(e);!(i=(o=r.next()).done)&&(n.push(o.value),!(t&&n.length===t));i=!0);}catch(l){a=!0,c=l}finally{try{!i&&r.return!=null&&r.return()}finally{if(a)throw c}}return n}}function Nw(e,t){if(e){if(typeof e=="string")return Ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ed(e,t)}}function Ed(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function kw(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var Ve=function(t,r,n){var i=!!n,a=ue.useRef(n);ue.useEffect(function(){a.current=n},[n]),ue.useEffect(function(){if(!i||!t)return function(){};var o=function(){a.current&&a.current.apply(a,arguments)};return t.on(r,o),function(){t.off(r,o)}},[i,r,t,a])},Rl=function(t){var r=ue.useRef(t);return ue.useEffect(function(){r.current=t},[t]),r.current},On=function(t){return t!==null&&Mi(t)==="object"},Sw=function(t){return On(t)&&typeof t.then=="function"},Cw=function(t){return On(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},Pd="[object Object]",Ew=function e(t,r){if(!On(t)||!On(r))return t===r;var n=Array.isArray(t),i=Array.isArray(r);if(n!==i)return!1;var a=Object.prototype.toString.call(t)===Pd,o=Object.prototype.toString.call(r)===Pd;if(a!==o)return!1;if(!a&&!n)return t===r;var c=Object.keys(t),l=Object.keys(r);if(c.length!==l.length)return!1;for(var u={},d=0;d<c.length;d+=1)u[c[d]]=!0;for(var m=0;m<l.length;m+=1)u[l[m]]=!0;var h=Object.keys(u);if(h.length!==c.length)return!1;var b=t,j=r,v=function(g){return e(b[g],j[g])};return h.every(v)},tp=function(t,r,n){return On(t)?Object.keys(t).reduce(function(i,a){var o=!On(r)||!Ew(t[a],r[a]);return n.includes(a)?(o&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),i):o?Cd(Cd({},i||{}),{},Zf({},a,t[a])):i},null):null},rp="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Td=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp;if(t===null||Cw(t))return t;throw new Error(r)},Pw=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rp;if(Sw(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(i){return Td(i,r)})};var n=Td(t,r);return n===null?{tag:"empty"}:{tag:"sync",stripe:n}},Tw=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"4.0.2"}),t.registerAppInfo({name:"react-stripe-js",version:"4.0.2",url:"https://stripe.com/docs/stripe-js/react"}))},La=ue.createContext(null);La.displayName="ElementsContext";var np=function(t,r){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(r," in an <Elements> provider."));return t},sp=function(t){var r=t.stripe,n=t.options,i=t.children,a=ue.useMemo(function(){return Pw(r)},[r]),o=ue.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(n):null}}),c=ep(o,2),l=c[0],u=c[1];ue.useEffect(function(){var h=!0,b=function(v){u(function(w){return w.stripe?w:{stripe:v,elements:v.elements(n)}})};return a.tag==="async"&&!l.stripe?a.stripePromise.then(function(j){j&&h&&b(j)}):a.tag==="sync"&&!l.stripe&&b(a.stripe),function(){h=!1}},[a,l,n]);var d=Rl(r);ue.useEffect(function(){d!==null&&d!==r&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[d,r]);var m=Rl(n);return ue.useEffect(function(){if(l.elements){var h=tp(n,m,["clientSecret","fonts"]);h&&l.elements.update(h)}},[n,m,l.elements]),ue.useEffect(function(){Tw(l.stripe)},[l.stripe]),ue.createElement(La.Provider,{value:l},i)};sp.propTypes={stripe:ge.any,options:ge.object};var Aw=function(t){var r=ue.useContext(La);return np(r,t)},Rw=function(){var t=Aw("calls useElements()"),r=t.elements;return r};ge.func.isRequired;var ip=ue.createContext(null);ip.displayName="CheckoutContext";ge.any,ge.shape({fetchClientSecret:ge.func.isRequired,elementsOptions:ge.object}).isRequired;var Ol=function(t){var r=ue.useContext(ip),n=ue.useContext(La);if(r){if(n)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return r}else return np(n,t)},Ow=["mode"],Iw=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Ee=function(t,r){var n="".concat(Iw(t),"Element"),i=function(l){var u=l.id,d=l.className,m=l.options,h=m===void 0?{}:m,b=l.onBlur,j=l.onFocus,v=l.onReady,w=l.onChange,g=l.onEscape,p=l.onClick,f=l.onLoadError,x=l.onLoaderStart,_=l.onNetworksChange,C=l.onConfirm,k=l.onCancel,N=l.onShippingAddressChange,S=l.onShippingRateChange,A=l.onSavedPaymentMethodRemove,$=l.onSavedPaymentMethodUpdate,I=Ol("mounts <".concat(n,">")),q="elements"in I?I.elements:null,ee="checkoutState"in I?I.checkoutState:null,se=(ee==null?void 0:ee.type)==="success"?ee.checkout:null,Ne=ue.useState(null),W=ep(Ne,2),T=W[0],P=W[1],L=ue.useRef(null),G=ue.useRef(null);Ve(T,"blur",b),Ve(T,"focus",j),Ve(T,"escape",g),Ve(T,"click",p),Ve(T,"loaderror",f),Ve(T,"loaderstart",x),Ve(T,"networkschange",_),Ve(T,"confirm",C),Ve(T,"cancel",k),Ve(T,"shippingaddresschange",N),Ve(T,"shippingratechange",S),Ve(T,"savedpaymentmethodremove",A),Ve(T,"savedpaymentmethodupdate",$),Ve(T,"change",w);var R;v&&(t==="expressCheckout"?R=v:R=function(){v(T)}),Ve(T,"ready",R),ue.useLayoutEffect(function(){if(L.current===null&&G.current!==null&&(q||se)){var U=null;if(se)switch(t){case"payment":U=se.createPaymentElement(h);break;case"address":if("mode"in h){var Y=h.mode,F=ww(h,Ow);if(Y==="shipping")U=se.createShippingAddressElement(F);else if(Y==="billing")U=se.createBillingAddressElement(F);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":U=se.createExpressCheckoutElement(h);break;case"currencySelector":U=se.createCurrencySelectorElement();break;case"taxId":U=se.createTaxIdElement(h);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else q&&(U=q.create(t,h));L.current=U,P(U),U&&U.mount(G.current)}},[q,se,h]);var H=Rl(h);return ue.useEffect(function(){if(L.current){var U=tp(h,H,["paymentRequest"]);U&&"update"in L.current&&L.current.update(U)}},[h,H]),ue.useLayoutEffect(function(){return function(){if(L.current&&typeof L.current.destroy=="function")try{L.current.destroy(),L.current=null}catch{}}},[]),ue.createElement("div",{id:u,className:d,ref:G})},a=function(l){Ol("mounts <".concat(n,">"));var u=l.id,d=l.className;return ue.createElement("div",{id:u,className:d})},o=r?a:i;return o.propTypes={id:ge.string,className:ge.string,onChange:ge.func,onBlur:ge.func,onFocus:ge.func,onReady:ge.func,onEscape:ge.func,onClick:ge.func,onLoadError:ge.func,onLoaderStart:ge.func,onNetworksChange:ge.func,onConfirm:ge.func,onCancel:ge.func,onShippingAddressChange:ge.func,onShippingRateChange:ge.func,onSavedPaymentMethodRemove:ge.func,onSavedPaymentMethodUpdate:ge.func,options:ge.object},o.displayName=n,o.__elementType=t,o},Pe=typeof window>"u",Lw=ue.createContext(null);Lw.displayName="EmbeddedCheckoutProviderContext";var Mw=function(){var t=Ol("calls useStripe()"),r=t.stripe;return r};Ee("auBankAccount",Pe);Ee("card",Pe);Ee("cardNumber",Pe);Ee("cardExpiry",Pe);Ee("cardCvc",Pe);Ee("fpxBank",Pe);Ee("iban",Pe);Ee("idealBank",Pe);Ee("p24Bank",Pe);Ee("epsBank",Pe);var Dw=Ee("payment",Pe);Ee("expressCheckout",Pe);var zw=Ee("paymentRequestButton",Pe);Ee("linkAuthentication",Pe);Ee("address",Pe);Ee("shippingAddress",Pe);Ee("paymentMethodMessaging",Pe);Ee("affirmMessage",Pe);Ee("afterpayClearpayMessage",Pe);Ee("taxId",Pe);const Ad=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i,$w=()=>{const e=Ea(),{user:t}=ct(),{clearCart:r}=Ks(),[n,i]=y.useState(null),[a,o]=y.useState(!1),[c,l]=y.useState(null),u=y.useRef(!1),d=y.useRef(typeof crypto<"u"&&crypto.randomUUID?crypto.randomUUID():`attempt_${Date.now()}_${Math.random()}`),m=fw("pk_live_51SD9Y2EJk50tDLpyB8nh157SshNIL4AYpD9HsHwfX4Jx5yPVff6EWUzp4wIxze6j3kEZ0jYJfQv3jECSXal0aJIh003FlVGyu5"),h="",[b,j]=y.useState(null),v=y.useRef(!1);y.useEffect(()=>{const x=sessionStorage.getItem("pendingOrder");if(!x){e("/prenotazione");return}try{const _=JSON.parse(x);i(_)}catch(_){console.error("Errore nel parsing dei dati dell'ordine:",_),e("/prenotazione")}},[e]),y.useEffect(()=>{const x=new URLSearchParams(window.location.search),_=x.get("success"),C=x.get("session_id"),k=x.get("canceled"),N=x.get("redirect_status"),S=x.get("payment_intent");_==="true"&&C&&n&&t?u.current||(u.current=!0,g(C)):_==="true"&&N==="succeeded"&&S&&n&&t?u.current||(u.current=!0,p(S)):k==="true"&&l("Pagamento annullato. Puoi riprovare quando vuoi.")},[n,t]),y.useEffect(()=>{(async()=>{if(n&&!v.current){v.current=!0;try{const _=n!=null&&n.discountInfo&&typeof n.discountInfo.final_amount=="number"?Number(n.discountInfo.final_amount):void 0,C=Number(n.total_amount),k=Number.isFinite(_)&&_>0?Math.min(C,_):C,N={...n,total_amount:k,idempotencyKey:d.current},S=await fetch(`${h}/api/create-payment-intent`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({order:N})});if(!S.ok){let $="Creazione PaymentIntent fallita";try{const I=await S.json();I!=null&&I.error&&($=`${$}: ${I.error}`),I!=null&&I.message&&($=`${$} - ${I.message}`)}catch{}throw new Error($)}const A=await S.json();j(A.clientSecret)}catch(_){console.error("Errore PaymentIntent:",_),l("Impossibile inizializzare il pagamento. Riprova pi tardi.")}}})()},[n]);const w=({clientSecret:x})=>{const _=Mw(),C=Rw(),[k,N]=y.useState(!1),[S,A]=y.useState(null),[$,I]=y.useState(null),[q,ee]=y.useState(!1),se=W=>{var G,R;if(!W)return"Errore durante la conferma del pagamento";const T=W==null?void 0:W.code,P=(W==null?void 0:W.decline_code)||((R=(G=W==null?void 0:W.payment_intent)==null?void 0:G.last_payment_error)==null?void 0:R.decline_code),L=W==null?void 0:W.message;switch(T){case"processing_error":return"Si  verificato un errore di elaborazione sulla carta. Riprova o usa unaltra carta.";case"card_declined":return`Carta rifiutata${P?` (${P})`:""}. Usa unaltra carta o contatta la banca.`;case"incorrect_number":case"invalid_number":return"Numero di carta non valido. Controlla e riprova.";case"incorrect_cvc":case"invalid_cvc":return"CVC non valido. Controlla e riprova.";case"expired_card":return"La carta  scaduta. Usa unaltra carta.";case"amount_too_small":return"Importo troppo basso per il circuito di pagamento. Aumenta limporto o aggiungi un articolo.";case"parameter_missing":return"Parametro mancante nella richiesta. Aggiorna la pagina e riprova.";case"payment_intent_unexpected_state":return"Il pagamento  in uno stato non confermabile. Aggiorna la pagina e riprova.";case"missing_payment_method":return"Metodo di pagamento mancante o incompleto. Compila i campi della carta e riprova.";case"invalid_request_error":return L||"Richiesta non valida verso Stripe. Riprova o contattaci.";case"intent_not_updatable":return"Il PaymentIntent non pu essere aggiornato. Riparti dal carrello.";case"currency_not_supported":return"Valuta non supportata per questo metodo di pagamento.";case"authentication_required":return"Autenticazione 3D Secure richiesta. Segui le istruzioni di Stripe.";default:return L||"Errore durante la conferma del pagamento. Riprova pi tardi."}};y.useEffect(()=>{(async()=>{if(!_||!n||!x)return;const T=n!=null&&n.discountInfo&&typeof n.discountInfo.final_amount=="number"?Number(n.discountInfo.final_amount):void 0,P=Number(n.total_amount),L=Number.isFinite(T)&&T>0?Math.min(P,T):P,G=Math.round(L*100),R=_.paymentRequest({country:"IT",currency:"eur",total:{label:"Gusto Mediterraneo",amount:G},requestPayerName:!0,requestPayerEmail:!0,requestPayerPhone:!0});try{await R.canMakePayment()?(I(R),ee(!0),R.on("paymentmethod",async U=>{try{const{error:Y}=await _.confirmPayment({clientSecret:x,payment_method:U.paymentMethod.id,confirmParams:{return_url:`${window.location.origin}/pagamento?success=true`,payment_method_data:{billing_details:{email:U.payerEmail||(n==null?void 0:n.customer_email)||void 0,name:U.payerName||(n==null?void 0:n.customer_name)||void 0,phone:U.payerPhone||(n==null?void 0:n.customer_phone)||void 0}}}});if(Y)U.complete("fail"),A(se(Y));else{U.complete("success");const le=(await _.retrievePaymentIntent(x)).paymentIntent;(le==null?void 0:le.status)==="succeeded"&&(u.current||(u.current=!0,await p(le.id)))}}catch(Y){U.complete("fail"),A((Y==null?void 0:Y.message)||"Errore durante il pagamento con wallet.")}})):ee(!1)}catch{ee(!1)}})()},[_,n,x]);const Ne=async()=>{if(!(!_||!C)){N(!0),A(null);try{const{error:W}=await C.submit();if(W){A(W.message||"Errore di validazione dei dati di pagamento"),N(!1);return}const{error:T}=await _.confirmPayment({elements:C,confirmParams:{return_url:`${window.location.origin}/pagamento?success=true`,payment_method_data:{billing_details:{email:(n==null?void 0:n.customer_email)||void 0,name:(n==null?void 0:n.customer_name)||void 0,phone:(n==null?void 0:n.customer_phone)||void 0}}}});if(T)try{const L=(await _.retrievePaymentIntent(x)).paymentIntent,G=L?L.amount/100:void 0;let R=se(T);typeof G=="number"&&G>0&&G<.5&&(R="Importo minimo di transazione con carta  0,50."),A(R),console.error("Stripe confirm error:",{code:T==null?void 0:T.code,message:T==null?void 0:T.message,decline_code:T==null?void 0:T.decline_code,intent_status:L==null?void 0:L.status,intent_amount_cents:L==null?void 0:L.amount})}catch{A(se(T))}else{const L=(await _.retrievePaymentIntent(x)).paymentIntent;(L==null?void 0:L.status)==="succeeded"&&(u.current||(u.current=!0,await p(L.id)))}}catch(W){A((W==null?void 0:W.message)||"Errore sconosciuto")}finally{N(!1)}}};return s.jsxs("div",{children:[q&&$&&s.jsx("div",{className:"mb-4",children:s.jsx(zw,{options:{paymentRequest:$}})}),s.jsx(Dw,{options:{layout:"tabs"}}),S&&s.jsx("p",{className:"mt-3 text-sm text-red-600",children:S}),s.jsx(Q,{onClick:Ne,disabled:k||a,className:"w-full mt-4",size:"lg",children:k?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Elaborazione..."]}):s.jsxs(s.Fragment,{children:[s.jsx(yr,{className:"w-4 h-4 mr-2"}),(()=>{const W=n!=null&&n.discountInfo&&typeof n.discountInfo.final_amount=="number"?Number(n.discountInfo.final_amount):void 0,T=Number((n==null?void 0:n.total_amount)??0);return`Paga ${(Number.isFinite(W)&&W>0?Math.min(T,W):T).toFixed(2)}`})()]})})]})},g=async x=>{var C,k,N;if(!n||!t)return;const _=`order_created_for_session_${x}`;if(sessionStorage.getItem(_)!=="true")try{const S=await fetch(`${h}/api/checkout-session?session_id=${encodeURIComponent(x)}`);if(!S.ok)throw new Error("Verifica sessione Stripe fallita");const A=await S.json();if(A.payment_status!=="paid"){l("Pagamento non completato.");return}const $=typeof A.amount_total=="number"?Number(A.amount_total)/100:Number(n.total_amount);let I=null;try{const P=new Date(Date.now()-3e5).toISOString(),{data:L}=await J.from("orders").select("id, order_number").eq("user_id",n.user_id).eq("pickup_date",n.pickup_date).eq("pickup_time",n.pickup_time).eq("payment_status","paid").gte("created_at",P).order("created_at",{ascending:!1}).limit(1);L&&L.length>0&&(I=L[0])}catch{}let q=null;if(!I)for(let P=0;P<5;P++){const{data:L,error:G}=await J.from("orders").insert([{user_id:n.user_id,customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,pickup_date:n.pickup_date,pickup_time:n.pickup_time,payment_method:n.payment_method,payment_status:"paid",total_amount:$,notes:n.notes}]).select().single();if(I=L,q=G,!q)break;const R=(C=q.code)==null?void 0:C.toString(),H=(k=q.status)==null?void 0:k.toString();if(!(R==="23505"||R==="409"||H==="409"))break;const Y=150+Math.floor(Math.random()*250);await new Promise(F=>setTimeout(F,Y))}if(q)throw q;let ee=null;const se=n.original_total??n.items.reduce((P,L)=>P+(Number(L.price)||0)*(Number(L.quantity)||1),0);if(n.discountInfo&&Number((N=n.discountInfo)==null?void 0:N.discount_amount)>0){ee=n.discountInfo;const{error:P}=await J.from("orders").update({original_amount:Number(se),discount_type:String(n.discountInfo.discount_type||"none"),discount_percentage:Number(n.discountInfo.discount_percentage||0),discount_amount:Number(n.discountInfo.discount_amount||0),total_amount:Number($)}).eq("id",I.id);P&&console.error("Errore aggiornamento dettagli sconto ordine:",P)}const Ne=n.items.map(P=>({order_id:I.id,customer_name:n.customer_name,dish_id:typeof P.id=="string"&&Ad.test(P.id)?P.id:null,dish_name:P.name,dish_price:P.price,quantity:P.quantity,subtotal:P.price*P.quantity,pricing_type:P.pricing_type,weight_grams:P.weight_grams??null}));let{error:W}=await J.from("order_items").insert(Ne);if(W){const P=String(W.message||"").toLowerCase();if(P.includes("pricing_type")||P.includes("weight_grams")){console.warn("order_items table seems to miss weight/pricing columns. Retrying insert without these columns.");const L=Ne.map(({pricing_type:R,weight_grams:H,...U})=>U),{error:G}=await J.from("order_items").insert(L);if(G)throw G}else throw W}r(),sessionStorage.removeItem("pendingOrder"),sessionStorage.setItem(_,"true");const T={customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,pickup_date:n.pickup_date,pickup_time:n.pickup_time,payment_method:n.payment_method,items:Ne.map(P=>({name:P.dish_name,price:P.dish_price,quantity:P.quantity,subtotal:P.subtotal,pricing_type:P.pricing_type,weight_grams:P.weight_grams})),total_amount:$};e("/prenotazione",{state:{orderConfirmed:!0,orderNumber:I.order_number,orderId:I.id,discountInfo:ee||n.discountInfo,orderSummary:T}})}catch(S){console.error("Errore conferma pagamento:",S),l("Errore nella conferma del pagamento. Se il problema persiste, contattaci.")}},p=async x=>{var C,k,N;if(!n||!t)return;const _=`order_created_for_intent_${x}`;if(sessionStorage.getItem(_)!=="true")try{const S=await fetch(`${h}/api/payment-intent?payment_intent=${encodeURIComponent(x)}`);if(!S.ok)throw new Error("Verifica PaymentIntent fallita");const A=await S.json();if(A.status!=="succeeded"){l("Pagamento non completato.");return}const $=typeof A.amount=="number"?Number(A.amount)/100:Number(n.total_amount);let I=null;try{const P=new Date(Date.now()-3e5).toISOString(),{data:L}=await J.from("orders").select("id, order_number").eq("user_id",n.user_id).eq("pickup_date",n.pickup_date).eq("pickup_time",n.pickup_time).eq("payment_status","paid").gte("created_at",P).order("created_at",{ascending:!1}).limit(1);L&&L.length>0&&(I=L[0])}catch{}let q=null;if(!I)for(let P=0;P<5;P++){const{data:L,error:G}=await J.from("orders").insert([{user_id:n.user_id,customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,pickup_date:n.pickup_date,pickup_time:n.pickup_time,payment_method:n.payment_method,payment_status:"paid",total_amount:$,notes:n.notes}]).select().single();if(I=L,q=G,!q)break;const R=(C=q.code)==null?void 0:C.toString(),H=(k=q.status)==null?void 0:k.toString();if(!(R==="23505"||R==="409"||H==="409"))break;const Y=150+Math.floor(Math.random()*250);await new Promise(F=>setTimeout(F,Y))}if(q)throw q;let ee=null;const se=n.original_total??n.items.reduce((P,L)=>P+(Number(L.price)||0)*(Number(L.quantity)||1),0);if(n.discountInfo&&Number((N=n.discountInfo)==null?void 0:N.discount_amount)>0){ee=n.discountInfo;const{error:P}=await J.from("orders").update({original_amount:Number(se),discount_type:String(n.discountInfo.discount_type||"none"),discount_percentage:Number(n.discountInfo.discount_percentage||0),discount_amount:Number(n.discountInfo.discount_amount||0),total_amount:Number($)}).eq("id",I.id);P&&console.error("Errore aggiornamento dettagli sconto ordine (intent):",P)}const Ne=n.items.map(P=>({order_id:I.id,dish_id:typeof P.id=="string"&&Ad.test(P.id)?P.id:null,dish_name:P.name,dish_price:P.price,quantity:P.quantity,subtotal:P.price*P.quantity,pricing_type:P.pricing_type,weight_grams:P.weight_grams??null}));let{error:W}=await J.from("order_items").insert(Ne);if(W){const P=String(W.message||"").toLowerCase();if(P.includes("pricing_type")||P.includes("weight_grams")||P.includes("schema cache")){console.warn("order_items table seems to miss pricing_type/weight_grams. Retrying insert without these columns.");const L=Ne.map(({pricing_type:R,weight_grams:H,...U})=>U),{error:G}=await J.from("order_items").insert(L);if(G)throw G}else throw W}r(),sessionStorage.removeItem("pendingOrder"),sessionStorage.setItem(_,"true");const T={customer_name:n.customer_name,customer_email:n.customer_email,customer_phone:n.customer_phone,pickup_date:n.pickup_date,pickup_time:n.pickup_time,payment_method:n.payment_method,items:Ne.map(P=>({name:P.dish_name,price:P.dish_price,quantity:P.quantity,subtotal:P.subtotal,pricing_type:P.pricing_type,weight_grams:P.weight_grams})),total_amount:$};e("/prenotazione",{state:{orderConfirmed:!0,orderNumber:I.order_number,orderId:I.id,discountInfo:ee||n.discountInfo,orderSummary:T}})}catch(S){console.error("Errore conferma PaymentIntent:",S),l("Errore nella conferma del pagamento. Se il problema persiste, contattaci.")}},f=()=>{e("/prenotazione")};return n?s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8 pagamento-isolation",children:s.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(Q,{variant:"outline",onClick:f,className:"mb-4",children:[s.jsx(Eb,{className:"w-4 h-4 mr-2"}),"Torna al Carrello"]}),s.jsx("h1",{className:"font-serif text-3xl font-bold text-mediterranean-blu-scuro mb-2",children:"Pagamento Online"}),s.jsx("p",{className:"text-mediterranean-blu-scuro opacity-75",children:"Completa il tuo ordine con il pagamento sicuro"})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 items-start",children:[s.jsxs(ae,{className:"self-start",children:[s.jsxs("h2",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:[s.jsx(Ls,{className:"w-5 h-5 inline mr-2"}),"Riepilogo Ordine"]}),s.jsxs("div",{className:"mb-6 p-4 bg-mediterranean-beige bg-opacity-50 rounded-lg",children:[s.jsxs("h3",{className:"font-medium text-mediterranean-blu-scuro mb-2",children:[s.jsx(Xt,{className:"w-4 h-4 inline mr-1"}),"Dettagli Cliente"]}),s.jsxs("p",{className:"text-sm text-mediterranean-blu-scuro",children:[s.jsx("strong",{children:"Nome:"})," ",n.customer_name]}),s.jsxs("p",{className:"text-sm text-mediterranean-blu-scuro",children:[s.jsx("strong",{children:"Email:"})," ",n.customer_email]}),s.jsxs("p",{className:"text-sm text-mediterranean-blu-scuro",children:[s.jsx("strong",{children:"Telefono:"})," ",n.customer_phone]}),s.jsxs("p",{className:"text-sm text-mediterranean-blu-scuro",children:[s.jsx(Wr,{className:"w-4 h-4 inline mr-1"}),s.jsx("strong",{children:"Ritiro:"})," ",new Date(n.pickup_date).toLocaleDateString("it-IT",{weekday:"long",year:"numeric",month:"long",day:"numeric"})," alle ",n.pickup_time]})]}),s.jsx("div",{className:"space-y-2 mb-6 max-h-[360px] overflow-y-auto pr-1",children:n.items.map((x,_)=>Array.from({length:Number(x.quantity)||1}).map((C,k)=>s.jsxs("div",{className:"flex justify-between items-center py-2 border-b border-gray-200",children:[s.jsxs("span",{className:"text-mediterranean-blu-scuro",children:[x.name,x.pricing_type==="by_weight"&&x.weight_grams?s.jsxs("span",{className:"ml-2 text-sm opacity-75",children:["(",x.weight_grams,"g)"]}):null]}),s.jsxs("span",{className:"font-semibold text-mediterranean-blu-scuro",children:["",Number(x.price).toFixed(2)]})]},`${_}-${k}`))).flat()}),s.jsx("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:(()=>{const x=Number.isFinite(Number(n.original_total))?Number(n.original_total):n.items.reduce((N,S)=>N+(Number(S.price)||0)*(Number(S.quantity)||1),0),_=n.discountInfo||null,C=Number((_==null?void 0:_.discount_amount)||0),k=Number((_==null?void 0:_.final_amount)||n.total_amount||x);return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-serif text-lg font-semibold text-mediterranean-blu-scuro",children:"Totale"}),s.jsxs("span",{className:"font-serif text-xl font-bold text-mediterranean-marroncino",children:["",x.toFixed(2)]})]}),C>0&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex justify-between items-center text-green-700",children:[s.jsxs("span",{className:"font-medium",children:["Sconto",_!=null&&_.discount_percentage?` (${_.discount_percentage}%)`:""]}),s.jsxs("span",{className:"font-semibold",children:["-",C.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-serif text-lg font-semibold text-mediterranean-blu-scuro",children:"Totale scontato"}),s.jsxs("span",{className:"font-serif text-xl font-bold text-mediterranean-marroncino",children:["",k.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-mediterranean-blu-scuro opacity-75",children:[s.jsx("span",{children:"Somma risparmiata"}),s.jsxs("span",{children:["",C.toFixed(2)]})]})]})]})})()})]}),s.jsxs(ae,{children:[s.jsxs("h2",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4",children:[s.jsx(yr,{className:"w-5 h-5 inline mr-2"}),"Pagamento Sicuro"]}),c&&s.jsx("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg",children:s.jsx("p",{className:"text-red-600 text-sm",children:c})}),s.jsx("div",{className:"mb-6",children:s.jsxs("div",{className:"p-6 border-2 border-mediterranean-marroncino rounded-lg",children:[s.jsxs("h3",{className:"font-medium text-mediterranean-blu-scuro mb-4 flex items-center",children:[s.jsx(yr,{className:"w-5 h-5 text-mediterranean-marroncino mr-2"}),"Pagamento sicuro con Stripe"]}),b?s.jsx(sp,{stripe:m,options:{clientSecret:b},children:s.jsx(w,{clientSecret:b})}):s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75",children:"Inizializzazione pagamento in corso..."})]})}),s.jsx("p",{className:"text-xs text-mediterranean-blu-scuro opacity-50 text-center mt-4",children:"I tuoi dati di pagamento sono protetti con crittografia SSL"})]})]})]})}):s.jsx("div",{className:"min-h-screen bg-mediterranean-beige flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino mx-auto mb-4"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Caricamento..."})]})})},Fw=()=>{const[e,t]=y.useState(null),[r,n]=y.useState("all"),i=[{src:"https://images.pexels.com/photos/8753656/pexels-photo-8753656.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Interno del ristorante",tag:"sala"},{src:"https://images.pexels.com/photos/4518843/pexels-photo-4518843.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Spaghetti alle vongole",tag:"piatti"},{src:"https://images.pexels.com/photos/12737268/pexels-photo-12737268.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Branzino fresco",tag:"pescato"},{src:"https://images.pexels.com/photos/5410400/pexels-photo-5410400.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Frittura di pesce",tag:"piatti"},{src:"https://images.pexels.com/photos/8753790/pexels-photo-8753790.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Cucina a vista",tag:"cucina"},{src:"https://images.pexels.com/photos/3662189/pexels-photo-3662189.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Crudo di pesce",tag:"piatti"},{src:"https://images.pexels.com/photos/7218637/pexels-photo-7218637.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Risotto ai frutti di mare",tag:"piatti"},{src:"https://images.pexels.com/photos/5487474/pexels-photo-5487474.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Polpo grigliato",tag:"piatti"},{src:"https://images.pexels.com/photos/5543346/pexels-photo-5543346.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Pescatori al lavoro",tag:"pescato"},{src:"https://images.pexels.com/photos/4197439/pexels-photo-4197439.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Pesce fresco del giorno",tag:"pescato"},{src:"https://images.pexels.com/photos/6479607/pexels-photo-6479607.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Chef al lavoro",tag:"cucina"},{src:"https://images.pexels.com/photos/5746034/pexels-photo-5746034.jpeg?auto=compress&cs=tinysrgb&w=800",alt:"Vista del mare",tag:"sala"}],a=[{id:"all",label:"Tutte le Foto"},{id:"piatti",label:"I Nostri Piatti"},{id:"pescato",label:"Pesce Fresco"},{id:"cucina",label:"La Cucina"},{id:"sala",label:"Ambiente"}],o=r==="all"?i:i.filter(m=>m.tag===r),c=m=>{t(m)},l=()=>{t(null)},u=()=>{e!==null&&t((e+1)%o.length)},d=()=>{e!==null&&t(e===0?o.length-1:e-1)};return s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-mediterranean-blu-scuro mb-4",children:"Galleria Fotografica"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-2xl mx-auto",children:"Scopri attraverso le immagini l'atmosfera del nostro ristorante, la qualit dei nostri piatti e la freschezza del nostro pescato."})]}),s.jsx("div",{className:"flex flex-wrap justify-center gap-2 mb-8",children:a.map(m=>s.jsx("button",{onClick:()=>n(m.id),className:`px-4 py-2 rounded-lg font-medium transition-all ${r===m.id?"bg-mediterranean-marroncino text-mediterranean-bianco shadow-md":"bg-mediterranean-bianco text-mediterranean-blu-scuro hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco"}`,children:m.label},m.id))}),s.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-8",children:o.map((m,h)=>s.jsxs("div",{className:"relative aspect-square overflow-hidden rounded-lg cursor-pointer group",onClick:()=>c(h),children:[s.jsx("img",{src:m.src,alt:m.alt,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-110",loading:"lazy"}),s.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-30 transition-all duration-300 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-sm font-medium opacity-0 group-hover:opacity-100 transition-opacity text-center px-4",children:m.alt})})]},h))}),e!==null&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative max-w-4xl max-h-full",children:[s.jsx("button",{onClick:l,className:"absolute top-4 right-4 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:s.jsx(Qr,{className:"w-6 h-6"})}),s.jsx("button",{onClick:d,className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:s.jsx(Rb,{className:"w-6 h-6"})}),s.jsx("button",{onClick:u,className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-black bg-opacity-50 text-white p-2 rounded-full hover:bg-opacity-70 transition-all",children:s.jsx(Ob,{className:"w-6 h-6"})}),s.jsx("img",{src:o[e].src,alt:o[e].alt,className:"max-w-full max-h-full object-contain rounded-lg"}),s.jsxs("div",{className:"absolute bottom-4 left-4 right-4 bg-black bg-opacity-50 text-white p-4 rounded-lg",children:[s.jsx("p",{className:"text-lg font-medium",children:o[e].alt}),s.jsxs("p",{className:"text-sm opacity-75",children:[e+1," di ",o.length]})]})]})}),s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"bg-mediterranean-bianco rounded-lg p-8 shadow-lg",children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-4",children:"Vieni a Trovarci"}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-6",children:"Vieni a scoprire di persona l'atmosfera accogliente del nostro ristorante e gusta i sapori autentici del mediterraneo."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx("a",{href:"/prenota",className:"inline-flex items-center justify-center px-6 py-3 bg-mediterranean-marroncino text-mediterranean-bianco rounded-lg hover:bg-opacity-90 transition-colors font-medium",children:"Prenota il Tuo Ordine"}),s.jsx("a",{href:"/contatti",className:"inline-flex items-center justify-center px-6 py-3 border-2 border-mediterranean-marroncino text-mediterranean-marroncino rounded-lg hover:bg-mediterranean-marroncino hover:text-mediterranean-bianco transition-colors font-medium",children:"Come Raggiungerci"})]})]})})]})})},Uw=()=>{const e=[{question:"Come funziona il servizio take away?",answer:"Puoi ordinare online attraverso il nostro sito, selezionando i piatti dal men e scegliendo l'orario di ritiro. Riceverai una conferma via email con tutti i dettagli."},{question:"Quali sono gli orari di ritiro disponibili?",answer:"Gli orari di ritiro sono: marted-sabato dalle 11:00 alle 15:30 e dalle 17:00 alle 22:00, domenica dalle 09:30 alle 15:00. Luned chiuso."},{question:"Posso richiedere informazioni sugli allergeni?",answer:"Assolutamente s. Ogni piatto ha indicati gli allergeni principali. Per informazioni dettagliate puoi contattarci telefonicamente o specificare allergie particolari nelle note dell'ordine."},{question:" possibile modificare o cancellare un ordine?",answer:"Puoi modificare o cancellare il tuo ordine chiamandoci entro 30 minuti dalla conferma. Dopo questo termine, l'ordine  gi in preparazione."},{question:"Accettate prenotazioni per grandi gruppi?",answer:"Per ordini superiori a 6 persone ti consigliamo di chiamarci direttamente per organizzare al meglio la preparazione e i tempi di ritiro."},{question:"Il pesce  sempre fresco?",answer:'S, il pesce  sempre fresco e proviene direttamente dalla nostra pescheria "Pescheria Mediterraneo da Andrea".'}];return s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"font-serif text-4xl md:text-5xl font-bold text-mediterranean-blu-scuro mb-4",children:"Contatti e Informazioni"}),s.jsx("p",{className:"text-lg text-mediterranean-blu-scuro max-w-2xl mx-auto",children:"Tutte le informazioni per raggiungerci, contattarci e organizzare il tuo ordine take away."})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs(ae,{children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-6",children:"Informazioni di Contatto"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(ua,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:"Indirizzo"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Viale Anicio Gallo, 49, 00174 Roma RM"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:"Roma (RM)"})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(_r,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:"Telefono"}),s.jsx("a",{href:"tel:+393313320411",className:"text-mediterranean-marroncino hover:underline text-lg",children:"+39 331 332 0411"})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(Qs,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:"Email"}),s.jsx("a",{href:"mailto:info@gustomediterraneo.it",className:"text-mediterranean-marroncino hover:underline",children:"info@gustomediterraneo.it"})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(Wr,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:"Orari di Apertura"}),s.jsxs("div",{className:"space-y-1 text-mediterranean-blu-scuro",children:[s.jsx("p",{className:"font-medium",children:"Momentaneamente chiusi"}),s.jsx("p",{className:"text-sm opacity-75",children:"Ci scusiamo per il disagio."})]})]})]})]}),s.jsx("div",{className:"mt-6 pt-6 border-t border-mediterranean-beige",children:s.jsxs("a",{href:"tel:+393313320411",className:"w-full bg-mediterranean-marroncino hover:bg-opacity-90 text-mediterranean-bianco px-6 py-3 rounded-lg font-medium transition-colors flex items-center justify-center",children:[s.jsx(_r,{className:"w-5 h-5 mr-2"}),"Chiama Ora"]})})]}),s.jsxs(ae,{children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-6",children:"Come Raggiungerci"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(Tb,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:"In Auto"}),s.jsx("p",{className:"text-mediterranean-blu-scuro text-sm",children:"Parcheggio disponibile nelle vicinanze."})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(Pb,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:"Mezzi Pubblici"}),s.jsxs("p",{className:"text-mediterranean-blu-scuro text-sm",children:['Autobus: linee ATAC 557 - Fermata "Anicio Gallo/Appio Claudio"',s.jsx("br",{}),"Distanza: 50 metri dalla fermata"]})]})]}),s.jsxs("div",{className:"flex items-start space-x-4",children:[s.jsx(qb,{className:"w-6 h-6 text-mediterranean-marroncino mt-1 flex-shrink-0"}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:"Metro"}),s.jsx("p",{className:"text-mediterranean-blu-scuro text-sm",children:'Metro A: Fermata "Giulio Agricola" (400 metri)'})]})]})]})]})]}),s.jsx("div",{children:s.jsxs(ae,{className:"h-full",children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-6",children:"Dove Siamo"}),s.jsx("div",{className:"aspect-video bg-gray-200 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ua,{className:"w-12 h-12 text-mediterranean-marroncino mx-auto mb-2"}),s.jsx("p",{className:"text-mediterranean-blu-scuro font-medium",children:"Mappa Interattiva"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75",children:"Viale Anicio Gallo, 49, 00174 Roma RM"}),s.jsx("button",{onClick:()=>window.open("https://maps.google.com/?q=Viale+Anicio+Gallo+49+Roma","_blank"),className:"mt-4 px-4 py-2 bg-mediterranean-marroncino text-mediterranean-bianco rounded-lg hover:bg-opacity-90 transition-colors text-sm",children:"Apri in Google Maps"})]})})]})})]}),s.jsxs(ae,{className:"mt-8",children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-6 text-center",children:"Seguici sui nostri social"}),s.jsxs("div",{className:"flex items-center justify-center gap-4",children:[s.jsxs("a",{href:"https://www.facebook.com/gustomediterraneoroma/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-mediterranean-marroncino text-mediterranean-bianco rounded-lg hover:bg-opacity-90 transition-colors",children:[s.jsx($f,{className:"w-5 h-5"}),s.jsx("span",{children:"Facebook"})]}),s.jsxs("a",{href:"https://www.instagram.com/gustomediterraneoroma_/",target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-mediterranean-marroncino text-mediterranean-bianco rounded-lg hover:bg-opacity-90 transition-colors",children:[s.jsx(Uf,{className:"w-5 h-5"}),s.jsx("span",{children:"Instagram"})]})]})]}),s.jsxs(ae,{className:"mt-8",children:[s.jsx("h3",{className:"font-serif text-2xl font-semibold text-mediterranean-blu-scuro mb-8 text-center",children:"Domande Frequenti"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:e.map((t,r)=>s.jsxs("div",{className:"p-4 bg-mediterranean-beige rounded-lg",children:[s.jsx("h4",{className:"font-semibold text-mediterranean-blu-scuro mb-2",children:t.question}),s.jsx("p",{className:"text-mediterranean-blu-scuro text-sm leading-relaxed",children:t.answer})]},r))})]})]})})},Bw=()=>{const{dishes:e,loading:t,error:r,addDish:n,updateDish:i,deleteDish:a,fetchDishes:o}=Kr(),[c,l]=y.useState(!1),[u,d]=y.useState(null),[m,h]=y.useState("fixed"),[b,j]=y.useState({name:"",description:"",price:"",category:"antipasti",allergens:[],tags:[],image_url:"",available:!0,limited_quantity:!1}),v=["antipasti","primi","secondi","contorni","fritture","panini","vini"],w=["glutine","latte","uova","pesce","molluschi","crostacei","soia","frutta a guscio","sedano","senape","sesamo","solfiti"];if(y.useEffect(()=>{o()},[o]),r)return s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(Cb,{className:"w-5 h-5 text-red-400 mr-2"}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Errore nel caricamento dei piatti"}),s.jsx("p",{className:"text-sm text-red-700 mt-1",children:r}),s.jsx("p",{className:"text-sm text-red-600 mt-2",children:"Assicurati che la tabella 'dishes' sia stata creata in Supabase con lo schema corretto."}),s.jsx(Q,{onClick:o,className:"mt-3 bg-red-600 hover:bg-red-700",size:"sm",children:"Riprova"})]})]})})});if(t)return s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Caricamento piatti in corso..."}),s.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Se il caricamento persiste, verifica la connessione a Supabase"})]})})});const g=async k=>{k.preventDefault();const N=Array.from(new Set((b.tags||[]).filter(A=>A!=="by_weight"))),S={...b,price:parseFloat(b.price),tags:N,pricing_type:m};try{u?await i(u.id,S):await n(S),x(),l(!1)}catch(A){console.error("Errore nel salvare il piatto:",A);const $=A instanceof Error?A.message:"Errore sconosciuto";alert(`Errore nel salvare il piatto: ${$}`)}},p=k=>{var N;d(k),j({name:k.name,description:k.description,price:k.price.toString(),category:k.category,allergens:k.allergens||[],tags:k.tags||[],image_url:k.image_url||"",available:k.available,limited_quantity:k.limited_quantity||!1}),h(k.pricing_type==="by_weight"||(N=k.tags)!=null&&N.includes("by_weight")?"by_weight":"fixed"),l(!0)},f=async k=>{if(window.confirm("Sei sicuro di voler eliminare questo piatto?"))try{await a(k)}catch(N){console.error("Errore nell'eliminare il piatto:",N),alert("Errore nell'eliminare il piatto")}},x=()=>{j({name:"",description:"",price:"",category:"antipasti",allergens:[],tags:[],image_url:"",available:!0,limited_quantity:!1}),h("fixed"),d(null)},_=k=>{j(N=>({...N,allergens:N.allergens.includes(k)?N.allergens.filter(S=>S!==k):[...N.allergens,k]}))},C=k=>{const N=k.split(",").map(S=>S.trim()).filter(S=>S.length>0);j(S=>({...S,tags:N}))};return s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Gestione Piatti"}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Gestisci il menu del ristorante - ",e.length," piatti totali"]})]}),s.jsxs(Q,{onClick:()=>{x(),l(!0)},className:"flex items-center gap-2",children:[s.jsx(ft,{className:"w-4 h-4"}),"Aggiungi Piatto"]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx("div",{className:"text-gray-400 mb-4",children:s.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun piatto trovato"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Inizia aggiungendo il primo piatto al menu del ristorante."}),s.jsxs(Q,{onClick:()=>{x(),l(!0)},className:"inline-flex items-center gap-2",children:[s.jsx(ft,{className:"w-4 h-4"}),"Aggiungi il primo piatto"]})]}):s.jsx("div",{className:"grid gap-4",children:v.map(k=>{const N=e.filter(S=>S.category===k);return N.length===0?null:s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[s.jsx("div",{className:"px-6 py-4 border-b bg-gray-50",children:s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 capitalize",children:[k," (",N.length,")"]})}),s.jsx("div",{className:"divide-y",children:N.map(S=>{var A;return s.jsxs("div",{className:"p-6 hover:bg-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-start",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[s.jsx("h4",{className:"text-lg font-medium text-gray-900",children:S.name}),s.jsx("span",{className:"text-lg font-bold text-mediterranean-marroncino",children:(A=S.tags)!=null&&A.includes("by_weight")?`${S.price.toFixed(2)} / 100g`:`${S.price.toFixed(2)}`}),!S.available&&s.jsx("span",{className:"px-2 py-1 text-xs bg-red-100 text-red-800 rounded-full",children:"Non disponibile"}),S.limited_quantity&&s.jsx("span",{className:"px-2 py-1 text-xs bg-yellow-100 text-yellow-800 rounded-full",children:"Quantit limitata"})]}),s.jsx("p",{className:"text-gray-600 mb-3",children:S.description}),S.allergens&&S.allergens.length>0&&s.jsxs("div",{className:"mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Allergeni: "}),s.jsx("span",{className:"text-sm text-gray-600",children:S.allergens.join(", ")})]}),S.tags&&S.tags.length>0&&s.jsx("div",{className:"flex flex-wrap gap-1",children:S.tags.map($=>s.jsx("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:$},$))})]}),S.image_url&&s.jsx("div",{className:"ml-4 flex-shrink-0",children:s.jsx("img",{src:S.image_url,alt:S.name,className:"w-20 h-20 object-cover rounded-lg"})})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-4",children:[s.jsxs("button",{onClick:()=>p(S),className:"flex items-center gap-1 px-3 py-1 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-md",children:[s.jsx(Fb,{className:"w-4 h-4"}),"Modifica"]}),s.jsxs("button",{onClick:()=>f(S.id),className:"flex items-center gap-1 px-3 py-1 text-sm text-red-600 hover:text-red-800 hover:bg-red-50 rounded-md",children:[s.jsx(Ms,{className:"w-4 h-4"}),"Elimina"]})]})]},S.id)})})]},k)})}),c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:s.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsx("h3",{className:"text-xl font-bold mb-4",children:u?"Modifica Piatto":"Aggiungi Nuovo Piatto"}),s.jsxs("form",{onSubmit:g,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome Piatto *"}),s.jsx("input",{type:"text",value:b.name,onChange:k=>j(N=>({...N,name:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Descrizione *"}),s.jsx("textarea",{value:b.description,onChange:k=>j(N=>({...N,description:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",rows:3,required:!0})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tipologia prezzo *"}),s.jsxs("select",{value:m,onChange:k=>h(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",required:!0,children:[s.jsx("option",{value:"fixed",children:"A prezzo"}),s.jsx("option",{value:"by_weight",children:"A peso (/100g)"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:m==="by_weight"?"Prezzo per 100g () *":"Prezzo () *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:b.price,onChange:k=>j(N=>({...N,price:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:m==="by_weight"?"Inserisci il prezzo riferito a 100g (es. 10.00 = 10/100g)":"Inserisci il prezzo fisso del piatto (es. 12.00)"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Categoria *"}),s.jsx("select",{value:b.category,onChange:k=>j(N=>({...N,category:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",required:!0,children:v.map(k=>s.jsx("option",{value:k,children:k.charAt(0).toUpperCase()+k.slice(1)},k))})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Immagine"}),s.jsx("input",{type:"text",value:b.image_url,onChange:k=>j(N=>({...N,image_url:k.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"/images/nome-file.jpg o https://..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Allergeni"}),s.jsx("div",{className:"grid grid-cols-3 gap-2",children:w.map(k=>s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:b.allergens.includes(k),onChange:()=>_(k),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:k})]},k))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tag (separati da virgola)"}),s.jsx("input",{type:"text",value:b.tags.join(", "),onChange:k=>C(k.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-amber-500",placeholder:"es: vegetariano, piccante, stagionale"})]}),s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:b.available,onChange:k=>j(N=>({...N,available:k.target.checked})),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Disponibile"})]}),s.jsxs("label",{className:"flex items-center",children:[s.jsx("input",{type:"checkbox",checked:b.limited_quantity,onChange:k=>j(N=>({...N,limited_quantity:k.target.checked})),className:"mr-2"}),s.jsx("span",{className:"text-sm",children:"Quantit limitata"})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx("button",{type:"button",onClick:()=>{l(!1),x()},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"Annulla"}),s.jsx("button",{type:"submit",className:"px-4 py-2 bg-amber-600 text-white rounded-md hover:bg-amber-700",children:u?"Aggiorna":"Aggiungi"})]})]})]})})]})},ap=({isOpen:e,onClose:t,onAddDish:r,menuType:n,title:i,excludeDishIds:a})=>{const{dishes:o,loading:c,addingToMenu:l,fetchDishes:u}=Kr(),[d,m]=y.useState(""),[h,b]=y.useState("all");if(y.useEffect(()=>{e&&o.length===0&&u()},[e,o.length,u]),!e)return null;const j=o.filter(f=>!a.includes(f.id)),v=j.filter(f=>{const x=f.name.toLowerCase().includes(d.toLowerCase())||f.description.toLowerCase().includes(d.toLowerCase()),_=h==="all"||f.category===h;return x&&_}),w=[{value:"all",label:"Tutte le categorie"},{value:"antipasti",label:"Antipasti"},{value:"primi",label:"Primi Piatti"},{value:"secondi",label:"Secondi Piatti"},{value:"contorni",label:"Contorni"},{value:"fritture",label:"Fritture"},{value:"panini",label:"Panini"},{value:"vini",label:"Vini"}],g=f=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(f),p=f=>({antipasti:"Antipasti",primi:"Primi Piatti",secondi:"Secondi Piatti",contorni:"Contorni",fritture:"Fritture",panini:"Panini",vini:"Vini"})[f]||f;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-hidden",children:[s.jsxs("div",{className:"flex items-center justify-between p-6 border-b",children:[s.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:i}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(Qr,{className:"w-6 h-6"})})]}),s.jsx("div",{className:"p-6 border-b bg-gray-50",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex-1 relative",children:[s.jsx(Bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Cerca piatti...",value:d,onChange:f=>m(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent"})]}),s.jsx("select",{value:h,onChange:f=>b(f.target.value),className:"px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-amber-500 focus:border-transparent",children:w.map(f=>s.jsx("option",{value:f.value,children:f.label},f.value))})]})}),s.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:c?s.jsxs("div",{className:"flex justify-center items-center h-32",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento piatti..."})]}):v.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun piatto disponibile"}),s.jsx("p",{className:"text-gray-600",children:j.length===0?"Tutti i piatti sono gi stati aggiunti al menu.":"Nessun piatto corrisponde ai criteri di ricerca."})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:v.map(f=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:s.jsxs("div",{className:"flex items-start space-x-4",children:[f.image_url&&s.jsx("img",{src:f.image_url,alt:f.name,className:"w-16 h-16 rounded-lg object-cover flex-shrink-0"}),s.jsx("div",{className:"flex-1 min-w-0",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:f.name}),s.jsx("p",{className:"text-xs text-gray-500 mt-1 line-clamp-2",children:f.description}),s.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:p(f.category)}),s.jsx("span",{className:"text-sm font-semibold text-gray-900",children:g(f.price)})]}),f.allergens.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[f.allergens.slice(0,3).map((x,_)=>s.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-red-100 text-red-800",children:x},_)),f.allergens.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",f.allergens.length-3," altri"]})]})]}),s.jsx(Q,{onClick:()=>r(f.id),size:"sm",className:"ml-2 flex-shrink-0",disabled:l,children:l?s.jsx(Ib,{className:"w-4 h-4 animate-spin"}):s.jsx(ft,{className:"w-4 h-4"})})]})})]})},f.id))})}),s.jsx("div",{className:"flex justify-end p-6 border-t bg-gray-50",children:s.jsx(Q,{onClick:t,variant:"outline",children:"Chiudi"})})]})})},Rd=()=>{const{dailyMenuDishes:e,loading:t,fetchMenuDishes:r,addDishToMenu:n,removeDishFromMenu:i}=Kr(),[a,o]=y.useState(!1);y.useEffect(()=>{r("daily")},[r]);const c=async h=>{try{console.log("MenuDelGiornoManagement: handleAddDish called with dishId:",h),await n(h,"daily"),console.log("MenuDelGiornoManagement: addDishToMenu completed successfully"),o(!1)}catch(b){console.error("Errore nell'aggiunta del piatto:",b)}},l=async h=>{try{await i(h,"daily")}catch(b){console.error("Errore nella rimozione del piatto:",b)}},u=h=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(h),d=h=>({antipasti:"Antipasti",primi:"Primi Piatti",secondi:"Secondi Piatti",contorni:"Contorni",fritture:"Fritture",panini:"Panini",vini:"Vini"})[h]||h,m=e.map(h=>h.dish_id);return t?s.jsxs("div",{className:"flex justify-center items-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento menu del giorno..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Menu del Giorno"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gestisci i piatti disponibili nel menu del giorno"})]}),s.jsxs(Q,{onClick:()=>o(!0),className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Aggiungi Piatto"})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx(Ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun piatto nel menu del giorno"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Inizia aggiungendo alcuni piatti al menu del giorno"}),s.jsxs(Q,{onClick:()=>o(!0),className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Aggiungi Primo Piatto"})]})]}):(()=>{const h={};e.forEach(j=>{var w;const v=((w=j.dish)==null?void 0:w.category)||"altro";h[v]||(h[v]=[]),h[v].push(j)});const b=Object.keys(h).sort((j,v)=>d(j).localeCompare(d(v)));return s.jsx("div",{className:"space-y-8",children:b.map(j=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:d(j)}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h[j].map(v=>{var g;const w=v.dish;return w?s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[w.image_url&&s.jsx("img",{src:w.image_url,alt:w.name,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:w.name}),s.jsx("span",{className:"text-lg font-bold text-amber-600",children:w.pricing_type==="by_weight"||(g=w.tags)!=null&&g.includes("by_weight")?`${u(w.price)} / 100g`:`${u(w.price)}`})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:w.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:d(w.category)}),v.is_available&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Disponibile"})]}),w.allergens.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[w.allergens.slice(0,3).map((p,f)=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:p},f)),w.allergens.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",w.allergens.length-3," altri"]})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(Q,{onClick:()=>l(v.dish_id),variant:"outline",size:"sm",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",children:[s.jsx(Ms,{className:"w-4 h-4 mr-1"}),"Rimuovi"]})})]})]},v.id):null})})]},j))})})(),s.jsx(ap,{isOpen:a,onClose:()=>o(!1),onAddDish:c,menuType:"daily",title:"Aggiungi Piatto al Menu del Giorno",excludeDishIds:m})]})},qw=()=>{const{fixedMenuDishes:e,loading:t,fetchMenuDishes:r,addDishToMenu:n,removeDishFromMenu:i}=Kr(),[a,o]=y.useState(!1);y.useEffect(()=>{r("fixed")},[r]);const c=async h=>{try{await n(h,"fixed"),o(!1)}catch(b){console.error("Errore nell'aggiunta del piatto:",b)}},l=async h=>{try{await i(h,"fixed")}catch(b){console.error("Errore nella rimozione del piatto:",b)}},u=h=>new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"}).format(h),d=h=>({antipasti:"Antipasti",primi:"Primi Piatti",secondi:"Secondi Piatti",contorni:"Contorni",fritture:"Fritture",panini:"Panini",vini:"Vini"})[h]||h,m=e.map(h=>h.dish_id);return t?s.jsxs("div",{className:"flex justify-center items-center h-64",children:[s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-amber-600"}),s.jsx("span",{className:"ml-3 text-gray-600",children:"Caricamento menu fisso..."})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Menu Fisso"}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Gestisci i piatti disponibili nel menu fisso"})]}),s.jsxs(Q,{onClick:()=>o(!0),className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Aggiungi Piatto"})]})]}),e.length===0?s.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg",children:[s.jsx(Ct,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun piatto nel menu fisso"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Inizia aggiungendo alcuni piatti al menu fisso"}),s.jsxs(Q,{onClick:()=>o(!0),className:"flex items-center space-x-2",children:[s.jsx(ft,{className:"w-4 h-4"}),s.jsx("span",{children:"Aggiungi Primo Piatto"})]})]}):(()=>{const h={};e.forEach(j=>{var w;const v=((w=j.dish)==null?void 0:w.category)||"altro";h[v]||(h[v]=[]),h[v].push(j)});const b=Object.keys(h).sort((j,v)=>d(j).localeCompare(d(v)));return s.jsx("div",{className:"space-y-8",children:b.map(j=>s.jsxs("div",{children:[s.jsx("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:d(j)}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:h[j].map(v=>{var g;const w=v.dish;return w?s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[w.image_url&&s.jsx("img",{src:w.image_url,alt:w.name,className:"w-full h-48 object-cover"}),s.jsxs("div",{className:"p-4",children:[s.jsxs("div",{className:"flex items-start justify-between mb-2",children:[s.jsx("h4",{className:"text-lg font-semibold text-gray-900 line-clamp-1",children:w.name}),s.jsx("span",{className:"text-lg font-bold text-amber-600",children:w.pricing_type==="by_weight"||(g=w.tags)!=null&&g.includes("by_weight")?`${u(w.price)} / 100g`:`${u(w.price)}`})]}),s.jsx("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:w.description}),s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-amber-100 text-amber-800",children:d(w.category)}),v.is_available&&s.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Disponibile"})]}),w.allergens.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[w.allergens.slice(0,3).map((p,f)=>s.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:p},f)),w.allergens.length>3&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",w.allergens.length-3," altri"]})]}),s.jsx("div",{className:"flex space-x-2",children:s.jsxs(Q,{onClick:()=>l(v.dish_id),variant:"outline",size:"sm",className:"flex-1 text-red-600 border-red-200 hover:bg-red-50",children:[s.jsx(Ms,{className:"w-4 h-4 mr-1"}),"Rimuovi"]})})]})]},v.id):null})})]},j))})})(),s.jsx(ap,{isOpen:a,onClose:()=>o(!1),onAddDish:c,menuType:"fixed",title:"Aggiungi Piatto al Menu Fisso",excludeDishIds:m})]})},Ww=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[i,a]=y.useState(null),[o,c]=y.useState(""),[l,u]=y.useState("all"),[d,m]=y.useState("all");y.useEffect(()=>{const x=()=>{i&&a(null)};return document.addEventListener("click",x),()=>document.removeEventListener("click",x)},[i]),y.useEffect(()=>{h()},[]);const h=async()=>{try{n(!0),console.log("Fetching orders using admin function...");const{data:x,error:_}=await J.rpc("get_admin_orders");if(console.log("Orders query result:",{ordersData:x,error:_}),_)throw console.error("Supabase error:",_),_;const C=x||[],k=C.map(S=>S.id).filter(Boolean);let N=C;if(k.length>0){let{data:S,error:A}=await J.from("order_items").select("id, order_id, dish_name, dish_price, quantity, subtotal, pricing_type, weight_grams").in("order_id",k);if(A){const I=String(A.message||"").toLowerCase();if(I.includes("pricing_type")||I.includes("weight_grams")||I.includes("schema cache")){console.warn("Colonne peso non disponibili su order_items: fallback senza pricing_type/weight_grams");const{data:q,error:ee}=await J.from("order_items").select("id, order_id, dish_name, dish_price, quantity, subtotal").in("order_id",k);ee?console.warn("Errore anche nel fallback degli order_items:",ee):S=q}else console.warn("Errore nel recupero degli order_items:",A)}const $={};(S||[]).forEach(I=>{const q=I.order_id;$[q]||($[q]=[]),$[q].push({id:I.id,dish_name:I.dish_name,dish_price:Number(I.dish_price||0),quantity:Number(I.quantity||0),subtotal:Number(I.subtotal||0),pricing_type:I.pricing_type,weight_grams:I.weight_grams})}),N=C.map(I=>({...I,order_items:$[I.id]||[]}))}console.log("Setting orders data (merged with items):",N),t(N)}catch(x){console.error("Error fetching orders:",x)}finally{n(!1)}},b=async(x,_)=>{try{console.log("Attempting to update order status:",{orderId:x,newStatus:_}),console.log("Current user:",await J.auth.getUser());const{data:C,error:k}=await J.from("orders").update({order_status:_}).eq("id",x).select();if(console.log("Update result:",{data:C,error:k}),k)throw console.error("Supabase error details:",{message:k.message,details:k.details,hint:k.hint,code:k.code}),k;t(e.map(N=>N.id===x?{...N,order_status:_}:N)),console.log("Order status updated successfully")}catch(C){console.error("Error updating order status:",C),alert("Errore nell'aggiornamento dello stato dell'ordine: "+(C==null?void 0:C.message)||"Errore sconosciuto")}},j=x=>{switch(x){case"received":return"bg-blue-100 text-blue-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ready":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},v=x=>{switch(x){case"received":return"Ricevuto";case"preparing":return"In Preparazione";case"ready":return"Pronto";case"completed":return"Completato";case"cancelled":return"Annullato";default:return x}},w=x=>{switch(x){case"paid":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"failed":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=x=>{switch(x){case"paid":return"Pagato";case"pending":return"In Attesa";case"failed":return"Fallito";default:return x}},p=x=>x.payment_method==="online"?x.payment_status==="paid"?"Pagato sul sito":x.payment_status==="failed"?"Fallito":"In Attesa":x.payment_method==="pickup"?"Pagamento alla consegna":g(x.payment_status),f=[...e].sort((x,_)=>{const C=x.pickup_date?new Date(x.pickup_date):new Date(x.created_at),k=_.pickup_date?new Date(_.pickup_date):new Date(_.created_at),N=C.getTime()-k.getTime();if(N!==0)return N;const[S="0",A="0"]=(x.pickup_time||"").split(":"),[$="0",I="0"]=(_.pickup_time||"").split(":"),q=Number(S)*60+Number(A),ee=Number($)*60+Number(I);return q-ee}).filter(x=>{const _=x.order_number.toLowerCase().includes(o.toLowerCase())||x.customer_name.toLowerCase().includes(o.toLowerCase())||x.customer_email.toLowerCase().includes(o.toLowerCase())||x.customer_phone.includes(o),C=l==="all"||x.order_status===l,k=d==="all"||x.payment_status===d;return _&&C&&k});return r?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino"})})}):s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[s.jsx(br,{className:"w-6 h-6 mr-2"}),"Gestione Ordini"]}),s.jsxs("p",{className:"text-gray-600 mt-1",children:["Visualizza e gestisci tutti gli ordini ricevuti (",f.length," ordini)"]})]}),s.jsx("button",{onClick:h,className:"px-4 py-2 bg-mediterranean-marroncino text-white rounded-lg hover:bg-opacity-90 transition-colors",children:"Aggiorna"})]}),s.jsx("div",{className:"bg-white rounded-lg shadow-sm p-4 mb-6",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Bf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsx("input",{type:"text",placeholder:"Cerca per numero ordine, nome, email o telefono...",value:o,onChange:x=>c(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent"})]}),s.jsxs("div",{className:"relative",children:[s.jsx(Ff,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsxs("select",{value:l,onChange:x=>u(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent appearance-none",children:[s.jsx("option",{value:"all",children:"Tutti gli stati"}),s.jsx("option",{value:"received",children:"Ricevuto"}),s.jsx("option",{value:"preparing",children:"In Preparazione"}),s.jsx("option",{value:"ready",children:"Pronto"}),s.jsx("option",{value:"completed",children:"Completato"}),s.jsx("option",{value:"cancelled",children:"Annullato"})]})]}),s.jsxs("div",{className:"relative",children:[s.jsx(yr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),s.jsxs("select",{value:d,onChange:x=>m(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent appearance-none",children:[s.jsx("option",{value:"all",children:"Tutti i pagamenti"}),s.jsx("option",{value:"paid",children:"Pagato"}),s.jsx("option",{value:"pending",children:"In Attesa"}),s.jsx("option",{value:"failed",children:"Fallito"})]})]})]})}),s.jsx("div",{className:"space-y-4 w-full max-w-full overflow-x-hidden bg-mediterranean-marroncino/20 p-4 rounded-lg",onClick:()=>{i&&a(null)},children:f.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(br,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Nessun ordine trovato"}),s.jsx("p",{className:"text-gray-500",children:e.length===0?"Non ci sono ancora ordini nel sistema.":"Nessun ordine corrisponde ai filtri selezionati."})]}):f.map(x=>s.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden w-full max-w-full",onClick:_=>{_.stopPropagation()},children:[s.jsxs("div",{className:"p-3 sm:p-4 border-b border-gray-100 cursor-pointer",role:"button",tabIndex:0,onClick:()=>a(i===x.id?null:x.id),onKeyDown:_=>{(_.key==="Enter"||_.key===" ")&&(_.preventDefault(),a(i===x.id?null:x.id))},children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:space-x-4 space-y-2 sm:space-y-0",children:[s.jsxs("div",{children:[s.jsxs("h3",{className:"font-semibold text-lg text-mediterranean-blu-scuro break-words",children:["Ordine #",x.order_number]}),s.jsx("p",{className:"text-sm text-gray-600 whitespace-normal break-words",children:new Date(x.created_at).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${j(x.order_status)}`,children:v(x.order_status)}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${w(x.payment_status)}`,children:p(x)})]})]}),s.jsxs("div",{className:"flex items-center justify-between sm:justify-end space-x-2 w-full sm:w-auto",children:[s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded text-sm font-medium text-gray-700 flex items-center",children:[s.jsx(Wr,{className:"w-4 h-4 mr-1 text-gray-500"}),x.pickup_time||"--:--"]}),s.jsxs("span",{className:"px-2 py-1 bg-gray-100 border border-gray-200 rounded text-xs font-medium text-gray-700 flex items-center",children:[s.jsx(Tl,{className:"w-3 h-3 mr-1 text-gray-500"}),x.pickup_date?new Date(x.pickup_date).toLocaleDateString("it-IT",{day:"2-digit",month:"2-digit"}):"--/--"]}),s.jsxs("span",{className:"text-lg font-bold text-mediterranean-marroncino",children:["",x.total_amount.toFixed(2)]}),s.jsx("button",{onClick:_=>{_.stopPropagation(),a(i===x.id?null:x.id)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",children:i===x.id?s.jsx(zf,{className:"w-5 h-5"}):s.jsx(Df,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"mt-3 grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center text-gray-600 break-words",children:[s.jsx(Xt,{className:"w-4 h-4 mr-1"}),x.customer_name]}),s.jsxs("div",{className:"flex items-center text-gray-600 break-words",children:[s.jsx(Tl,{className:"w-4 h-4 mr-1"}),new Date(x.pickup_date).toLocaleDateString("it-IT")]}),s.jsxs("div",{className:"flex items-center text-gray-600 break-words",children:[s.jsx(Wr,{className:"w-4 h-4 mr-1"}),x.pickup_time]}),s.jsxs("div",{className:"flex items-center text-gray-600 break-words",children:[s.jsx(yr,{className:"w-4 h-4 mr-1"}),x.payment_method==="pickup"?"Alla Consegna":"Online"]})]})]}),s.jsx("div",{className:`bg-gray-50 transition-all duration-300 ease-in-out overflow-hidden ${i===x.id?"max-h-[1200px] opacity-100 translate-y-0 p-3 sm:p-4":"max-h-0 opacity-0 -translate-y-1 p-0"}`,"aria-hidden":i!==x.id,children:s.jsxs("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 ${i===x.id?"":"pointer-events-none"}`,children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-mediterranean-blu-scuro mb-3",children:"Dettagli Cliente"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Xt,{className:"w-4 h-4 mr-2 text-gray-400"}),s.jsx("span",{className:"font-medium",children:"Nome:"}),s.jsx("span",{className:"ml-2",children:x.customer_name})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(Qs,{className:"w-4 h-4 mr-2 text-gray-400"}),s.jsx("span",{className:"font-medium",children:"Email:"}),s.jsx("span",{className:"ml-2",children:x.customer_email})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx(_r,{className:"w-4 h-4 mr-2 text-gray-400"}),s.jsx("span",{className:"font-medium",children:"Telefono:"}),s.jsx("span",{className:"ml-2",children:x.customer_phone})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium text-mediterranean-blu-scuro mb-2",children:"Gestione Stato"}),s.jsxs("select",{value:x.order_status,onChange:_=>b(x.id,_.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent text-sm",children:[s.jsx("option",{value:"received",children:"Ricevuto"}),s.jsx("option",{value:"preparing",children:"In Preparazione"}),s.jsx("option",{value:"ready",children:"Pronto"}),s.jsx("option",{value:"completed",children:"Completato"}),s.jsx("option",{value:"cancelled",children:"Annullato"})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-mediterranean-blu-scuro mb-3",children:"Piatti Ordinati"}),s.jsx("div",{className:"space-y-2",children:(Array.isArray(x.order_items)?x.order_items:[]).map(_=>s.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-2 py-2 px-3 bg-white rounded border",children:[s.jsxs("div",{className:"min-w-0",children:[s.jsx("span",{className:"font-medium text-mediterranean-blu-scuro block whitespace-normal break-words",children:_.dish_name}),s.jsxs("span",{className:"text-gray-500 block",children:["x",Number(_.quantity||0)," (",Number(_.dish_price||0).toFixed(2)," cad.)"]}),_.pricing_type==="by_weight"&&_.weight_grams?s.jsxs("span",{className:"text-gray-500 block",children:["Grammatura: ",Number(_.weight_grams),"g"]}):null]}),s.jsxs("span",{className:"font-semibold text-mediterranean-marroncino",children:["",Number(_.subtotal||0).toFixed(2)]})]},_.id))}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[x.discount_amount&&x.discount_amount>0&&s.jsxs("div",{className:"space-y-1 mb-3",children:[s.jsxs("div",{className:"flex justify-between items-center text-sm",children:[s.jsx("span",{children:"Subtotale:"}),s.jsxs("span",{children:["",Number(x.original_amount??x.total_amount??0).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between items-center text-sm text-green-600",children:[s.jsxs("span",{children:["Sconto ",x.discount_type==="first_order"?"(Primo Ordine)":"(Ordine >40)",x.discount_percentage&&` - ${x.discount_percentage}%`,":"]}),s.jsxs("span",{children:["-",x.discount_amount.toFixed(2)]})]})]}),s.jsxs("div",{className:"flex justify-between items-center font-bold text-lg",children:[s.jsx("span",{children:"Totale:"}),s.jsxs("span",{className:"text-mediterranean-marroncino",children:["",Number(x.total_amount??0).toFixed(2)]})]}),x.discount_amount&&x.discount_amount>0&&s.jsxs("div",{className:"text-right text-sm text-green-600 mt-1",children:["Risparmio: ",x.discount_amount.toFixed(2)]})]}),x.notes&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h4",{className:"font-medium text-mediterranean-blu-scuro mb-2",children:"Note"}),s.jsx("p",{className:"text-sm text-gray-600 bg-white p-3 rounded border",children:x.notes})]})]})]})})]},x.id))})]})},Vw=({isOpen:e,onClose:t,onLogin:r})=>{const[n,i]=y.useState(""),[a,o]=y.useState(""),[c,l]=y.useState(!1),[u,d]=y.useState(""),{signIn:m}=ct(),h=async v=>{v.preventDefault(),l(!0),d("");try{const{error:w}=await m(n,a);w?(d("Credenziali non valide o errore di autenticazione"),r(!1)):(r(!0),i(""),o(""))}catch{d("Errore durante il login"),r(!1)}l(!1)},b=()=>{i(""),o(""),d("")},j=()=>{t(),b()};return s.jsxs(zc,{isOpen:e,onClose:j,title:"Accesso Amministratore",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-mediterranean-marroncino rounded-full flex items-center justify-center mb-4",children:s.jsx(wd,{className:"w-8 h-8 text-white"})}),s.jsx("p",{className:"text-gray-600",children:"Inserisci le credenziali di amministratore per accedere al pannello di controllo"})]}),s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[u&&s.jsx("div",{className:"p-3 text-sm text-red-600 bg-red-50 rounded-md border border-red-200",children:u}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"admin-email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Amministratore"}),s.jsxs("div",{className:"relative",children:[s.jsx(Xt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"email",id:"admin-email",value:n,onChange:v=>i(v.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Email amministratore"})]})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"admin-password",className:"block text-sm font-medium text-gray-700 mb-1",children:"Password Amministratore"}),s.jsxs("div",{className:"relative",children:[s.jsx(wd,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"password",id:"admin-password",value:a,onChange:v=>o(v.target.value),required:!0,className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-mediterranean-marroncino focus:border-transparent",placeholder:"Password amministratore"})]})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-3",children:s.jsxs("p",{className:"text-sm text-blue-800",children:[s.jsx("strong",{children:"Accesso Amministratore:"}),s.jsx("br",{}),"Utilizza le credenziali del tuo account amministratore registrato nel sistema."]})}),s.jsx(Q,{type:"submit",disabled:c,className:"w-full",children:c?"Verifica in corso...":"Accedi come Amministratore"})]})]})},Hw=()=>{const[e,t]=y.useState([]),[r,n]=y.useState(!0),[i,a]=y.useState(null);y.useEffect(()=>{(async()=>{try{n(!0),a(null);const{data:u,error:d}=await J.rpc("get_admin_orders");if(d)throw d;t(u||[])}catch(u){console.error("Errore nel recupero ordini per statistiche:",u),a((u==null?void 0:u.message)||"Errore sconosciuto nel recupero dati")}finally{n(!1)}})()},[]);const o=y.useMemo(()=>{const l=e.length,u={received:e.filter(w=>w.order_status==="received").length,preparing:e.filter(w=>w.order_status==="preparing").length,ready:e.filter(w=>w.order_status==="ready").length,completed:e.filter(w=>w.order_status==="completed").length,cancelled:e.filter(w=>w.order_status==="cancelled").length},d={online:e.filter(w=>w.payment_method==="online").length,pickup:e.filter(w=>w.payment_method==="pickup").length},m={first_order:e.filter(w=>(w.discount_type||"none")==="first_order").length,amount_threshold:e.filter(w=>(w.discount_type||"none")==="amount_threshold").length,none:e.filter(w=>(w.discount_type||"none")==="none"||!w.discount_type).length},h=e.reduce((w,g)=>w+(Number(g.total_amount)||0),0),b=new Map;e.forEach(w=>{w.user_id&&b.set(w.user_id,(b.get(w.user_id)||0)+1)});const j=b.size,v=Array.from(b.values()).filter(w=>w>1).length;return{totalOrders:l,byStatus:u,payments:d,discounts:m,totalSum:h,users:{totalRegisteredApprox:j,habitual:v}}},[e]),c=l=>`${l.toFixed(2)}`;return r?s.jsx("div",{className:"p-6",children:s.jsx("div",{className:"flex items-center justify-center h-64",children:s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino"})})}):i?s.jsx("div",{className:"p-6",children:s.jsx(ae,{children:s.jsx("div",{className:"text-red-700",children:i})})}):s.jsxs("div",{className:"p-6 bg-mediterranean-marroncino bg-opacity-10 rounded-lg",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h2",{className:"text-2xl font-bold text-gray-800 flex items-center",children:[s.jsx(Mf,{className:"w-6 h-6 mr-2"}),"Statistiche"]}),s.jsx("p",{className:"text-gray-600 mt-1",children:"Panoramica degli ordini e degli utenti"})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[s.jsx(br,{className:"w-5 h-5 mr-2"}),"Stato ordini"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-4",children:[s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-blue-700 font-medium",children:[s.jsx($b,{className:"w-4 h-4 mr-2"})," Ricevuti"]}),s.jsx("div",{className:"text-2xl font-bold text-blue-800 mt-2",children:o.byStatus.received})]}),s.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-yellow-700 font-medium",children:[s.jsx(br,{className:"w-4 h-4 mr-2"})," In preparazione"]}),s.jsx("div",{className:"text-2xl font-bold text-yellow-800 mt-2",children:o.byStatus.preparing})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-green-700 font-medium",children:[s.jsx(Ab,{className:"w-4 h-4 mr-2"})," Pronto"]}),s.jsx("div",{className:"text-2xl font-bold text-green-800 mt-2",children:o.byStatus.ready})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-gray-700 font-medium",children:[s.jsx(zb,{className:"w-4 h-4 mr-2"})," Consegnato"]}),s.jsx("div",{className:"text-2xl font-bold text-gray-800 mt-2",children:o.byStatus.completed})]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-red-700 font-medium",children:[s.jsx(Hb,{className:"w-4 h-4 mr-2"})," Annullato"]}),s.jsx("div",{className:"text-2xl font-bold text-red-800 mt-2",children:o.byStatus.cancelled})]})]})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-2 flex items-center",children:[s.jsx(br,{className:"w-5 h-5 mr-2"}),"Numero ordini totale"]}),s.jsx("div",{className:"text-3xl font-bold text-mediterranean-blu-scuro",children:o.totalOrders})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Numero pagamenti"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-green-700 font-medium",children:[s.jsx(yr,{className:"w-4 h-4 mr-2"})," Con carta (sul sito)"]}),s.jsx("div",{className:"text-2xl font-bold text-green-800 mt-2",children:o.payments.online})]}),s.jsxs("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-amber-700 font-medium",children:[s.jsx(Wf,{className:"w-4 h-4 mr-2"})," Al ristorante (alla consegna)"]}),s.jsx("div",{className:"text-2xl font-bold text-amber-800 mt-2",children:o.payments.pickup})]})]})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Ordini con sconti"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-indigo-700 font-medium",children:[s.jsx(No,{className:"w-4 h-4 mr-2"})," Primo ordine"]}),s.jsx("div",{className:"text-2xl font-bold text-indigo-800 mt-2",children:o.discounts.first_order})]}),s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-purple-700 font-medium",children:[s.jsx(No,{className:"w-4 h-4 mr-2"})," Superati i 40"]}),s.jsx("div",{className:"text-2xl font-bold text-purple-800 mt-2",children:o.discounts.amount_threshold})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4",children:[s.jsxs("div",{className:"flex items-center text-gray-700 font-medium",children:[s.jsx(No,{className:"w-4 h-4 mr-2"})," Nessuno sconto"]}),s.jsx("div",{className:"text-2xl font-bold text-gray-800 mt-2",children:o.discounts.none})]})]})]}),s.jsxs(ae,{className:"mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Totale somma ordini"}),s.jsx("div",{className:"text-3xl font-bold text-mediterranean-marroncino",children:c(o.totalSum)})]}),s.jsxs(ae,{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[s.jsx(qf,{className:"w-5 h-5 mr-2"}),"Utenti"]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"bg-sky-50 border border-sky-200 rounded-lg p-4",children:[s.jsx("div",{className:"text-sky-700 font-medium",children:"Numero totale utenti registrati"}),s.jsx("div",{className:"text-2xl font-bold text-sky-800 mt-2",children:o.users.totalRegisteredApprox}),s.jsx("div",{className:"text-xs text-sky-700 mt-1",children:"Basato sugli utenti con almeno un ordine"})]}),s.jsxs("div",{className:"bg-teal-50 border border-teal-200 rounded-lg p-4",children:[s.jsx("div",{className:"text-teal-700 font-medium",children:"Utenti abituali (pi di un ordine)"}),s.jsx("div",{className:"text-2xl font-bold text-teal-800 mt-2",children:o.users.habitual})]})]})]})]})},Gw=()=>{const[e,t]=y.useState("daily-menu"),[r,n]=y.useState(!1),{user:i,signOut:a,loading:o,isAdmin:c,adminLoading:l}=ct();y.useEffect(()=>{!o&&!i?n(!0):(i&&!l&&!c||i&&c)&&n(!1)},[i,o,c,l]);const u=b=>{b&&n(!1)},d=async()=>{await a(),n(!0)};if(o||l)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-mediterranean-marroncino mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:o?"Caricamento...":"Verifica permessi amministratore..."})]})});if(!i)return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6",children:[s.jsx("h2",{className:"text-2xl font-bold text-center text-gray-800 mb-4",children:"Pannello Amministratore"}),s.jsx("p",{className:"text-gray-600 text-center mb-6",children:"Accesso riservato agli amministratori autorizzati."}),s.jsx(Q,{onClick:()=>n(!0),className:"w-full",children:"Accedi come Amministratore"})]})}),s.jsx(Vw,{isOpen:r,onClose:()=>n(!1),onLogin:u})]});if(i&&!c)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6 text-center",children:[s.jsx("div",{className:"mb-4",children:s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.5 0L4.268 16.5c-.77.833.192 2.5 1.732 2.5z"})})})}),s.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"Accesso Negato"}),s.jsx("p",{className:"text-gray-600 mb-4",children:"Non hai i permessi necessari per accedere al pannello amministratore."}),s.jsxs("p",{className:"text-sm text-gray-500 mb-6",children:["Utente connesso: ",i.email]}),s.jsx(Q,{onClick:d,variant:"outline",className:"w-full",children:"Disconnetti"})]})});const m=[{id:"daily-menu",label:"Menu del Giorno",icon:Ct},{id:"fixed-menu",label:"Menu Fisso",icon:Ub},{id:"dishes",label:"Gestione Piatti",icon:qf},{id:"orders",label:"Ordini",icon:br},{id:"analytics",label:"Statistiche",icon:Mf}],h=()=>{switch(e){case"daily-menu":return s.jsx(Rd,{});case"fixed-menu":return s.jsx(qw,{});case"dishes":return s.jsx(Bw,{});case"orders":return s.jsx(Ww,{});case"analytics":return s.jsx(Hw,{});default:return s.jsx(Rd,{})}};return s.jsxs("div",{className:"min-h-screen bg-gray-50",children:[s.jsx("div",{className:"bg-white shadow-sm border-b",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex justify-between items-center py-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Pannello Amministratore"}),s.jsxs("p",{className:"text-sm text-gray-600",children:["Benvenuto, ",i==null?void 0:i.email]})]}),s.jsx("div",{className:"flex items-center space-x-4",children:s.jsxs("button",{onClick:d,className:"flex items-center px-4 py-2 text-sm text-gray-600 hover:text-gray-800 border border-gray-300 rounded-md hover:bg-gray-50",children:[s.jsx(Al,{className:"w-4 h-4 mr-1"}),"Esci"]})})]})})}),s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:s.jsxs("div",{className:"flex flex-col lg:flex-row gap-8",children:[s.jsx("div",{className:"lg:w-64",children:s.jsx("nav",{className:"bg-white rounded-lg shadow-sm p-4",children:s.jsx("ul",{className:"space-y-2",children:m.map(b=>{const j=b.icon;return s.jsx("li",{children:s.jsxs("button",{onClick:()=>t(b.id),className:`w-full flex items-center px-3 py-2 text-left rounded-md transition-colors ${e===b.id?"bg-amber-100 text-amber-800 font-medium":"text-gray-600 hover:bg-gray-100 hover:text-gray-800"}`,children:[s.jsx(j,{className:"w-5 h-5 mr-3"}),b.label]})},b.id)})})})}),s.jsx("div",{className:"flex-1 max-w-full overflow-x-hidden",children:s.jsx("div",{className:"bg-white rounded-lg shadow-sm max-w-full overflow-x-hidden",children:h()})})]})})]})},Kw=()=>{var b,j;const{user:e,signOut:t}=ct(),[r,n]=y.useState([]),[i,a]=y.useState(!0),[o,c]=y.useState(null);y.useEffect(()=>{e&&l()},[e]);const l=async()=>{if(e)try{a(!0);let{data:v,error:w}=await J.from("orders").select(`
          *,
          order_items (
            id,
            dish_name,
            dish_price,
            quantity,
            subtotal,
            pricing_type,
            weight_grams
          )
        `).eq("user_id",e.id).order("created_at",{ascending:!1});if(w){const g=String(w.message||"").toLowerCase();if(g.includes("pricing_type")||g.includes("weight_grams")){console.warn("Colonne peso non disponibili: fallback senza pricing_type/weight_grams");const p=`
            *,
            order_items (
              id,
              dish_name,
              dish_price,
              quantity,
              subtotal
            )
          `,{data:f,error:x}=await J.from("orders").select(p).eq("user_id",e.id).order("created_at",{ascending:!1});if(x)throw x;v=f}else throw w}n(v||[])}catch(v){console.error("Error fetching orders:",v)}finally{a(!1)}},u=v=>{switch(v){case"received":return"bg-blue-100 text-blue-800";case"preparing":return"bg-yellow-100 text-yellow-800";case"ready":return"bg-green-100 text-green-800";case"completed":return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},d=v=>{switch(v){case"received":return"Ricevuto";case"preparing":return"In Preparazione";case"ready":return"Pronto";case"completed":return"Completato";case"cancelled":return"Annullato";default:return v}},m=v=>new Date(v).toLocaleDateString("it-IT",{year:"numeric",month:"long",day:"numeric"}),h=v=>v.slice(0,5);return e?s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsxs("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"mb-8",children:[s.jsx("h1",{className:"font-serif text-4xl font-bold text-mediterranean-blu-scuro mb-4",children:"La Mia Dashboard"}),s.jsxs("p",{className:"text-lg text-mediterranean-blu-scuro",children:["Benvenuto, ",((b=e.user_metadata)==null?void 0:b.full_name)||e.email,"!"]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsx("div",{className:"lg:col-span-1",children:s.jsxs(ae,{children:[s.jsxs("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-4 flex items-center",children:[s.jsx(Xt,{className:"w-5 h-5 mr-2"}),"Informazioni Account"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-mediterranean-blu-scuro mb-1",children:"Nome"}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:((j=e.user_metadata)==null?void 0:j.full_name)||"Non specificato"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-mediterranean-blu-scuro mb-1",children:[s.jsx(Qs,{className:"w-4 h-4 inline mr-1"}),"Email"]}),s.jsx("p",{className:"text-mediterranean-blu-scuro",children:e.email})]}),s.jsx("div",{className:"pt-4 border-t",children:s.jsx(Q,{onClick:()=>t(),variant:"outline",size:"sm",className:"w-full",children:"Logout"})})]})]})}),s.jsx("div",{className:"lg:col-span-2",children:s.jsxs(ae,{children:[s.jsxs("h3",{className:"font-serif text-xl font-semibold text-mediterranean-blu-scuro mb-6 flex items-center",children:[s.jsx(br,{className:"w-5 h-5 mr-2"}),"Cronologia Ordini (",r.length,")"]}),i?s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-mediterranean-marroncino mx-auto"}),s.jsx("p",{className:"text-mediterranean-blu-scuro mt-4",children:"Caricamento ordini..."})]}):r.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(br,{className:"w-16 h-16 text-mediterranean-blu-scuro opacity-50 mx-auto mb-4"}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-4",children:"Nessun ordine trovato"}),s.jsx("p",{className:"text-sm text-mediterranean-blu-scuro opacity-75 mb-4",children:"I tuoi ordini appariranno qui una volta effettuati"}),s.jsx(Q,{variant:"outline",size:"sm",children:s.jsx("a",{href:"/menu-fisso",children:"Ordina Ora"})})]}):s.jsx("div",{className:"space-y-4",children:r.map(v=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{className:"flex items-center space-x-3",children:[s.jsxs("h4",{className:"font-semibold text-mediterranean-blu-scuro",children:["Ordine #",v.order_number]}),s.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${u(v.order_status)}`,children:d(v.order_status)})]}),s.jsx("button",{onClick:()=>c(o===v.id?null:v.id),className:"text-mediterranean-marroncino hover:text-mediterranean-blu-scuro",children:o===v.id?s.jsx(zf,{className:"w-5 h-5"}):s.jsx(Df,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-mediterranean-blu-scuro opacity-75",children:"Data:"}),s.jsx("p",{className:"font-medium text-mediterranean-blu-scuro",children:m(v.created_at)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-mediterranean-blu-scuro opacity-75",children:"Ritiro:"}),s.jsxs("p",{className:"font-medium text-mediterranean-blu-scuro",children:[new Date(v.pickup_date).toLocaleDateString("it-IT",{weekday:"short",day:"numeric",month:"short"})," - ",h(v.pickup_time)]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-mediterranean-blu-scuro opacity-75",children:"Pagamento:"}),s.jsx("p",{className:"font-medium text-mediterranean-blu-scuro",children:v.payment_method==="pickup"?"Al Ritiro":"Online"})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-mediterranean-blu-scuro opacity-75",children:"Totale:"}),s.jsxs("p",{className:"font-bold text-mediterranean-marroncino",children:["",v.total_amount.toFixed(2)]})]})]}),s.jsxs("div",{className:`transition-all duration-300 ease-in-out overflow-hidden ${o===v.id?"max-h-[1200px] opacity-100 translate-y-0 mt-4 pt-4 border-t":"max-h-0 opacity-0 -translate-y-1"}`,"aria-hidden":o!==v.id,children:[s.jsx("h5",{className:"font-medium text-mediterranean-blu-scuro mb-3",children:"Piatti Ordinati:"}),s.jsx("div",{className:"space-y-2",children:v.order_items.map(w=>s.jsxs("div",{className:"flex justify-between items-center py-2 px-3 bg-mediterranean-beige rounded",children:[s.jsxs("div",{children:[s.jsxs("span",{className:"font-medium text-mediterranean-blu-scuro",children:[w.dish_name,w.weight_grams?s.jsxs("span",{className:"ml-2 text-sm text-mediterranean-blu-scuro opacity-75",children:["(",Number(w.weight_grams),"g)"]}):null]}),s.jsxs("span",{className:"text-mediterranean-blu-scuro opacity-75 ml-2",children:["x",w.quantity]})]}),s.jsxs("span",{className:"font-semibold text-mediterranean-marroncino",children:["",w.subtotal.toFixed(2)]})]},w.id))}),v.discount_amount&&v.discount_amount>0&&s.jsxs("div",{className:"mt-4 p-3 bg-green-50 rounded-lg border border-green-200",children:[s.jsx("h5",{className:"font-medium text-mediterranean-blu-scuro mb-2",children:"Sconto Applicato:"}),s.jsxs("div",{className:"space-y-1 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{children:"Subtotale:"}),s.jsxs("span",{children:["",(v.original_amount||v.total_amount).toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between text-green-600",children:[s.jsxs("span",{children:["Sconto ",v.discount_type==="first_order"?"(Primo Ordine)":"(Ordine >40)",v.discount_percentage?` - ${v.discount_percentage}%`:"",":"]}),s.jsxs("span",{children:["-",v.discount_amount.toFixed(2)]})]}),s.jsxs("div",{className:"flex justify-between font-bold border-t pt-1",children:[s.jsx("span",{children:"Totale Finale:"}),s.jsxs("span",{children:["",v.total_amount.toFixed(2)]})]}),s.jsxs("div",{className:"text-right text-green-600 font-medium",children:["Hai risparmiato ",v.discount_amount.toFixed(2),"!"]})]})]}),v.notes&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h5",{className:"font-medium text-mediterranean-blu-scuro mb-2",children:"Note:"}),s.jsx("p",{className:"text-mediterranean-blu-scuro bg-mediterranean-beige p-3 rounded",children:v.notes})]})]})]},v.id))})]})})]})]})}):s.jsx("div",{className:"min-h-screen bg-mediterranean-beige py-8",children:s.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs(ae,{className:"text-center",children:[s.jsx("h1",{className:"font-serif text-3xl font-bold text-mediterranean-blu-scuro mb-4",children:"Accesso Richiesto"}),s.jsx("p",{className:"text-mediterranean-blu-scuro mb-6",children:"Devi effettuare il login per accedere alla tua dashboard."}),s.jsx(Q,{children:s.jsx("a",{href:"/login",children:"Accedi"})})]})})})};function Qw(){return s.jsx(jb,{children:s.jsx(Nb,{children:s.jsxs(_b,{children:[s.jsx(Xb,{}),s.jsx(Yb,{children:s.jsxs(S0,{children:[s.jsx(yt,{path:"/",element:s.jsx(ew,{})}),s.jsx(yt,{path:"/menu-fisso",element:s.jsx(tw,{})}),s.jsx(yt,{path:"/menu-del-giorno",element:s.jsx(rw,{})}),s.jsx(yt,{path:"/prenota",element:s.jsx(_d,{})}),s.jsx(yt,{path:"/prenotazione",element:s.jsx(_d,{})}),s.jsx(yt,{path:"/pagamento",element:s.jsx($w,{})}),s.jsx(yt,{path:"/dashboard",element:s.jsx(Kw,{})}),s.jsx(yt,{path:"/galleria",element:s.jsx(Fw,{})}),s.jsx(yt,{path:"/contatti",element:s.jsx(Uw,{})}),s.jsx(yt,{path:"/admin",element:s.jsx(Zb,{children:s.jsx(Gw,{})})})]})})]})})})}Hh(document.getElementById("root")).render(s.jsx(y.StrictMode,{children:s.jsx(Q0,{children:s.jsx(Qw,{})})}));
