@tailwind base;
@tailwind components;
@tailwind utilities;

/* From Uiverse.io by gharsh11032000 */
/* The switch - the box around the slider */
.switch {
  font-size: 17px;
  position: relative;
  display: inline-block;
  width: 3.5em;
  height: 2em;
}

/* Hide default HTML checkbox */
.switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

/* The slider */
.slider {
  position: absolute;
  cursor: pointer;
  inset: 0;
  background: #9fccfa;
  border-radius: 50px;
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.slider:before {
  position: absolute;
  content: "";
  display: flex;
  align-items: center;
  justify-content: center;
  height: 2em;
  width: 2em;
  inset: 0;
  background-color: white;
  border-radius: 50px;
  box-shadow: 0 10px 20px rgba(0,0,0,0.4);
  transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.switch input:checked + .slider {
  background: #0974f1;
}

.switch input:focus + .slider {
  box-shadow: 0 0 1px #0974f1;
}

.switch input:checked + .slider:before {
  transform: translateX(1.6em);
}

/* Custom animations */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

@keyframes slideInUp {
  from {
    transform: translateY(100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes slideInLeft {
  from {
    transform: translateX(-100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Mobile dropdown: slide in from top */
@keyframes slideInDown {
  from {
    transform: translateY(-100%);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

/* Scrolling animations for reviews */
@keyframes scrollLeft {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

@keyframes scrollRight {
  0% {
    transform: translateX(-50%);
  }
  100% {
    transform: translateX(0);
  }
}

.animate-fade-in {
  animation: fadeIn 0.3s ease-in-out;
}

.animate-slide-in-up {
  animation: slideInUp 0.3s ease-out;
}

.animate-slide-in-right {
  animation: slideInRight 0.4s ease-out;
}

.animate-slide-in-left {
  animation: slideInLeft 0.4s ease-out;
}

.animate-slide-in-down {
  animation: slideInDown 0.3s ease-out;
}

/* Dropdown espansione completa (apertura lenta dall'alto verso il basso) */
@keyframes expandDown {
  0% {
    max-height: 0;
    opacity: 0;
    transform: translateY(-6px);
  }
  100% {
    max-height: 90vh;
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-expand-down {
  animation: expandDown 600ms ease-out;
  overflow: hidden;
}

.animate-scroll-left {
  animation: scrollLeft 30s linear infinite;
}

.animate-scroll-right {
  animation: scrollRight 30s linear infinite;
}

/* Delivery options open animation (staggerable) */
@keyframes fadeSlideIn {
  from {
    opacity: 0;
    transform: translateY(8px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.fade-slide-in {
  animation: fadeSlideIn 600ms ease-out forwards;
}

/* Dropdown open/close transition (keep mounted) */
.dropdown-anim {
  overflow: hidden;
  max-height: 0;
  opacity: 0;
  transform: translateY(-6px);
  transition:
    max-height 450ms ease,
    opacity 350ms ease,
    transform 350ms ease;
  will-change: max-height, opacity, transform;
}

.dropdown-anim.open {
  max-height: 60vh;
  opacity: 1;
  transform: translateY(0);
}

/* Cart icon bump on item arrival */
@keyframes cartBump {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.cart-bump {
  animation: cartBump 300ms ease;
}

/* Error feedback: shake animation for wrong verification code */
@keyframes shake {
  0% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
  100% { transform: translateX(0); }
}

.animate-shake {
  animation: shake 400ms ease-in-out;
}

/* --- Stripe 3DS overlay hardening (mobile) --- */
/* Ensure page chrome doesn't create stacking contexts that sit above Stripe's challenge */
html, body, #root {
  position: static !important;
  transform: none !important;
}

/* Raise Stripe private frames above any z-index overlays and allow touch events */
iframe[name^="__privateStripeFrame"], iframe[name^="__stripe"] {
  z-index: 2147483647 !important;
  pointer-events: auto !important;
}

/* In case a full-screen container overlaps, disable pointer-events specifically on pagamento chrome wrappers */
.pagamento-isolation *[data-overlay], .pagamento-isolation .fixed, .pagamento-isolation .sticky {
  pointer-events: none !important;
}

/* Hide Home floating actions when cookie panel is open (tutti i dispositivi) */
body.cookie-open .home-floating-actions {
  display: none !important;
}

/* Hide Home floating action buttons on mobile when any modal is open */
@media (max-width: 768px) {
  body.modal-open .home-floating-actions {
    display: none !important;
  }
}

/* Riduci dimensione degli switch su mobile per occupare meno spazio */
@media (max-width: 768px) {
  .switch {
    width: 2.8em;
    height: 1.6em;
  }
  .slider:before {
    height: 1.6em;
    width: 1.6em;
  }
  .switch input:checked + .slider:before {
    transform: translateX(1.2em);
  }
}
